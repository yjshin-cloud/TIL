# JSP & Spring Web í•™ìŠµ ê°€ì´ë“œ ğŸ“š

## ëª©ì°¨
1. [JSP ê¸°ì´ˆ](#jsp-ê¸°ì´ˆ)
2. [Spring Web ê°œë…](#spring-web-ê°œë…)
3. [JPAì™€ Spring Data JPA](#jpaì™€-spring-data-jpa)
4. [ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜](#ë ˆì´ì–´ë“œ-ì•„í‚¤í…ì²˜)
5. [ì˜ì¡´ì„± ì£¼ì… (DI)](#ì˜ì¡´ì„±-ì£¼ì…-di)
6. [Lombok í™œìš©](#lombok-í™œìš©)
7. [ì‹¤ìŠµ ì˜ˆì œ](#ì‹¤ìŠµ-ì˜ˆì œ)
8. [í˜„ì—… ì ìš© ê°€ì´ë“œ](#í˜„ì—…-ì ìš©-ê°€ì´ë“œ)
9. [ë°°í¬ ì„¤ì •](#ë°°í¬-ì„¤ì •)

---

## JSP ê¸°ì´ˆ

### JSPë€?
**JSP (Java Server Pages)**ëŠ” HTML ì•ˆì— Java ì½”ë“œë¥¼ ì‚½ì…í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì„œë²„ ì‚¬ì´ë“œ ìŠ¤í¬ë¦½íŠ¸ ê¸°ìˆ ì…ë‹ˆë‹¤.

```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<!-- JSP í˜ì´ì§€ ì§€ì‹œì: ì´ í˜ì´ì§€ê°€ HTML í˜•íƒœë¡œ ì¶œë ¥ë˜ê³ , Java ì–¸ì–´ë¥¼ ì‚¬ìš©í•¨ì„ ì„ ì–¸ -->

<!DOCTYPE html>
<html>
<head>
    <title>JSP ê¸°ì´ˆ ì˜ˆì œ</title>
</head>
<body>
    <!-- Java ë³€ìˆ˜ ì„ ì–¸ê³¼ ì´ˆê¸°í™” -->
    <%
        String userName = "í™ê¸¸ë™";  // ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ëŠ” Java ì½”ë“œ
        int visitCount = 5;
    %>
    
    <!-- ë³€ìˆ˜ ê°’ì„ HTMLì— ì¶œë ¥ -->
    <h1>ì•ˆë…•í•˜ì„¸ìš”, <%= userName %>ë‹˜!</h1>  <!-- expression íƒœê·¸: ë³€ìˆ˜ ê°’ ì¶œë ¥ -->
    <p>ì´ <%= visitCount %>ë²ˆ ë°©ë¬¸í•˜ì…¨ìŠµë‹ˆë‹¤.</p>
</body>
</html>
```

### ğŸ’¡ í˜„ì—…ì—ì„œëŠ”?
- **JSP ë‹¨ë… ì‚¬ìš©**: ê±°ì˜ ì—†ìŒ (ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›€)
- **Spring MVC + Thymeleaf**: ê°€ì¥ ë§ì´ ì‚¬ìš©
- **React/Vue + REST API**: ìµœì‹  íŠ¸ë Œë“œ

---

## Spring Web ê°œë…

### Spring MVC íŒ¨í„´
Spring Webì€ **Model-View-Controller** íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.

```mermaid
graph LR
    A[í´ë¼ì´ì–¸íŠ¸ ìš”ì²­] --> B[DispatcherServlet]
    B --> C[Controller]
    C --> D[Service]
    D --> E[Repository]
    E --> F[(Database)]
    F --> E
    E --> D
    D --> C
    C --> G[Model + View]
    G --> H[ViewResolver]
    H --> I[JSP/Thymeleaf]
    I --> J[í´ë¼ì´ì–¸íŠ¸ ì‘ë‹µ]
```

### ê¸°ë³¸ Controller ì˜ˆì œ

```java
package com.example.demo.controller;

import org.springframework.stereotype.Controller;  // ìŠ¤í”„ë§ ì»¨íŠ¸ë¡¤ëŸ¬ì„ì„ ëª…ì‹œ
import org.springframework.ui.Model;              // ë·°ì— ë°ì´í„° ì „ë‹¬ìš© ê°ì²´
import org.springframework.web.bind.annotation.GetMapping;  // GET ìš”ì²­ ë§¤í•‘
import org.springframework.web.bind.annotation.RequestParam;  // ìš”ì²­ íŒŒë¼ë¯¸í„° ë°›ê¸°

@Controller  // ì´ í´ë˜ìŠ¤ê°€ ì›¹ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì„ì„ ìŠ¤í”„ë§ì—ê²Œ ì•Œë¦¼
public class HelloController {
    
    @GetMapping("/hello")  // GET ë°©ì‹ìœ¼ë¡œ "/hello" ê²½ë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ì´ ë©”ì„œë“œ ì‹¤í–‰
    public String hello(
        @RequestParam(name = "name", defaultValue = "World") String name,  
        // URLì˜ ?name=ê°’ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ìŒ. ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ "World" ì‚¬ìš©
        Model model  // ë·°(HTML)ì— ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•œ ê°ì²´
    ) {
        model.addAttribute("greeting", "ì•ˆë…•í•˜ì„¸ìš”, " + name + "ë‹˜!");  
        // "greeting"ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë·°ì— ì „ë‹¬
        
        return "hello";  // "hello.html" í…œí”Œë¦¿ì„ ì°¾ì•„ì„œ ë Œë”ë§í•˜ë¼ê³  ì§€ì‹œ
    }
}
```

### ğŸ” QueryDSLì„ í™œìš©í•œ ë™ì  ì¿¼ë¦¬

```java
// QueryDSL ì„¤ì • (build.gradle)
dependencies {
    implementation 'com.querydsl:querydsl-jpa:5.0.0'
    annotationProcessor 'com.querydsl:querydsl-apt:5.0.0'
}

// ì»¤ìŠ¤í…€ Repository êµ¬í˜„
@Repository
@RequiredArgsConstructor
public class MemberRepositoryCustomImpl implements MemberRepositoryCustom {
    
    private final JPAQueryFactory queryFactory;  // QueryDSL ì¿¼ë¦¬ íŒ©í† ë¦¬
    
    /**
     * ë™ì  ê²€ìƒ‰ ì¿¼ë¦¬ - ì¡°ê±´ì— ë”°ë¼ WHERE ì ˆì´ ë‹¬ë¼ì§
     */
    @Override
    public Page<Member> searchMembers(MemberSearchCondition condition, Pageable pageable) {
        QMember member = QMember.member;  // QueryDSL Qí´ë˜ìŠ¤
        
        List<Member> content = queryFactory
            .selectFrom(member)
            .where(
                nameContains(condition.getName()),     // ì´ë¦„ í¬í•¨ ê²€ìƒ‰
                emailContains(condition.getEmail()),   // ì´ë©”ì¼ í¬í•¨ ê²€ìƒ‰
                createdBetween(condition.getStartDate(), condition.getEndDate())  // ê¸°ê°„ ê²€ìƒ‰
            )
            .orderBy(member.createdAt.desc())
            .offset(pageable.getOffset())  // í˜ì´ì§• ì‹œì‘ì 
            .limit(pageable.getPageSize()) // í˜ì´ì§• í¬ê¸°
            .fetch();  // ì‹¤í–‰
        
        // ì „ì²´ ê°œìˆ˜ ì¡°íšŒ (í˜ì´ì§• ì •ë³´ë¥¼ ìœ„í•´)
        Long total = queryFactory
            .select(member.count())
            .from(member)
            .where(
                nameContains(condition.getName()),
                emailContains(condition.getEmail()),
                createdBetween(condition.getStartDate(), condition.getEndDate())
            )
            .fetchOne();
        
        return new PageImpl<>(content, pageable, total);
    }
    
    // ë™ì  ì¡°ê±´ ë©”ì„œë“œë“¤ - nullì´ë©´ ì¡°ê±´ì—ì„œ ì œì™¸
    private BooleanExpression nameContains(String name) {
        return hasText(name) ? QMember.member.name.containsIgnoreCase(name) : null;
    }
    
    private BooleanExpression emailContains(String email) {
        return hasText(email) ? QMember.member.email.containsIgnoreCase(email) : null;
    }
    
    private BooleanExpression createdBetween(LocalDate startDate, LocalDate endDate) {
        if (startDate != null && endDate != null) {
            return QMember.member.createdAt.between(
                startDate.atStartOfDay(), 
                endDate.atTime(23, 59, 59)
            );
        }
        return null;
    }
}
```

### ğŸ“ˆ ëª¨ë‹ˆí„°ë§ê³¼ ë¡œê¹…

```java
// Application ì´ë²¤íŠ¸ë¥¼ í†µí•œ ë¡œê¹…
@Component
@RequiredArgsConstructor
@Slf4j  // Lombokì˜ ë¡œê±° ìë™ ìƒì„±
public class MemberEventListener {
    
    @EventListener  // Spring ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    @Async          // ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ì„±ëŠ¥ ì˜í–¥ ìµœì†Œí™”
    public void handleMemberCreated(MemberCreatedEvent event) {
        log.info("ìƒˆ íšŒì› ê°€ì…: ID={}, ì´ë©”ì¼={}, ê°€ì…ì‹œê°„={}", 
            event.getMemberId(), 
            event.getEmail(), 
            event.getCreatedAt());
        
        // ì¶”ê°€ ì‘ì—… (ì´ë©”ì¼ ë°œì†¡, í†µê³„ ì—…ë°ì´íŠ¸ ë“±)
        sendWelcomeEmail(event.getEmail());
        updateMemberStatistics();
    }
    
    private void sendWelcomeEmail(String email) {
        // ì´ë©”ì¼ ë°œì†¡ ë¡œì§
        log.debug("í™˜ì˜ ì´ë©”ì¼ ë°œì†¡: {}", email);
    }
    
    private void updateMemberStatistics() {
        // í†µê³„ ì •ë³´ ì—…ë°ì´íŠ¸
        log.debug("íšŒì› ê°€ì… í†µê³„ ì—…ë°ì´íŠ¸");
    }
}

// Custom ë©”íŠ¸ë¦­ìŠ¤ (Spring Boot Actuator)
@Component
@RequiredArgsConstructor
public class MemberMetrics {
    
    private final MemberRepository memberRepository;
    private final MeterRegistry meterRegistry;  // ë©”íŠ¸ë¦­ ë“±ë¡ìš©
    
    @PostConstruct
    public void init() {
        // ì‚¬ìš©ì ì •ì˜ ë©”íŠ¸ë¦­ ë“±ë¡
        Gauge.builder("members.total.count")
            .description("ì „ì²´ íšŒì› ìˆ˜")
            .register(meterRegistry, this, MemberMetrics::getTotalMemberCount);
    }
    
    private double getTotalMemberCount(MemberMetrics metrics) {
        return memberRepository.count();
    }
}
```

### ğŸ—ï¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ì¤€ë¹„

```mermaid
graph TB
    subgraph "Frontend"
        A[React/Vue SPA]
    end
    
    subgraph "API Gateway"
        B[Spring Cloud Gateway<br/>ë¼ìš°íŒ…, ì¸ì¦, ë¡œë“œë°¸ëŸ°ì‹±]
    end
    
    subgraph "Microservices"
        C[Member Service<br/>íšŒì› ê´€ë¦¬]
        D[Order Service<br/>ì£¼ë¬¸ ê´€ë¦¬]
        E[Product Service<br/>ìƒí’ˆ ê´€ë¦¬]
        F[Notification Service<br/>ì•Œë¦¼ ì„œë¹„ìŠ¤]
    end
    
    subgraph "Data Layer"
        G[(Member DB<br/>MySQL)]
        H[(Order DB<br/>PostgreSQL)]
        I[(Product DB<br/>MongoDB)]
        J[Redis Cache<br/>ì„¸ì…˜, ìºì‹œ]
    end
    
    subgraph "Message Queue"
        K[RabbitMQ/Kafka<br/>ë¹„ë™ê¸° í†µì‹ ]
    end
    
    A --> B
    B --> C
    B --> D
    B --> E
    B --> F
    
    C --> G
    C --> J
    D --> H
    D --> J
    E --> I
    E --> J
    F --> K
    
    C -.-> K
    D -.-> K
    E -.-> K
    
    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#e8f5e8
    style E fill:#e8f5e8
    style F fill:#e8f5e8
    style G fill:#fff3e0
    style H fill:#fff3e0
    style I fill:#fff3e0
    style J fill:#ffebee
    style K fill:#f1f8e9
```

---

## ğŸ¯ í•™ìŠµ ë¡œë“œë§µê³¼ ì‹¤ë¬´ ì „í™˜ ê°€ì´ë“œ

### ë‹¨ê³„ë³„ í•™ìŠµ ê³„íš

```mermaid
flowchart TD
    A[1ë‹¨ê³„: Java ê¸°ì´ˆ<br/>2-3ì£¼] --> B[2ë‹¨ê³„: Spring ê¸°ì´ˆ<br/>3-4ì£¼]
    B --> C[3ë‹¨ê³„: Spring Boot<br/>4-5ì£¼]
    C --> D[4ë‹¨ê³„: JPA/Hibernate<br/>3-4ì£¼]
    D --> E[5ë‹¨ê³„: ì‹¤ë¬´ í”„ë¡œì íŠ¸<br/>6-8ì£¼]
    E --> F[6ë‹¨ê³„: ê³ ê¸‰ ì£¼ì œ<br/>ì§€ì†ì  í•™ìŠµ]
    
    subgraph "1ë‹¨ê³„ ìƒì„¸"
        A1[Java ë¬¸ë²•]
        A2[ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°]
        A3[ì»¬ë ‰ì…˜ í”„ë ˆì„ì›Œí¬]
        A4[ì˜ˆì™¸ ì²˜ë¦¬]
    end
    
    subgraph "2ë‹¨ê³„ ìƒì„¸"
        B1[Spring Core]
        B2[ì˜ì¡´ì„± ì£¼ì…]
        B3[Spring MVC]
        B4[AOP ê¸°ì´ˆ]
    end
    
    subgraph "3ë‹¨ê³„ ìƒì„¸"
        C1[Auto Configuration]
        C2[Starter Dependencies]
        C3[Actuator]
        C4[Profile ê´€ë¦¬]
    end
    
    subgraph "4ë‹¨ê³„ ìƒì„¸"
        D1[Entity ì„¤ê³„]
        D2[Repository íŒ¨í„´]
        D3[JPQL/QueryDSL]
        D4[íŠ¸ëœì­ì…˜ ê´€ë¦¬]
    end
    
    subgraph "5ë‹¨ê³„ ìƒì„¸"
        E1[REST API ê°œë°œ]
        E2[ì¸ì¦/ì¸ê°€]
        E3[í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±]
        E4[ë°°í¬/ìš´ì˜]
    end
    
    subgraph "6ë‹¨ê³„ ìƒì„¸"
        F1[ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤]
        F2[í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ]
        F3[ì„±ëŠ¥ ìµœì í™”]
        F4[DevOps]
    end
    
    A --> A1
    A --> A2
    A --> A3
    A --> A4
    
    B --> B1
    B --> B2
    B --> B3
    B --> B4
    
    C --> C1
    C --> C2
    C --> C3
    C --> C4
    
    D --> D1
    D --> D2
    D --> D3
    D --> D4
    
    E --> E1
    E --> E2
    E --> E3
    E --> E4
    
    F --> F1
    F --> F2
    F --> F3
    F --> F4
```

### ğŸ’¡ ì‹¤ë¬´ ë©´ì ‘ ëŒ€ë¹„ í•µì‹¬ ì§ˆë¬¸

#### ê¸°ìˆ  ë©´ì ‘ ë‹¨ê³¨ ì§ˆë¬¸ë“¤

1. **Springê³¼ Spring Bootì˜ ì°¨ì´ì **
   ```
   ë‹µë³€ ì˜ˆì‹œ:
   - Spring: ì„¤ì •ì´ ë³µì¡, XML ë˜ëŠ” Java Config í•„ìš”
   - Spring Boot: Auto Configurationìœ¼ë¡œ ê°„ë‹¨í•œ ì„¤ì •
   - Starter Dependenciesë¡œ ì˜ì¡´ì„± ê´€ë¦¬ ê°„ì†Œí™”
   - ë‚´ì¥ ì„œë²„(Tomcat) í¬í•¨ìœ¼ë¡œ ë³„ë„ WAS ë¶ˆí•„ìš”
   ```

2. **JPA N+1 ë¬¸ì œì™€ í•´ê²°ë°©ì•ˆ**
   ```
   ë‹µë³€ ì˜ˆì‹œ:
   - ë¬¸ì œ: ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•  ë•Œ ì¶”ê°€ ì¿¼ë¦¬ê°€ Në²ˆ ì‹¤í–‰
   - í•´ê²°ì±…: Fetch Join, @EntityGraph, Batch Size ì„¤ì •
   - ì§€ì—°ë¡œë”©(LAZY)ê³¼ ì¦‰ì‹œë¡œë”©(EAGER) ì ì ˆí•œ ì„ íƒ
   ```

3. **@Transactionalì˜ ë™ì‘ì›ë¦¬**
   ```
   ë‹µë³€ ì˜ˆì‹œ:
   - AOP Proxyë¥¼ í†µí•œ íŠ¸ëœì­ì…˜ ê´€ë¦¬
   - ë©”ì„œë“œ ì‹œì‘ ì‹œ íŠ¸ëœì­ì…˜ ì‹œì‘, ì¢…ë£Œ ì‹œ ì»¤ë°‹/ë¡¤ë°±
   - ì˜ˆì™¸ ë°œìƒ ì‹œ ìë™ ë¡¤ë°± (RuntimeException ê³„ì—´)
   - readOnly ì†ì„±ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™” ê°€ëŠ¥
   ```

### ğŸ“š ì¶”ì²œ í•™ìŠµ ìë£Œ

#### í•„ìˆ˜ ë„ì„œ
- **Spring Boot ì™„ì „ ì •ë³µ** - ì‹¤ë¬´ì— ë°”ë¡œ ì ìš© ê°€ëŠ¥í•œ ì˜ˆì œ ì¤‘ì‹¬
- **ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë°** - JPAì˜ ë°”ì´ë¸”
- **í† ë¹„ì˜ ìŠ¤í”„ë§** - Springì˜ ì›ë¦¬ì™€ ì² í•™ ì´í•´

#### ì˜¨ë¼ì¸ ê°•ì˜
- **ì¸í”„ëŸ°**: ì‹¤ë¬´ ì¤‘ì‹¬ì˜ í•œêµ­ì–´ ê°•ì˜ ë‹¤ìˆ˜
- **Spring ê³µì‹ ê°€ì´ë“œ**: ìµœì‹  ì •ë³´ì™€ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤
- **Baeldung**: ì˜ì–´ë¡œ ëœ ê³ í’ˆì§ˆ Spring íŠœí† ë¦¬ì–¼

#### ì‹¤ìŠµ í”„ë¡œì íŠ¸ ì•„ì´ë””ì–´
1. **ê²Œì‹œíŒ ì‹œìŠ¤í…œ** - CRUDì˜ ê¸°ë³¸
2. **ì‡¼í•‘ëª°** - ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê²½í—˜
3. **ì±„íŒ… ì• í”Œë¦¬ì¼€ì´ì…˜** - WebSocket, ì‹¤ì‹œê°„ í†µì‹ 
4. **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤** - í˜„ëŒ€ì ì¸ ì•„í‚¤í…ì²˜ ê²½í—˜

---

## ğŸ ë§ˆë¬´ë¦¬: í˜„ì—… ê°œë°œìê°€ ë˜ê¸° ìœ„í•œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ê¸°ë³¸ê¸° ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] **Java ê¸°ì´ˆ**: ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì™„ì „ ì´í•´
- [ ] **Spring Core**: DI, AOP ê°œë…ê³¼ í™œìš©
- [ ] **Spring Boot**: í”„ë¡œì íŠ¸ ìƒì„±ë¶€í„° ë°°í¬ê¹Œì§€
- [ ] **JPA**: Entity ì„¤ê³„, Repository íŒ¨í„´, ì¿¼ë¦¬ ìµœì í™”
- [ ] **ë°ì´í„°ë² ì´ìŠ¤**: SQL ì‘ì„±, ì¸ë±ìŠ¤ ì´í•´
- [ ] **REST API**: ì„¤ê³„ ì›ì¹™ê³¼ êµ¬í˜„
- [ ] **í…ŒìŠ¤íŠ¸**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸, í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] **Git**: ë²„ì „ ê´€ë¦¬, í˜‘ì—… ì›Œí¬í”Œë¡œìš°

### ğŸ¯ ì‹¤ë¬´ ì¤€ë¹„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] **í¬íŠ¸í´ë¦¬ì˜¤**: GitHubì— 3ê°œ ì´ìƒì˜ ì™„ì„±ëœ í”„ë¡œì íŠ¸
- [ ] **ì½”ë“œ í’ˆì§ˆ**: Clean Code ì›ì¹™ ì ìš©
- [ ] **ë¬¸ì„œí™”**: README, API ë¬¸ì„œ ì‘ì„± ìŠµê´€
- [ ] **ì„±ëŠ¥**: ì¿¼ë¦¬ ìµœì í™”, ìºì‹± ì „ëµ ì´í•´
- [ ] **ë³´ì•ˆ**: ì¸ì¦/ì¸ê°€, HTTPS, SQL Injection ë°©ì–´
- [ ] **ëª¨ë‹ˆí„°ë§**: ë¡œê¹…, ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ê²½í—˜
- [ ] **ë°°í¬**: CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶• ê²½í—˜

### ğŸš€ ì§€ì†ì  ì„±ì¥ì„ ìœ„í•œ ê°€ì´ë“œ

```mermaid
graph LR
    A[ì£¼ë‹ˆì–´ ê°œë°œì<br/>0-2ë…„] --> B[ì‹œë‹ˆì–´ ê°œë°œì<br/>3-5ë…„]
    B --> C[ë¦¬ë“œ ê°œë°œì<br/>5-8ë…„]
    C --> D[ì•„í‚¤í…íŠ¸<br/>8ë…„+]
    
    A --> A1[ê¸°ë³¸ê¸° ì™„ì„±<br/>CRUD êµ¬í˜„]
    A --> A2[ì½”ë“œ ë¦¬ë·° ì°¸ì—¬<br/>Best Practice í•™ìŠµ]
    
    B --> B1[ì„¤ê³„ ëŠ¥ë ¥ í–¥ìƒ<br/>ì•„í‚¤í…ì²˜ ì´í•´]
    B --> B2[ì„±ëŠ¥ ìµœì í™”<br/>ì¥ì•  ëŒ€ì‘]
    
    C --> C1[íŒ€ ë¦¬ë”©<br/>ê¸°ìˆ  ì˜ì‚¬ê²°ì •]
    C --> C2[ì‹ ê¸°ìˆ  ë„ì…<br/>í‘œì¤€í™” ì¶”ì§„]
    
    D --> D1[ì „ì²´ ì‹œìŠ¤í…œ ì„¤ê³„<br/>ê¸°ìˆ  ì „ëµ ìˆ˜ë¦½]
    D --> D2[ê¸°ìˆ  íŠ¸ë Œë“œ ë¶„ì„<br/>ì¡°ì§ ì„±ì¥ ê¸°ì—¬]
```

---

## ğŸ’» ìµœì¢… ì‹¤ìŠµ: ì™„ì „í•œ ê²Œì‹œíŒ ì‹œìŠ¤í…œ

ì´ ê°€ì´ë“œì˜ ëª¨ë“  ë‚´ìš©ì„ ì¢…í•©í•œ ì‹¤ì œ ë™ì‘í•˜ëŠ” ê²Œì‹œíŒ ì‹œìŠ¤í…œì„ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

```java
// ìµœì¢… ì‹¤ìŠµ: Post Entity
@Entity
@Table(name = "posts")
@Getter @Setter
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class Post {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(nullable = false, length = 200)
    private String title;
    
    @Column(nullable = false, columnDefinition = "TEXT")
    private String content;
    
    @Column(nullable = false, length = 50)
    private String author;
    
    private int viewCount = 0;
    
    @CreationTimestamp  // Hibernateì˜ ìë™ ìƒì„± ì‹œê°„
    @Column(name = "created_at")
    private LocalDateTime createdAt;
    
    @UpdateTimestamp    // Hibernateì˜ ìë™ ìˆ˜ì • ì‹œê°„
    @Column(name = "updated_at")
    private LocalDateTime updatedAt;
    
    // ì¡°íšŒìˆ˜ ì¦ê°€ ë©”ì„œë“œ
    public void increaseViewCount() {
        this.viewCount++;
    }
}
```

ì´ì œ ì—¬ëŸ¬ë¶„ë„ JSPë¶€í„° ì‹œì‘í•´ì„œ ìµœì‹  Spring Bootê¹Œì§€, ê·¸ë¦¬ê³  í˜„ì—…ì—ì„œ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ê¸°ìˆ ë“¤ì„ ì´í•´í•˜ê³  í™œìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰

**ê¸°ì–µí•˜ì„¸ìš”**: 
- ğŸ“– ê¾¸ì¤€í•œ í•™ìŠµì´ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤
- ğŸ’ª ì‹¤ìŠµì„ í†µí•´ì„œë§Œ ì‹¤ë ¥ì´ ëŠ¡ë‹ˆë‹¤  
- ğŸ¤ ì»¤ë®¤ë‹ˆí‹°ì— ì°¸ì—¬í•´ì„œ ì§€ì‹ì„ ë‚˜ëˆ„ì„¸ìš”
- ğŸ¯ í˜„ì—… íŠ¸ë Œë“œë¥¼ ì§€ì†ì ìœ¼ë¡œ íŒ”ë¡œì—…í•˜ì„¸ìš”

Happy Coding! ğŸš€

---

## JPAì™€ Spring Data JPA

### JPA ê°œë… ì´í•´

```mermaid
graph TB
    A[JPA<br/>Java Persistence API] --> B[Hibernate<br/>êµ¬í˜„ì²´]
    A --> C[EclipseLink<br/>êµ¬í˜„ì²´]
    A --> D[ê¸°íƒ€ êµ¬í˜„ì²´]
    B --> E[Spring Data JPA<br/>í¸ì˜ ê¸°ëŠ¥ ì¶”ê°€]
    E --> F[JpaRepository<br/>ì¸í„°í˜ì´ìŠ¤]
```

### Entity í´ë˜ìŠ¤ ì˜ˆì œ

```java
package com.example.demo.entity;

import lombok.Data;                    // Getter, Setter, toString ë“± ìë™ ìƒì„±
import lombok.NoArgsConstructor;       // ê¸°ë³¸ ìƒì„±ì ìë™ ìƒì„±
import lombok.AllArgsConstructor;      // ëª¨ë“  í•„ë“œ ìƒì„±ì ìë™ ìƒì„±

import javax.persistence.*;            // JPA ì–´ë…¸í…Œì´ì…˜ë“¤
import java.time.LocalDateTime;        // ë‚ ì§œ/ì‹œê°„ ì²˜ë¦¬ìš©

@Entity  // ì´ í´ë˜ìŠ¤ê°€ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ëŠ” JPA ì—”í‹°í‹°ì„ì„ ì„ ì–¸
@Table(name = "members")  // ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚¬ìš©í•  í…Œì´ë¸” ì´ë¦„ ì§€ì •
@Data  // Lombok: Getter, Setter, toString, equals, hashCode ë©”ì„œë“œ ìë™ ìƒì„±
@NoArgsConstructor  // Lombok: ë§¤ê°œë³€ìˆ˜ ì—†ëŠ” ê¸°ë³¸ ìƒì„±ì ìë™ ìƒì„± (JPA í•„ìˆ˜)
@AllArgsConstructor  // Lombok: ëª¨ë“  í•„ë“œë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ëŠ” ìƒì„±ì ìë™ ìƒì„±
public class Member {
    
    @Id  // ì´ í•„ë“œê°€ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤(Primary Key)ì„ì„ ì„ ì–¸
    @GeneratedValue(strategy = GenerationType.IDENTITY)  
    // ê¸°ë³¸ í‚¤ ê°’ì„ ë°ì´í„°ë² ì´ìŠ¤ê°€ ìë™ìœ¼ë¡œ ìƒì„±í•˜ë„ë¡ ì„¤ì • (AUTO_INCREMENT)
    private Long id;
    
    @Column(nullable = false, length = 50)  
    // ë°ì´í„°ë² ì´ìŠ¤ ì»¬ëŸ¼ ì œì•½ì¡°ê±´: NOT NULL, ìµœëŒ€ ê¸¸ì´ 50ì
    private String name;
    
    @Column(unique = true, nullable = false)  
    // ì´ë©”ì¼ì€ ì¤‘ë³µ ë¶ˆê°€ëŠ¥í•˜ê³  í•„ìˆ˜ ì…ë ¥
    private String email;
    
    @Column(name = "created_at")  
    // Java í•„ë“œëª…ê³¼ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ ì»¬ëŸ¼ëª… ì§€ì •
    private LocalDateTime createdAt;
    
    @PrePersist  // ì—”í‹°í‹°ê°€ ì²˜ìŒ ì €ì¥ë˜ê¸° ì „ì— ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œ
    protected void onCreate() {
        createdAt = LocalDateTime.now();  // í˜„ì¬ ì‹œê°ìœ¼ë¡œ ìƒì„±ì¼ì‹œ ìë™ ì„¤ì •
    }
}
```

### Repository ì¸í„°í˜ì´ìŠ¤

```java
package com.example.demo.repository;

import com.example.demo.entity.Member;
import org.springframework.data.jpa.repository.JpaRepository;  // Spring Data JPA
import org.springframework.data.jpa.repository.Query;          // ì»¤ìŠ¤í…€ ì¿¼ë¦¬ìš©
import org.springframework.stereotype.Repository;

import java.util.List;
import java.util.Optional;

@Repository  // ìŠ¤í”„ë§ì´ ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¹ˆìœ¼ë¡œ ê´€ë¦¬í•˜ë„ë¡ ì§€ì‹œ
public interface MemberRepository extends JpaRepository<Member, Long> {
    // JpaRepository<ì—”í‹°í‹°íƒ€ì…, ê¸°ë³¸í‚¤íƒ€ì…> ìƒì†ìœ¼ë¡œ ê¸°ë³¸ CRUD ë©”ì„œë“œë“¤ì´ ìë™ ì œê³µë¨
    // - save(entity): ì €ì¥
    // - findById(id): IDë¡œ ì¡°íšŒ
    // - findAll(): ì „ì²´ ì¡°íšŒ
    // - deleteById(id): IDë¡œ ì‚­ì œ
    // - count(): ì „ì²´ ê°œìˆ˜
    
    // ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìë™ ìƒì„± (Query Method)
    Optional<Member> findByEmail(String email);  
    // SELECT * FROM members WHERE email = ? ì¿¼ë¦¬ ìë™ ìƒì„±
    
    List<Member> findByNameContaining(String name);  
    // SELECT * FROM members WHERE name LIKE %?% ì¿¼ë¦¬ ìë™ ìƒì„±
    
    // ì»¤ìŠ¤í…€ JPQL ì¿¼ë¦¬ ì‘ì„±
    @Query("SELECT m FROM Member m WHERE m.createdAt >= :startDate ORDER BY m.createdAt DESC")
    // JPQL: í…Œì´ë¸”ì´ ì•„ë‹Œ ì—”í‹°í‹° í´ë˜ìŠ¤ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´
    List<Member> findRecentMembers(@Param("startDate") LocalDateTime startDate);
}
```

---

## ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜

### ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```mermaid
graph TD
    subgraph "Presentation Layer"
        A[Controller<br/>@Controller]
        A1[REST Controller<br/>@RestController]
    end
    
    subgraph "Business Layer"
        B[Service<br/>@Service]
        B1[Business Logic<br/>íŠ¸ëœì­ì…˜ ê´€ë¦¬]
    end
    
    subgraph "Persistence Layer"
        C[Repository<br/>@Repository]
        C1[JpaRepository<br/>ë°ì´í„° ì ‘ê·¼]
    end
    
    subgraph "Database"
        D[(H2/MySQL<br/>ì‹¤ì œ ë°ì´í„° ì €ì¥)]
    end
    
    A --> B
    A1 --> B
    B --> C
    C --> D
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#fff3e0
```

### Service ê³„ì¸µ ì˜ˆì œ

```java
package com.example.demo.service;

import com.example.demo.entity.Member;
import com.example.demo.repository.MemberRepository;
import lombok.RequiredArgsConstructor;  // final í•„ë“œì— ëŒ€í•œ ìƒì„±ì ìë™ ìƒì„±
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;  // íŠ¸ëœì­ì…˜ ê´€ë¦¬

import java.util.List;
import java.util.Optional;

@Service  // ì´ í´ë˜ìŠ¤ê°€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” ì„œë¹„ìŠ¤ ê³„ì¸µì„ì„ ìŠ¤í”„ë§ì—ê²Œ ì•Œë¦¼
@RequiredArgsConstructor  // final í•„ë“œë“¤ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ëŠ” ìƒì„±ìë¥¼ ìë™ ìƒì„±
@Transactional(readOnly = true)  // ê¸°ë³¸ì ìœ¼ë¡œ ì½ê¸° ì „ìš© íŠ¸ëœì­ì…˜ (ì„±ëŠ¥ ìµœì í™”)
public class MemberService {
    
    private final MemberRepository memberRepository;  
    // finalë¡œ ì„ ì–¸í•˜ì—¬ ë¶ˆë³€ì„± ë³´ì¥, ìƒì„±ì ì£¼ì…ìœ¼ë¡œ ì˜ì¡´ì„± ì£¼ì…ë°›ìŒ
    
    /**
     * ì „ì²´ íšŒì› ëª©ë¡ ì¡°íšŒ
     * @return ëª¨ë“  íšŒì› ë¦¬ìŠ¤íŠ¸
     */
    public List<Member> getAllMembers() {
        return memberRepository.findAll();  // JpaRepositoryì˜ ê¸°ë³¸ ë©”ì„œë“œ í™œìš©
    }
    
    /**
     * ì´ë©”ì¼ë¡œ íšŒì› ì°¾ê¸°
     * @param email ì°¾ì„ íšŒì›ì˜ ì´ë©”ì¼
     * @return í•´ë‹¹ íšŒì› ì •ë³´ (Optionalë¡œ null ì•ˆì „ì„± ë³´ì¥)
     */
    public Optional<Member> findByEmail(String email) {
        return memberRepository.findByEmail(email);  // ì»¤ìŠ¤í…€ ë©”ì„œë“œ í™œìš©
    }
    
    /**
     * íšŒì› ì •ë³´ ì €ì¥ (ìƒì„± ë° ìˆ˜ì •)
     * @param member ì €ì¥í•  íšŒì› ê°ì²´
     * @return ì €ì¥ëœ íšŒì› ê°ì²´
     */
    @Transactional  // ì“°ê¸° ì‘ì—…ì´ë¯€ë¡œ ì½ê¸° ì „ìš©ì´ ì•„ë‹Œ ì¼ë°˜ íŠ¸ëœì­ì…˜
    public Member saveMember(Member member) {
        // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§: ì´ë©”ì¼ ì¤‘ë³µ ì²´í¬
        if (memberRepository.findByEmail(member.getEmail()).isPresent()) {
            throw new IllegalArgumentException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤: " + member.getEmail());
        }
        
        return memberRepository.save(member);  // ì‹¤ì œ ì €ì¥ ìˆ˜í–‰
    }
    
    /**
     * íšŒì› ì‚­ì œ
     * @param id ì‚­ì œí•  íšŒì›ì˜ ID
     */
    @Transactional  // ì“°ê¸° ì‘ì—…ì´ë¯€ë¡œ íŠ¸ëœì­ì…˜ í•„ìš”
    public void deleteMember(Long id) {
        // ì¡´ì¬ ì—¬ë¶€ í™•ì¸ í›„ ì‚­ì œ
        if (!memberRepository.existsById(id)) {
            throw new IllegalArgumentException("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì› ID: " + id);
        }
        
        memberRepository.deleteById(id);
    }
}
```

### Controller ê³„ì¸µ ì˜ˆì œ

```java
package com.example.demo.controller;

import com.example.demo.entity.Member;
import com.example.demo.service.MemberService;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@Controller  // ì›¹ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì„ì„ ì„ ì–¸
@RequestMapping("/members")  // ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ëª¨ë“  ë©”ì„œë“œëŠ” "/members"ë¡œ ì‹œì‘í•˜ëŠ” URL ì²˜ë¦¬
@RequiredArgsConstructor  // final í•„ë“œ ìƒì„±ì ì£¼ì…
public class MemberController {
    
    private final MemberService memberService;  // ì„œë¹„ìŠ¤ ê³„ì¸µ ì˜ì¡´ì„± ì£¼ì…
    
    /**
     * íšŒì› ëª©ë¡ í˜ì´ì§€ í‘œì‹œ
     * GET /members ìš”ì²­ ì²˜ë¦¬
     */
    @GetMapping  // GET /members ìš”ì²­ì„ ì´ ë©”ì„œë“œê°€ ì²˜ë¦¬
    public String listMembers(Model model) {  // Model: ë·°ì— ë°ì´í„° ì „ë‹¬ìš© ê°ì²´
        List<Member> members = memberService.getAllMembers();  // ì„œë¹„ìŠ¤ì—ì„œ íšŒì› ëª©ë¡ ì¡°íšŒ
        model.addAttribute("members", members);  // "members"ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë·°ì— ë°ì´í„° ì „ë‹¬
        return "member/list";  // templates/member/list.html íŒŒì¼ì„ ë Œë”ë§
    }
    
    /**
     * íšŒì› ë“±ë¡ í¼ í˜ì´ì§€ í‘œì‹œ
     * GET /members/new ìš”ì²­ ì²˜ë¦¬
     */
    @GetMapping("/new")
    public String showAddForm(Model model) {
        model.addAttribute("member", new Member());  // ë¹ˆ Member ê°ì²´ë¥¼ í¼ì— ë°”ì¸ë”©
        return "member/addForm";  // templates/member/addForm.html ë Œë”ë§
    }
    
    /**
     * íšŒì› ë“±ë¡ ì²˜ë¦¬
     * POST /members ìš”ì²­ ì²˜ë¦¬
     */
    @PostMapping  // POST /members ìš”ì²­ì„ ì´ ë©”ì„œë“œê°€ ì²˜ë¦¬
    public String addMember(@ModelAttribute Member member) {  
        // @ModelAttribute: HTML í¼ ë°ì´í„°ë¥¼ Member ê°ì²´ë¡œ ìë™ ë°”ì¸ë”©
        try {
            memberService.saveMember(member);  // ì„œë¹„ìŠ¤ ê³„ì¸µì— ì €ì¥ ë¡œì§ ìœ„ì„
            return "redirect:/members";  // ì„±ê³µì‹œ íšŒì› ëª©ë¡ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        } catch (IllegalArgumentException e) {
            // ì—ëŸ¬ ë°œìƒì‹œ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ (ì‹¤ì œë¡œëŠ” ì—ëŸ¬ ë©”ì‹œì§€ë„ í•¨ê»˜ ì „ë‹¬í•´ì•¼ í•¨)
            return "member/addForm";
        }
    }
    
    /**
     * íšŒì› ì‚­ì œ ì²˜ë¦¬
     * DELETE /members/{id} ìš”ì²­ ì²˜ë¦¬
     */
    @DeleteMapping("/{id}")
    public String deleteMember(@PathVariable Long id) {  
        // @PathVariable: URL ê²½ë¡œì˜ {id} ë¶€ë¶„ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ìŒ
        memberService.deleteMember(id);
        return "redirect:/members";  // ì‚­ì œ í›„ ëª©ë¡ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    }
}
```

---

## JPAì™€ Spring Data JPA

### í•µì‹¬ ê°œë…

```mermaid
flowchart TD
    A[JPA<br/>Java Persistence API] --> B[ORM í‘œì¤€ ëª…ì„¸]
    B --> C[ê°ì²´ â†” ê´€ê³„í˜• DB ë§¤í•‘]
    
    D[Hibernate] --> E[JPA êµ¬í˜„ì²´]
    E --> F[ì‹¤ì œ DB ì‘ì—… ìˆ˜í–‰]
    
    G[Spring Data JPA] --> H[í¸ì˜ ê¸°ëŠ¥ ì œê³µ]
    H --> I[JpaRepository ì¸í„°í˜ì´ìŠ¤]
    I --> J[ê¸°ë³¸ CRUD ìë™ êµ¬í˜„]
    
    A --> D
    D --> G
```

### ì‹¤ë¬´ì—ì„œ ìì£¼ ì“°ëŠ” Repository íŒ¨í„´

```java
package com.example.demo.repository;

import com.example.demo.entity.Post;
import org.springframework.data.domain.Page;      // í˜ì´ì§• ì²˜ë¦¬ìš©
import org.springframework.data.domain.Pageable;  // í˜ì´ì§• ì¡°ê±´ìš©
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;

import java.time.LocalDateTime;
import java.util.List;
import java.util.UUID;

public interface PostRepository extends JpaRepository<Post, UUID> {
    
    // 1. Query Method: ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìë™ ìƒì„±
    List<Post> findByTitleContaining(String keyword);  
    // ì œëª©ì— íŠ¹ì • í‚¤ì›Œë“œê°€ í¬í•¨ëœ ê²Œì‹œê¸€ ì°¾ê¸°
    
    Page<Post> findByAuthorOrderByCreatedAtDesc(String author, Pageable pageable);  
    // íŠ¹ì • ì‘ì„±ìì˜ ê²Œì‹œê¸€ì„ ìµœì‹ ìˆœìœ¼ë¡œ í˜ì´ì§•í•´ì„œ ê°€ì ¸ì˜¤ê¸°
    
    long countByStatus(String status);  
    // íŠ¹ì • ìƒíƒœì˜ ê²Œì‹œê¸€ ê°œìˆ˜ ì„¸ê¸°
    
    // 2. JPQL: ê°ì²´ ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´
    @Query("SELECT p FROM Post p WHERE p.createdAt >= :startDate ORDER BY p.createdAt DESC")
    List<Post> findRecentPosts(@Param("startDate") LocalDateTime startDate);
    // íŠ¹ì • ë‚ ì§œ ì´í›„ì— ì‘ì„±ëœ ê²Œì‹œê¸€ì„ ìµœì‹ ìˆœìœ¼ë¡œ ì¡°íšŒ
    
    // 3. Native Query: ì§ì ‘ SQL ì‘ì„± (ë³µì¡í•œ ì¿¼ë¦¬ì— ì‚¬ìš©)
    @Query(value = "SELECT * FROM posts WHERE MATCH(title, content) AGAINST(?1)", 
           nativeQuery = true)
    List<Post> searchByFullText(String searchTerm);
    // MySQLì˜ ì „ë¬¸ ê²€ìƒ‰ ê¸°ëŠ¥ í™œìš©
}
```

---

## ì˜ì¡´ì„± ì£¼ì… (DI)

### DIê°€ í•„ìš”í•œ ì´ìœ 

```java
// âŒ ë‚˜ìœ ì˜ˆ: ì§ì ‘ ì˜ì¡´ì„± ìƒì„±
public class MemberController {
    private MemberService memberService = new MemberService();  // ê°•í•œ ê²°í•©
    // ë¬¸ì œì : í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€, ì„¤ì • ë³€ê²½ ì–´ë ¤ì›€, ì¬ì‚¬ìš©ì„± ë–¨ì–´ì§
}

// âœ… ì¢‹ì€ ì˜ˆ: ìŠ¤í”„ë§ì´ ì˜ì¡´ì„± ì£¼ì…
@Controller
@RequiredArgsConstructor  // ìƒì„±ì ì£¼ì… ìë™ ìƒì„±
public class MemberController {
    private final MemberService memberService;  // finalë¡œ ë¶ˆë³€ì„± ë³´ì¥
    
    // @RequiredArgsConstructorê°€ ì•„ë˜ ìƒì„±ìë¥¼ ìë™ ìƒì„±í•´ì¤Œ
    // public MemberController(MemberService memberService) {
    //     this.memberService = memberService;
    // }
}
```

### ì£¼ì… ë°©ì‹ ë¹„êµ

```java
@Service
public class MemberService {
    
    // 1. í•„ë“œ ì£¼ì… (âŒ ê¶Œì¥í•˜ì§€ ì•ŠìŒ)
    @Autowired
    private MemberRepository memberRepository;
    // ë¬¸ì œì : í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€, ìˆœí™˜ì°¸ì¡° ëŸ°íƒ€ì„ì— ë°œê²¬, ë¶ˆë³€ì„± ë³´ì¥ ì•ˆë¨
    
    // 2. Setter ì£¼ì… (â–³ ì„ íƒì  ì˜ì¡´ì„±ì—ë§Œ ì‚¬ìš©)
    private MemberRepository memberRepository;
    
    @Autowired
    public void setMemberRepository(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
    
    // 3. ìƒì„±ì ì£¼ì… (âœ… ê°€ì¥ ê¶Œì¥)
    private final MemberRepository memberRepository;  // finalë¡œ ë¶ˆë³€ì„± ë³´ì¥
    
    // Spring Boot 2.6+ ì—ì„œëŠ” ìƒì„±ìê°€ í•˜ë‚˜ë©´ @Autowired ìƒëµ ê°€ëŠ¥
    public MemberService(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
}
```

---

## Lombok í™œìš©

### ì£¼ìš” ì–´ë…¸í…Œì´ì…˜ ì •ë¦¬

```java
// 1. @Data: ì¢…í•© íŒ¨í‚¤ì§€ (DTOì— ì£¼ë¡œ ì‚¬ìš©)
@Data
public class MemberDto {
    private String name;
    private String email;
    // ìë™ ìƒì„±: getter, setter, toString, equals, hashCode, RequiredArgsConstructor
}

// 2. Entityì—ì„œëŠ” ì„ íƒì  ì‚¬ìš© (ì•ˆì „ì„± ê³ ë ¤)
@Entity
@Getter  // getterë§Œ ìƒì„±
@Setter  // setterë§Œ ìƒì„± (í•„ìš”í•œ ê²½ìš°ì—ë§Œ)
@ToString(exclude = {"password"})  // toStringì—ì„œ password í•„ë“œ ì œì™¸
@EqualsAndHashCode(onlyExplicitlyIncluded = true)  // ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•œ í•„ë“œë§Œ í¬í•¨
@NoArgsConstructor  // ê¸°ë³¸ ìƒì„±ì (JPA í•„ìˆ˜)
@AllArgsConstructor  // ëª¨ë“  í•„ë“œ ìƒì„±ì
public class Member {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @EqualsAndHashCode.Include  // equals/hashCodeì— idë§Œ í¬í•¨
    private Long id;
    
    private String name;
    private String email;
    private String password;
}

// 3. Builder íŒ¨í„´ í™œìš©
@Builder
@NoArgsConstructor
@AllArgsConstructor
@Getter
public class CreateMemberRequest {
    private String name;
    private String email;
    private String password;
}

// ì‚¬ìš© ì˜ˆì‹œ
CreateMemberRequest request = CreateMemberRequest.builder()
    .name("í™ê¸¸ë™")             // ê°€ë…ì„±ì´ ì¢‹ê³ 
    .email("hong@example.com")  // ìˆœì„œë¥¼ ë°”ê¿”ë„ ë˜ë©°
    .password("password123")    // í•„ìš”í•œ í•„ë“œë§Œ ì„¤ì • ê°€ëŠ¥
    .build();
```

---

## ì‹¤ìŠµ ì˜ˆì œ

### ì™„ì „í•œ íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ

```java
// 1. Entity ì •ì˜
@Entity
@Table(name = "members")
@Getter @Setter
@NoArgsConstructor
@AllArgsConstructor
public class Member {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(nullable = false, length = 50)
    private String name;
    
    @Column(unique = true, nullable = false)
    private String email;
    
    @Column(name = "created_at")
    private LocalDateTime createdAt;
    
    @PrePersist
    protected void onCreate() {
        createdAt = LocalDateTime.now();
    }
}

// 2. Repository ì¸í„°í˜ì´ìŠ¤
@Repository
public interface MemberRepository extends JpaRepository<Member, Long> {
    Optional<Member> findByEmail(String email);
    
    @Query("SELECT m FROM Member m ORDER BY m.createdAt DESC")
    List<Member> findAllByCreatedAtDesc();
}

// 3. Service ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class MemberService {
    
    private final MemberRepository memberRepository;
    
    public List<Member> getAllMembers() {
        return memberRepository.findAllByCreatedAtDesc();  // ìµœì‹  ê°€ì…ìˆœìœ¼ë¡œ
    }
    
    @Transactional  // ì“°ê¸° ì‘ì—…
    public Member saveMember(Member member) {
        // ì¤‘ë³µ ì´ë©”ì¼ ì²´í¬
        if (memberRepository.findByEmail(member.getEmail()).isPresent()) {
            throw new IllegalArgumentException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤.");
        }
        return memberRepository.save(member);
    }
    
    public Optional<Member> findById(Long id) {
        return memberRepository.findById(id);
    }
    
    @Transactional
    public void deleteMember(Long id) {
        memberRepository.deleteById(id);
    }
}

// 4. Controller ì›¹ ìš”ì²­ ì²˜ë¦¬
@Controller
@RequestMapping("/members")
@RequiredArgsConstructor
public class MemberController {
    
    private final MemberService memberService;
    
    // íšŒì› ëª©ë¡ í˜ì´ì§€
    @GetMapping
    public String listMembers(Model model) {
        model.addAttribute("members", memberService.getAllMembers());
        return "member/list";  // templates/member/list.html
    }
    
    // íšŒì› ë“±ë¡ í¼
    @GetMapping("/new")
    public String showAddForm(Model model) {
        model.addAttribute("member", new Member());
        return "member/addForm";  // templates/member/addForm.html
    }
    
    // íšŒì› ë“±ë¡ ì²˜ë¦¬
    @PostMapping
    public String addMember(@ModelAttribute Member member, Model model) {
        try {
            memberService.saveMember(member);
            return "redirect:/members";  // ì„±ê³µì‹œ ëª©ë¡ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        } catch (IllegalArgumentException e) {
            model.addAttribute("errorMessage", e.getMessage());
            model.addAttribute("member", member);
            return "member/addForm";  // ì‹¤íŒ¨ì‹œ ë‹¤ì‹œ í¼ìœ¼ë¡œ
        }
    }
    
    // íšŒì› ì‚­ì œ
    @PostMapping("/{id}/delete")
    public String deleteMember(@PathVariable Long id) {
        memberService.deleteMember(id);
        return "redirect:/members";
    }
}
```

### Thymeleaf í…œí”Œë¦¿ ì˜ˆì œ

```html
<!-- templates/member/list.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!-- Thymeleaf ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì„ ì–¸: th: ì†ì„±ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë¨ -->
<head>
    <meta charset="UTF-8">
    <title>íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <!-- Bootstrap CSSë¡œ ê¹”ë”í•œ UI -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
          rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>íšŒì› ëª©ë¡</h1>
        
        <!-- íšŒì› ë“±ë¡ ë²„íŠ¼ -->
        <div class="mb-3">
            <a th:href="@{/members/new}" class="btn btn-primary">ìƒˆ íšŒì› ë“±ë¡</a>
            <!-- th:href="@{/members/new}": Thymeleaf URL í‘œí˜„ì‹, /members/newë¡œ ë§í¬ ìƒì„± -->
        </div>
        
        <!-- íšŒì› ëª©ë¡ í…Œì´ë¸” -->
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>ì´ë¦„</th>
                    <th>ì´ë©”ì¼</th>
                    <th>ê°€ì…ì¼</th>
                    <th>ì‘ì—…</th>
                </tr>
            </thead>
            <tbody>
                <!-- th:each: ë¦¬ìŠ¤íŠ¸ ë°˜ë³µë¬¸, members ì»¬ë ‰ì…˜ì˜ ê° í•­ëª©ì„ member ë³€ìˆ˜ë¡œ ë°˜ë³µ -->
                <tr th:each="member : ${members}">
                    <!-- ${member.id}: ê° íšŒì› ê°ì²´ì˜ id í•„ë“œ ì¶œë ¥ -->
                    <td th:text="${member.id}"></td>
                    <!-- th:text: íƒœê·¸ ì•ˆì˜ í…ìŠ¤íŠ¸ë¥¼ ë™ì ìœ¼ë¡œ ì„¤ì • -->
                    <td th:text="${member.name}"></td>
                    <td th:text="${member.email}"></td>
                    <!-- #temporals.format: Thymeleafì˜ ë‚ ì§œ í¬ë§·íŒ… ìœ í‹¸ë¦¬í‹° -->
                    <td th:text="${#temporals.format(member.createdAt, 'yyyy-MM-dd HH:mm')}"></td>
                    <td>
                        <!-- ì‚­ì œ í¼ (POST ë°©ì‹ìœ¼ë¡œ DELETE í‰ë‚´) -->
                        <form th:action="@{/members/{id}/delete(id=${member.id})}" 
                              method="post" style="display: inline;">
                            <!-- th:actionì—ì„œ {id} ê²½ë¡œ ë³€ìˆ˜ì— ì‹¤ì œ member.id ê°’ ë°”ì¸ë”© -->
                            <button type="submit" class="btn btn-sm btn-danger"
                                    onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</button>
                        </form>
                    </td>
                </tr>
                
                <!-- íšŒì›ì´ ì—†ì„ ë•Œ í‘œì‹œí•  ë©”ì‹œì§€ -->
                <tr th:if="${#lists.isEmpty(members)}">
                    <!-- #lists.isEmpty(): Thymeleafì˜ ë¦¬ìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°, ë¹„ì–´ìˆëŠ”ì§€ ì²´í¬ -->
                    <td colspan="5" class="text-center">ë“±ë¡ëœ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>
```

```html
<!-- templates/member/addForm.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>íšŒì› ë“±ë¡</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
          rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>ìƒˆ íšŒì› ë“±ë¡</h1>
        
        <!-- ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ -->
        <div th:if="${errorMessage}" class="alert alert-danger">
            <!-- th:if: ì¡°ê±´ì´ trueì¼ ë•Œë§Œ í•´ë‹¹ ìš”ì†Œ ë Œë”ë§ -->
            <span th:text="${errorMessage}"></span>
        </div>
        
        <!-- íšŒì› ë“±ë¡ í¼ -->
        <form th:action="@{/members}" th:object="${member}" method="post">
            <!-- th:object: í¼ê³¼ ê°ì²´ ë°”ì¸ë”©, í•˜ìœ„ í•„ë“œë“¤ì´ member ê°ì²´ì˜ ì†ì„±ê³¼ ì—°ê²°ë¨ -->
            
            <div class="mb-3">
                <label for="name" class="form-label">ì´ë¦„</label>
                <!-- th:field: ì–‘ë°©í–¥ ë°”ì¸ë”©, member.nameê³¼ input í•„ë“œ ì—°ê²° -->
                <input type="text" class="form-control" th:field="*{name}" required>
                <!-- *{name}: th:objectë¡œ ì§€ì •ëœ ê°ì²´ì˜ name ì†ì„± ì°¸ì¡° -->
            </div>
            
            <div class="mb-3">
                <label for="email" class="form-label">ì´ë©”ì¼</label>
                <input type="email" class="form-control" th:field="*{email}" required>
                <!-- type="email": HTML5 ì´ë©”ì¼ ê²€ì¦ -->
            </div>
            
            <div class="mb-3">
                <button type="submit" class="btn btn-primary">ë“±ë¡</button>
                <a th:href="@{/members}" class="btn btn-secondary">ì·¨ì†Œ</a>
            </div>
        </form>
    </div>
</body>
</html>
```

---

## í˜„ì—… ì ìš© ê°€ì´ë“œ

### ğŸ¢ í˜„ì—…ì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ  ìŠ¤íƒ

```mermaid
graph TB
    subgraph "Frontend (í´ë¼ì´ì–¸íŠ¸)"
        A1[React/Vue.js<br/>ìµœì‹  íŠ¸ë Œë“œ]
        A2[Thymeleaf<br/>ì „í†µì  ë°©ì‹]
        A3[JSP<br/>ë ˆê±°ì‹œ ì‹œìŠ¤í…œ]
    end
    
    subgraph "Backend (ì„œë²„)"
        B1[Spring Boot<br/>ê°€ì¥ ë§ì´ ì‚¬ìš©]
        B2[Spring MVC<br/>ì „í†µì  Spring]
    end
    
    subgraph "Data Access"
        C1[Spring Data JPA<br/>90% ì‚¬ìš©]
        C2[MyBatis<br/>ë³µì¡í•œ ì¿¼ë¦¬]
        C3[QueryDSL<br/>íƒ€ì… ì•ˆì „ ì¿¼ë¦¬]
    end
    
    subgraph "Database"
        D1[MySQL/PostgreSQL<br/>ìš´ì˜ DB]
        D2[H2<br/>ê°œë°œ/í…ŒìŠ¤íŠ¸ìš©]
        D3[Redis<br/>ìºì‹œ/ì„¸ì…˜]
    end
    
    A1 --> B1
    A2 --> B1
    A3 --> B2
    B1 --> C1
    C1 --> D1
    C2 --> D1
    C3 --> D1
```

### ì‹¤ë¬´ ìš°ì„ ìˆœìœ„

| ê¸°ìˆ  | í˜„ì—… ì‚¬ìš©ë„ | í•™ìŠµ ìš°ì„ ìˆœìœ„ | ë¹„ê³  |
|------|------------|---------------|------|
| **Spring Boot** | â­â­â­â­â­ | 1ìˆœìœ„ | í•„ìˆ˜, ëª¨ë“  íšŒì‚¬ì—ì„œ ì‚¬ìš© |
| **Spring Data JPA** | â­â­â­â­â­ | 1ìˆœìœ„ | CRUD ì‘ì—…ì˜ 90% |
| **Thymeleaf** | â­â­â­â­ | 2ìˆœìœ„ | ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ |
| **React/Vue** | â­â­â­â­â­ | 1ìˆœìœ„ | í”„ë¡ íŠ¸ì—”ë“œ ë¶„ë¦¬ íŠ¸ë Œë“œ |
| **JSP** | â­â­ | 3ìˆœìœ„ | ë ˆê±°ì‹œ ìœ ì§€ë³´ìˆ˜ìš© |
| **MyBatis** | â­â­â­ | 2ìˆœìœ„ | ë³µì¡í•œ ì¿¼ë¦¬, ê¸ˆìœµê¶Œ ì„ í˜¸ |
| **QueryDSL** | â­â­â­â­ | 2ìˆœìœ„ | íƒ€ì… ì•ˆì „í•œ ë™ì  ì¿¼ë¦¬ |

### ğŸ’¼ í˜„ì—… ê°œë°œ íŒ

```java
// 1. ì˜ˆì™¸ ì²˜ë¦¬ ì „ëµ
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class MemberService {
    
    private final MemberRepository memberRepository;
    
    @Transactional
    public Member createMember(CreateMemberRequest request) {
        // 1. ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ê²€ì¦
        validateMemberRequest(request);
        
        // 2. ì¤‘ë³µ ì²´í¬
        if (memberRepository.findByEmail(request.getEmail()).isPresent()) {
            throw new DuplicateEmailException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤: " + request.getEmail());
            // ì»¤ìŠ¤í…€ ì˜ˆì™¸ë¡œ ëª…í™•í•œ ì—ëŸ¬ ì˜ë¯¸ ì „ë‹¬
        }
        
        // 3. Entity ë³€í™˜ ë° ì €ì¥
        Member member = convertToEntity(request);
        return memberRepository.save(member);
    }
    
    private void validateMemberRequest(CreateMemberRequest request) {
        if (request.getName() == null || request.getName().trim().isEmpty()) {
            throw new InvalidInputException("ì´ë¦„ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.");
        }
        if (request.getEmail() == null || !isValidEmail(request.getEmail())) {
            throw new InvalidInputException("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.");
        }
    }
    
    private boolean isValidEmail(String email) {
        // ê°„ë‹¨í•œ ì´ë©”ì¼ ê²€ì¦ ë¡œì§ (ì‹¤ë¬´ì—ì„œëŠ” ì •ê·œí‘œí˜„ì‹ ë˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©)
        return email.contains("@") && email.contains(".");
    }
}

// 2. ê¸€ë¡œë²Œ ì˜ˆì™¸ ì²˜ë¦¬
@ControllerAdvice  // ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ í•œ ê³³ì—ì„œ ì²˜ë¦¬
public class GlobalExceptionHandler {
    
    @ExceptionHandler(DuplicateEmailException.class)
    public String handleDuplicateEmail(DuplicateEmailException e, Model model) {
        model.addAttribute("errorMessage", e.getMessage());
        model.addAttribute("member", new Member());
        return "member/addForm";  // ì—ëŸ¬ì™€ í•¨ê»˜ ë‹¤ì‹œ í¼ìœ¼ë¡œ
    }
    
    @ExceptionHandler(Exception.class)  // ì˜ˆìƒì¹˜ ëª»í•œ ëª¨ë“  ì˜ˆì™¸ ì²˜ë¦¬
    public String handleGeneral(Exception e, Model model) {
        model.addAttribute("errorMessage", "ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        return "error/500";  // ì—ëŸ¬ í˜ì´ì§€ë¡œ
    }
}
```

### ğŸ“Š ì„±ëŠ¥ ìµœì í™” íŒ

```java
// 1. í˜ì´ì§• ì²˜ë¦¬ (ëŒ€ëŸ‰ ë°ì´í„° ëŒ€ì‘)
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class MemberService {
    
    public Page<Member> getMembers(int page, int size) {
        Pageable pageable = PageRequest.of(page, size, Sort.by("createdAt").descending());
        // page: 0ë¶€í„° ì‹œì‘, size: í•œ í˜ì´ì§€ë‹¹ ê°œìˆ˜, Sort: ì •ë ¬ ì¡°ê±´
        return memberRepository.findAll(pageable);
    }
}

// 2. N+1 ì¿¼ë¦¬ ë¬¸ì œ í•´ê²°
@Entity
public class Post {
    @Id @GeneratedValue
    private Long id;
    
    private String title;
    
    @ManyToOne(fetch = FetchType.LAZY)  // ì§€ì—° ë¡œë”©ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”
    @JoinColumn(name = "author_id")
    private Member author;  // ì‘ì„±ì ì •ë³´
}

@Repository
public interface PostRepository extends JpaRepository<Post, Long> {
    
    // Fetch Joinìœ¼ë¡œ N+1 ë¬¸ì œ í•´ê²°
    @Query("SELECT p FROM Post p JOIN FETCH p.author ORDER BY p.createdAt DESC")
    List<Post> findAllWithAuthor();
    // í•œ ë²ˆì˜ ì¿¼ë¦¬ë¡œ Postì™€ Author ì •ë³´ë¥¼ í•¨ê»˜ ì¡°íšŒ
}

// 3. ìºì‹± ì ìš©
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class MemberService {
    
    @Cacheable(value = "members", key = "#id")  // ê²°ê³¼ë¥¼ ìºì‹œì— ì €ì¥
    public Member findById(Long id) {
        return memberRepository.findById(id)
            .orElseThrow(() -> new MemberNotFoundException("íšŒì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
    }
    
    @CacheEvict(value = "members", key = "#member.id")  // ìºì‹œì—ì„œ ì œê±°
    @Transactional
    public Member updateMember(Member member) {
        return memberRepository.save(member);
    }
}
```

---

## ë°°í¬ ì„¤ì •

### application.yml í”„ë¡œí•„ ê´€ë¦¬

```yaml
# src/main/resources/application.yml (ê¸°ë³¸ ì„¤ì •)
spring:
  profiles:
    active: dev  # ê¸°ë³¸ì ìœ¼ë¡œ ê°œë°œ í™˜ê²½ í™œì„±í™”
    
  # ëª¨ë“  í”„ë¡œí•„ì— ê³µí†µ ì ìš©ë˜ëŠ” JPA ì„¤ì •
  jpa:
    show-sql: true        # ì‹¤í–‰ë˜ëŠ” SQL ì¿¼ë¦¬ë¥¼ ì½˜ì†”ì— ì¶œë ¥
    properties:
      hibernate:
        format_sql: true  # SQLì„ ë³´ê¸° ì¢‹ê²Œ í¬ë§·íŒ…
        use_sql_comments: true  # JPQLì´ ì–´ë–¤ SQLë¡œ ë³€í™˜ë˜ëŠ”ì§€ ì£¼ì„ìœ¼ë¡œ í‘œì‹œ
    
  # Thymeleaf ì„¤ì •
  thymeleaf:
    cache: false  # ê°œë°œ ì¤‘ì—ëŠ” ìºì‹œ ë¹„í™œì„±í™” (ìˆ˜ì •ì‚¬í•­ ì¦‰ì‹œ ë°˜ì˜)
```

```yaml
# src/main/resources/application-dev.yml (ê°œë°œ í™˜ê²½)
# ì´ íŒŒì¼ì€ .gitignoreì— ì¶”ê°€í•´ì„œ Gitì— ì˜¬ë¦¬ì§€ ì•ŠìŒ
spring:
  datasource:
    url: jdbc:h2:mem:testdb        # ë©”ëª¨ë¦¬ ê¸°ë°˜ H2 ë°ì´í„°ë² ì´ìŠ¤
    driver-class-name: org.h2.Driver
    username: sa                   # H2 ê¸°ë³¸ ì‚¬ìš©ìëª…
    password:                      # H2ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¹„ë°€ë²ˆí˜¸ ì—†ìŒ
    
  h2:
    console:
      enabled: true                # H2 ì›¹ ì½˜ì†” í™œì„±í™”
      path: /h2-console           # ë¸Œë¼ìš°ì €ì—ì„œ /h2-consoleë¡œ DB ì ‘ì† ê°€ëŠ¥
      
  jpa:
    hibernate:
      ddl-auto: create-drop       # ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ì‹œ í…Œì´ë¸” ìƒì„±, ì¢…ë£Œì‹œ ì‚­ì œ
    defer-datasource-initialization: true  # ë°ì´í„° ì´ˆê¸°í™” ì§€ì—°
    
logging:
  level:
    org.hibernate.SQL: DEBUG      # SQL ì¿¼ë¦¬ ë¡œê·¸ ìƒì„¸íˆ ì¶œë ¥
    org.hibernate.type: TRACE     # ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ê°’ê¹Œì§€ ì¶œë ¥
```

```yaml
# src/main/resources/application-prod.yml (ìš´ì˜ í™˜ê²½)
spring:
  datasource:
    url: ${DB_URL:jdbc:mysql://localhost:3306/myapp}  
    # í™˜ê²½ë³€ìˆ˜ DB_URLì´ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver
    
    # ì»¤ë„¥ì…˜ í’€ ì„¤ì • (ì„±ëŠ¥ ìµœì í™”)
    hikari:
      maximum-pool-size: 20       # ìµœëŒ€ ì—°ê²° ê°œìˆ˜
      minimum-idle: 5             # ìµœì†Œ ìœ ì§€ ì—°ê²° ê°œìˆ˜
      connection-timeout: 30000   # ì—°ê²° ëŒ€ê¸° ì‹œê°„ (30ì´ˆ)
      
  jpa:
    hibernate:
      ddl-auto: validate          # ìš´ì˜ì—ì„œëŠ” ìŠ¤í‚¤ë§ˆ ë³€ê²½ ê¸ˆì§€, ê²€ì¦ë§Œ
    show-sql: false              # ìš´ì˜ì—ì„œëŠ” SQL ë¡œê·¸ ë¹„í™œì„±í™”
    
logging:
  level:
    com.example.demo: INFO        # ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ ë ˆë²¨
    org.hibernate: WARN           # Hibernate ë¡œê·¸ëŠ” ê²½ê³  ì´ìƒë§Œ
  file:
    name: logs/application.log    # ë¡œê·¸ íŒŒì¼ ê²½ë¡œ
```

### build.gradle ì˜ì¡´ì„± ì„¤ì •

```gradle
// build.gradle
plugins {
    id 'org.springframework.boot' version '2.7.0'  // Spring Boot í”ŒëŸ¬ê·¸ì¸
    id 'io.spring.dependency-management' version '1.0.11.RELEASE'  // ì˜ì¡´ì„± ê´€ë¦¬
    id 'java'  // Java í”„ë¡œì íŠ¸ì„ì„ ì„ ì–¸
}

group = 'com.example'     // í”„ë¡œì íŠ¸ ê·¸ë£¹ ID
version = '0.0.1-SNAPSHOT'  // í”„ë¡œì íŠ¸ ë²„ì „
sourceCompatibility = '11'  // Java 11 ì‚¬ìš©

// Lombok ì„¤ì •
configurations {
    compileOnly {
        extendsFrom annotationProcessor  // Lombokì´ ì»´íŒŒì¼ ì‹œì ì— ì½”ë“œ ìƒì„±í•  ìˆ˜ ìˆë„ë¡
    }
}

repositories {
    mavenCentral()  // Maven ì¤‘ì•™ ì €ì¥ì†Œì—ì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‹¤ìš´ë¡œë“œ
}

dependencies {
    // Spring Boot ê¸°ë³¸ ìŠ¤íƒ€í„°ë“¤
    implementation 'org.springframework.boot:spring-boot-starter-web'
    // ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì— í•„ìš”í•œ ëª¨ë“  ê²ƒ (Tomcat, Spring MVC, Jackson ë“±)
    
    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'
    // Thymeleaf í…œí”Œë¦¿ ì—”ì§„ê³¼ Spring í†µí•©
    
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    // JPA, Hibernate, Spring Data JPA í¬í•¨
    
    implementation 'org.springframework.boot:spring-boot-starter-validation'
    // Bean Validation (ì…ë ¥ê°’ ê²€ì¦)
    
    // ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„ë“¤
    runtimeOnly 'com.h2database:h2'           // ê°œë°œìš© ì¸ë©”ëª¨ë¦¬ DB
    runtimeOnly 'com.mysql:mysql-connector-j' // ìš´ì˜ìš© MySQL
    
    // Lombok (ì½”ë“œ ìƒì„±)
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'
    
    // í…ŒìŠ¤íŠ¸ìš©
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    // JUnit 5, Mockito, AssertJ ë“± í…ŒìŠ¤íŠ¸ ë„êµ¬ë“¤ í¬í•¨
}

tasks.named('test') {
    useJUnitPlatform()  // JUnit 5 ì‚¬ìš© ì„¤ì •
}
```

### ğŸš€ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì œ

```bash
#!/bin/bash
# deploy.sh - ê°„ë‹¨í•œ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸

echo "ğŸš€ ë°°í¬ ì‹œì‘..."

# 1. Gitì—ì„œ ìµœì‹  ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
git pull origin main

# 2. í”„ë¡œì íŠ¸ ë¹Œë“œ (ìš´ì˜ í”„ë¡œí•„ë¡œ)
./gradlew clean build -Pspring.profiles.active=prod

# 3. ê¸°ì¡´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¤‘ì§€
echo "ê¸°ì¡´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¤‘ì§€ ì¤‘..."
pkill -f "java -jar.*myapp"  # myappì´ë¼ëŠ” ì´ë¦„ì´ í¬í•¨ëœ Java í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ

# 4. ìƒˆ ë²„ì „ ì‹¤í–‰
echo "ìƒˆ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì¤‘..."
nohup java -jar -Dspring.profiles.active=prod \
  -DDB_URL=${DATABASE_URL} \
  -DDB_USERNAME=${DATABASE_USERNAME} \
  -DDB_PASSWORD=${DATABASE_PASSWORD} \
  build/libs/myapp-0.0.1-SNAPSHOT.jar > app.log 2>&1 &
# nohup: í„°ë¯¸ë„ ì¢…ë£Œë˜ì–´ë„ ê³„ì† ì‹¤í–‰
# &: ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
# > app.log 2>&1: ëª¨ë“  ì¶œë ¥ì„ app.log íŒŒì¼ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜

echo "âœ… ë°°í¬ ì™„ë£Œ!"
echo "ğŸ“‹ ë¡œê·¸ í™•ì¸: tail -f app.log"
```

---

## ê³ ê¸‰ ì£¼ì œì™€ ì‹¤ë¬´ ê°€ì´ë“œ

### ğŸ” ë³´ì•ˆ ì„¤ì • (Spring Security)

```java
// ì‹¤ë¬´ì—ì„œ í•„ìˆ˜ì¸ Spring Security ì„¤ì •
@Configuration
@EnableWebSecurity  // Spring Security í™œì„±í™”
public class SecurityConfig {
    
    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();  // ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
    }
    
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/", "/login", "/register").permitAll()  // ì¸ì¦ ë¶ˆí•„ìš”
                .requestMatchers("/admin/**").hasRole("ADMIN")            // ê´€ë¦¬ìë§Œ
                .anyRequest().authenticated()                             // ë‚˜ë¨¸ì§€ëŠ” ì¸ì¦ í•„ìš”
            )
            .formLogin(form -> form
                .loginPage("/login")           // ì»¤ìŠ¤í…€ ë¡œê·¸ì¸ í˜ì´ì§€
                .defaultSuccessUrl("/members") // ë¡œê·¸ì¸ ì„±ê³µ í›„ ì´ë™ í˜ì´ì§€
                .permitAll()
            )
            .logout(logout -> logout
                .logoutSuccessUrl("/")         // ë¡œê·¸ì•„ì›ƒ í›„ ì´ë™ í˜ì´ì§€
                .permitAll()
            );
        
        return http.build();
    }
}
```

### ğŸ“Š í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

```java
// í†µí•© í…ŒìŠ¤íŠ¸ ì˜ˆì œ
@SpringBootTest  // ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ ë¡œë“œí•´ì„œ í…ŒìŠ¤íŠ¸
@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)
// ì‹¤ì œ DB ëŒ€ì‹  í…ŒìŠ¤íŠ¸ìš© DB ì‚¬ìš©
class MemberServiceTest {
    
    @Autowired
    private MemberService memberService;  // ì‹¤ì œ ë¹ˆ ì£¼ì…ë°›ì•„ì„œ í…ŒìŠ¤íŠ¸
    
    @Autowired
    private TestEntityManager testEntityManager;  // í…ŒìŠ¤íŠ¸ìš© EntityManager
    
    @Test
    @Transactional  // í…ŒìŠ¤íŠ¸ í›„ ë¡¤ë°±ë˜ì–´ DB ìƒíƒœ ì›ë³µ
    @DisplayName("ì¤‘ë³µ ì´ë©”ì¼ë¡œ íšŒì› ê°€ì…ì‹œ ì˜ˆì™¸ ë°œìƒ")  // í…ŒìŠ¤íŠ¸ ì„¤ëª…
    void duplicateEmailThrowsException() {
        // Given (ì¤€ë¹„)
        Member existingMember = new Member();
        existingMember.setName("ê¸°ì¡´íšŒì›");
        existingMember.setEmail("test@example.com");
        testEntityManager.persistAndFlush(existingMember);  // DBì— ì €ì¥
        
        CreateMemberRequest newRequest = CreateMemberRequest.builder()
            .name("ìƒˆíšŒì›")
            .email("test@example.com")  // ê°™ì€ ì´ë©”ì¼
            .build();
        
        // When & Then (ì‹¤í–‰ ë° ê²€ì¦)
        assertThrows(DuplicateEmailException.class, () -> {
            memberService.createMember(newRequest);  // ì˜ˆì™¸ê°€ ë°œìƒí•´ì•¼ í•¨
        });
    }
}

// ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì˜ˆì œ (Mock ì‚¬ìš©)
@ExtendWith(MockitoExtension.class)  // Mockito í™•ì¥ í™œì„±í™”
class MemberServiceUnitTest {
    
    @Mock
    private MemberRepository memberRepository;  // ê°€ì§œ Repository ê°ì²´ ìƒì„±
    
    @InjectMocks
    private MemberService memberService;  // Mock ê°ì²´ë“¤ì´ ì£¼ì…ëœ ì‹¤ì œ Service ê°ì²´
    
    @Test
    @DisplayName("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì´ë©”ì¼ë¡œ íšŒì› ì¡°íšŒì‹œ ë¹ˆ ê²°ê³¼ ë°˜í™˜")
    void findByNonExistentEmail() {
        // Given
        String email = "nonexistent@example.com";
        when(memberRepository.findByEmail(email)).thenReturn(Optional.empty());
        // Mock ê°ì²´ì˜ ë™ì‘ ì •ì˜: íŠ¹ì • ì´ë©”ì¼ ì¡°íšŒì‹œ ë¹ˆ Optional ë°˜í™˜
        
        // When
        Optional<Member> result = memberService.findByEmail(email);
        
        // Then
        assertThat(result).isEmpty();  // ê²°ê³¼ê°€ ë¹„ì–´ìˆì–´ì•¼ í•¨
        verify(memberRepository).findByEmail(email);  // Repository ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ ê²€ì¦
    }
}
```

### ğŸŒ REST API ì»¨íŠ¸ë¡¤ëŸ¬

```java
// í˜„ëŒ€ì ì¸ REST API ë°©ì‹
@RestController  // @Controller + @ResponseBody, JSONìœ¼ë¡œ ì‘ë‹µ
@RequestMapping("/api/v1/members")  // API ë²„ì „ ê´€ë¦¬
@RequiredArgsConstructor
@Validated  // ì…ë ¥ê°’ ê²€ì¦ í™œì„±í™”
public class MemberApiController {
    
    private final MemberService memberService;
    
    /**
     * íšŒì› ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•)
     * GET /api/v1/members?page=0&size=10&sort=createdAt,desc
     */
    @GetMapping
    public ResponseEntity<Page<MemberResponse>> getMembers(
        @PageableDefault(size = 10, sort = "createdAt", direction = Sort.Direction.DESC) 
        Pageable pageable) {
        // @PageableDefault: ê¸°ë³¸ í˜ì´ì§• ì„¤ì •
        
        Page<Member> members = memberService.getMembers(pageable);
        Page<MemberResponse> response = members.map(this::convertToResponse);
        // Entityë¥¼ ì§ì ‘ ë…¸ì¶œí•˜ì§€ ì•Šê³  DTOë¡œ ë³€í™˜
        
        return ResponseEntity.ok(response);  // HTTP 200 OKì™€ í•¨ê»˜ ë°ì´í„° ë°˜í™˜
    }
    
    /**
     * íšŒì› ë“±ë¡
     * POST /api/v1/members
     */
    @PostMapping
    public ResponseEntity<MemberResponse> createMember(
        @Valid @RequestBody CreateMemberRequest request) {
        // @Valid: Bean Validation ê²€ì¦ ìˆ˜í–‰
        // @RequestBody: HTTP ìš”ì²­ ë³¸ë¬¸ì˜ JSONì„ ê°ì²´ë¡œ ë³€í™˜
        
        Member member = memberService.createMember(request);
        MemberResponse response = convertToResponse(member);
        
        return ResponseEntity.status(HttpStatus.CREATED)  // HTTP 201 Created
            .header("Location", "/api/v1/members/" + member.getId())  // ìƒì„±ëœ ë¦¬ì†ŒìŠ¤ ìœ„ì¹˜
            .body(response);
    }
    
    /**
     * íšŒì› ìƒì„¸ ì¡°íšŒ
     * GET /api/v1/members/{id}
     */
    @GetMapping("/{id}")
    public ResponseEntity<MemberResponse> getMember(@PathVariable Long id) {
        Member member = memberService.findById(id)
            .orElseThrow(() -> new MemberNotFoundException("íšŒì›ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: " + id));
        
        return ResponseEntity.ok(convertToResponse(member));
    }
    
    /**
     * íšŒì› ì •ë³´ ìˆ˜ì •
     * PUT /api/v1/members/{id}
     */
    @PutMapping("/{id}")
    public ResponseEntity<MemberResponse> updateMember(
        @PathVariable Long id,
        @Valid @RequestBody UpdateMemberRequest request) {
        
        Member updatedMember = memberService.updateMember(id, request);
        return ResponseEntity.ok(convertToResponse(updatedMember));
    }
    
    /**
     * íšŒì› ì‚­ì œ
     * DELETE /api/v1/members/{id}
     */
    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteMember(@PathVariable Long id) {
        memberService.deleteMember(id);
        return ResponseEntity.noContent().build();  // HTTP 204 No Content
    }
    
    // Entity -> DTO ë³€í™˜ ë©”ì„œë“œ
    private MemberResponse convertToResponse(Member member) {
        return MemberResponse.builder()
            .id(member.getId())
            .name(member.getName())
            .email(member.getEmail())
            .createdAt(member.getCreatedAt())
            .build();
    }
}
```

### ğŸ“ DTO ì„¤ê³„ íŒ¨í„´

```java
// ìš”ì²­ìš© DTO
@Getter @Setter
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class CreateMemberRequest {
    
    @NotBlank(message = "ì´ë¦„ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.")
    @Size(max = 50, message = "ì´ë¦„ì€ 50ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
    private String name;
    
    @NotBlank(message = "ì´ë©”ì¼ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.")
    @Email(message = "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.")
    private String email;
    
    @NotBlank(message = "ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.")
    @Size(min = 8, max = 20, message = "ë¹„ë°€ë²ˆí˜¸ëŠ” 8~20ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤.")
    @Pattern(regexp = "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).*$", 
             message = "ë¹„ë°€ë²ˆí˜¸ëŠ” ëŒ€ì†Œë¬¸ìì™€ ìˆ«ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.")
    private String password;
    
    // Entity ë³€í™˜ ë©”ì„œë“œ
    public Member toEntity(PasswordEncoder passwordEncoder) {
        return Member.builder()
            .name(this.name)
            .email(this.email)
            .password(passwordEncoder.encode(this.password))  // ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸
            .build();
    }
}

// ì‘ë‹µìš© DTO: í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°˜í™˜ë˜ëŠ” ë°ì´í„°
@Getter
@Builder
@AllArgsConstructor
@NoArgsConstructor
public class MemberResponse {
    
    private Long id;
    private String name;
    private String email;
    
    @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss") // ë‚ ì§œ í¬ë§· ì§€ì •
    private LocalDateTime createdAt;
}
```


### ğŸ’¡ DTO ì„¤ê³„ Best Practice

- **ìš”ì²­(Request) DTO**: ì‚¬ìš©ìì˜ ì…ë ¥ì„ ë‹´ìŒ â†’ Entity ë³€í™˜ ì±…ì„ í¬í•¨
    
- **ì‘ë‹µ(Response) DTO**: ì™¸ë¶€ë¡œ ë‚˜ê°€ëŠ” ë°ì´í„°ë§Œ ë…¸ì¶œ (ë¹„ë°€ë²ˆí˜¸, ë‚´ë¶€ ID ì œì™¸)
    
- **Entityì™€ ë¶„ë¦¬**: API ìŠ¤í™ì´ ë°”ë€Œì–´ë„ DB êµ¬ì¡°ì— ì˜í–¥ ì—†ìŒ
    
- **Validation ì–´ë…¸í…Œì´ì…˜**: ì…ë ¥ ê²€ì¦ì„ DTO ë ˆë²¨ì—ì„œ ì²˜ë¦¬
