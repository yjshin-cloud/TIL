# Apache Tomcat ì™„ë²½ ê°€ì´ë“œ ğŸš€

## ğŸ“‹ ëª©ì°¨
1. [Apache Tomcatì´ë€?](#apache-tomcatì´ë€)
2. [ì£¼ìš” íŠ¹ì§•](#ì£¼ìš”-íŠ¹ì§•)
3. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
4. [ì„¤ì¹˜ ë° ì„¤ì •](#ì„¤ì¹˜-ë°-ì„¤ì •)
5. [ê¸°ë³¸ êµ¬ì„± ìš”ì†Œ](#ê¸°ë³¸-êµ¬ì„±-ìš”ì†Œ)
6. [ì‹¤ìŠµ ì˜ˆì œ](#ì‹¤ìŠµ-ì˜ˆì œ)
7. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## Apache Tomcatì´ë€? ğŸ¤”

Apache Tomcatì€ **ì›¹ ì„œë²„**ì™€ **ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ**ì˜ ì—­í• ì„ í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ì†Œí”„íŠ¸ì›¨ì–´ì…ë‹ˆë‹¤.

### ì‰¬ìš´ ë¹„ìœ ë¡œ ì´í•´í•˜ê¸°
- **ì‹ë‹¹**ìœ¼ë¡œ ë¹„ìœ í•˜ë©´, Tomcatì€ **ì£¼ë°©ì¥**ì…ë‹ˆë‹¤
- **ì†ë‹˜(ë¸Œë¼ìš°ì €)**ì´ **ì£¼ë¬¸(HTTP ìš”ì²­)**ì„ í•˜ë©´
- **ì£¼ë°©ì¥(Tomcat)**ì´ **ìš”ë¦¬(Java ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜)**ë¥¼ ë§Œë“¤ì–´
- **ì„œë¹™(HTTP ì‘ë‹µ)**í•´ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤

---

## ì£¼ìš” íŠ¹ì§• âœ¨

| íŠ¹ì§• | ì„¤ëª… |
|------|------|
| **ê²½ëŸ‰ì„±** | ê°€ë³ê³  ë¹ ë¥¸ ì„±ëŠ¥ |
| **í‘œì¤€ ì¤€ìˆ˜** | Java EE í‘œì¤€ì„ ì™„ë²½ ì§€ì› |
| **ë¬´ë£Œ** | ì™„ì „í•œ ì˜¤í”ˆì†ŒìŠ¤ |
| **ì•ˆì •ì„±** | ì „ ì„¸ê³„ì—ì„œ ê²€ì¦ëœ ì•ˆì •ì„± |
| **í™•ì¥ì„±** | ë‹¤ì–‘í•œ í”ŒëŸ¬ê·¸ì¸ê³¼ í™•ì¥ ê°€ëŠ¥ |

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ğŸ—ï¸

```mermaid
graph TD
    A[ì›¹ ë¸Œë¼ìš°ì €] -->|HTTP ìš”ì²­| B[Apache Tomcat]
    B --> C[Catalina<br/>ì„œë¸”ë¦¿ ì—”ì§„]
    C --> D[Coyote<br/>HTTP ì»¤ë„¥í„°]
    C --> E[Jasper<br/>JSP ì—”ì§„]
    
    F[ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜] --> G[Servlet]
    F --> H[JSP]
    F --> I[HTML/CSS/JS]
    
    C --> F
    
    B -->|HTTP ì‘ë‹µ| A
    
    style A fill:#e1f5fe
    style B fill:#fff3e0
    style C fill:#f3e5f5
    style D fill:#e8f5e8
    style E fill:#fff8e1
```

### í•µì‹¬ êµ¬ì„± ìš”ì†Œ ì„¤ëª…

1. **Catalina** ğŸ±
   - Tomcatì˜ í•µì‹¬ ì„œë¸”ë¦¿ ì—”ì§„
   - Java ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” "ë‘ë‡Œ" ì—­í• 

2. **Coyote** ğŸº  
   - HTTP ìš”ì²­ì„ ë°›ê³  ì‘ë‹µì„ ë³´ë‚´ëŠ” "ë¬¸ì§€ê¸°" ì—­í• 
   - ë‹¤ì–‘í•œ í”„ë¡œí† ì½œ ì§€ì› (HTTP/1.1, HTTP/2, AJP)

3. **Jasper** ğŸŒ¸
   - JSP íŒŒì¼ì„ Java ì½”ë“œë¡œ ë³€í™˜í•˜ëŠ” "ë²ˆì—­ê°€" ì—­í• 

---

## ì„¤ì¹˜ ë° ì„¤ì • âš™ï¸

### 1. ë‹¤ìš´ë¡œë“œ
```bash
# ê³µì‹ ì‚¬ì´íŠ¸ì—ì„œ ë‹¤ìš´ë¡œë“œ
# https://tomcat.apache.org/download-10.cgi
wget https://downloads.apache.org/tomcat/tomcat-10/v10.1.x/bin/apache-tomcat-10.1.x.tar.gz
```

### 2. ì••ì¶• í•´ì œ ë° ì„¤ì¹˜
```bash
# ì••ì¶• íŒŒì¼ í•´ì œ (íŒŒì¼ì„ í’€ì–´ë‚´ëŠ” ì‘ì—…)
tar -xzf apache-tomcat-10.1.x.tar.gz

# ì ì ˆí•œ ìœ„ì¹˜ë¡œ ì´ë™ (í”„ë¡œê·¸ë¨ì„ ì›í•˜ëŠ” í´ë”ì— ë°°ì¹˜)
sudo mv apache-tomcat-10.1.x /opt/tomcat

# ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬ (í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ í—ˆê°€)
sudo chmod +x /opt/tomcat/bin/*.sh
```

### 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
```bash
# ~/.bashrc íŒŒì¼ì— ì¶”ê°€
export CATALINA_HOME=/opt/tomcat    # Tomcat ì„¤ì¹˜ ê²½ë¡œë¥¼ ì‹œìŠ¤í…œì— ì•Œë ¤ì¤Œ
export JAVA_HOME=/usr/lib/jvm/java-11-openjdk    # Java ìœ„ì¹˜ë¥¼ ì‹œìŠ¤í…œì— ì•Œë ¤ì¤Œ
export PATH=$PATH:$CATALINA_HOME/bin    # Tomcat ëª…ë ¹ì–´ë¥¼ ì–´ë””ì„œë“  ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ í•¨
```

### 4. ì„œë¹„ìŠ¤ ì‹œì‘
```bash
# Tomcat ì„œë²„ ì‹œì‘ (ì‹ë‹¹ ë¬¸ì„ ì—¬ëŠ” ê²ƒ)
$CATALINA_HOME/bin/startup.sh

# ë˜ëŠ” ì§ì ‘ ì‹¤í–‰
$CATALINA_HOME/bin/catalina.sh run
```

---

## ê¸°ë³¸ êµ¬ì„± ìš”ì†Œ ğŸ”§

### í´ë” êµ¬ì¡°
```mermaid
graph TD
    A[CATALINA_HOME] --> B[bin/]
    A --> C[conf/]
    A --> D[lib/]
    A --> E[logs/]
    A --> F[webapps/]
    A --> G[work/]
    A --> H[temp/]
    
    B --> B1[startup.sh<br/>ì„œë²„ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸]
    B --> B2[shutdown.sh<br/>ì„œë²„ ì¢…ë£Œ ìŠ¤í¬ë¦½íŠ¸]
    
    C --> C1[server.xml<br/>ì„œë²„ ì„¤ì • íŒŒì¼]
    C --> C2[web.xml<br/>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •]
    C --> C3[tomcat-users.xml<br/>ì‚¬ìš©ì ê³„ì • ì„¤ì •]
    
    F --> F1[ROOT/<br/>ê¸°ë³¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜]
    F --> F2[manager/<br/>ê´€ë¦¬ ë„êµ¬]
    F --> F3[your-app/<br/>ì‚¬ìš©ì ì• í”Œë¦¬ì¼€ì´ì…˜]
    
    style A fill:#ff9800
    style F fill:#4caf50
    style C fill:#2196f3
```

### ì£¼ìš” ì„¤ì • íŒŒì¼

#### server.xml (ì„œë²„ì˜ ê¸°ë³¸ ì„¤ì •)
```xml
<!-- í¬íŠ¸ 8080ì—ì„œ HTTP ìš”ì²­ì„ ë°›ê² ë‹¤ëŠ” ì„¤ì • -->
<Connector port="8080" 
           protocol="HTTP/1.1" 
           connectionTimeout="20000" 
           redirectPort="8443" />

<!-- ê°€ìƒ í˜¸ìŠ¤íŠ¸ ì„¤ì • (ë„ë©”ì¸ë³„ë¡œ ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰) -->
<Host name="localhost" 
      appBase="webapps"
      unpackWARs="true" 
      autoDeploy="true">
</Host>
```

#### web.xml (ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê³µí†µ ì„¤ì •)
```xml
<!-- ëª¨ë“  JSP íŒŒì¼ì„ JSP ì„œë¸”ë¦¿ìœ¼ë¡œ ì²˜ë¦¬í•˜ê² ë‹¤ëŠ” ì„¤ì • -->
<servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>*.jsp</url-pattern>
</servlet-mapping>

<!-- ê¸°ë³¸ í˜ì´ì§€ ì„¤ì • (ì£¼ì†Œì°½ì— íŒŒì¼ëª… ì—†ì´ ì ‘ì†í–ˆì„ ë•Œ ë³´ì—¬ì¤„ í˜ì´ì§€) -->
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
```

---

## ì‹¤ìŠµ ì˜ˆì œ ğŸ’»

### 1. ê°„ë‹¨í•œ ì„œë¸”ë¦¿ ë§Œë“¤ê¸°

```java
// HelloServlet.java
import javax.servlet.*;           // ì„œë¸”ë¦¿ ê´€ë ¨ ê¸°ë³¸ í´ë˜ìŠ¤ë“¤ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ import
import javax.servlet.http.*;      // HTTP ê´€ë ¨ ì„œë¸”ë¦¿ í´ë˜ìŠ¤ë“¤ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ import
import java.io.*;                 // ì…ì¶œë ¥ ê´€ë ¨ í´ë˜ìŠ¤ë“¤ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ import

// @WebServlet: ì´ í´ë˜ìŠ¤ê°€ ì„œë¸”ë¦¿ì´ë©°, "/hello" ì£¼ì†Œë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤ê³  ì•Œë ¤ì¤Œ
@WebServlet("/hello")
public class HelloServlet extends HttpServlet {
    
    // doGet: GET ë°©ì‹ìœ¼ë¡œ ìš”ì²­ì´ ì™”ì„ ë•Œ ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œ
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // ì‘ë‹µì˜ ì½˜í…ì¸  íƒ€ì…ì„ HTMLë¡œ ì„¤ì •í•˜ê³ , í•œê¸€ ê¹¨ì§ ë°©ì§€ë¥¼ ìœ„í•´ UTF-8 ì¸ì½”ë”© ì„¤ì •
        response.setContentType("text/html;charset=UTF-8");
        
        // ì›¹ í˜ì´ì§€ì— ê¸€ì„ ì“¸ ìˆ˜ ìˆëŠ” ë„êµ¬(PrintWriter) ê°€ì ¸ì˜¤ê¸°
        PrintWriter out = response.getWriter();
        
        // HTML í˜ì´ì§€ ì‘ì„± ì‹œì‘
        out.println("<html>");
        out.println("<head><title>Hello Servlet</title></head>");
        out.println("<body>");
        out.println("<h1>ì•ˆë…•í•˜ì„¸ìš”! ì²« ë²ˆì§¸ ì„œë¸”ë¦¿ì…ë‹ˆë‹¤.</h1>");
        out.println("<p>í˜„ì¬ ì‹œê°„: " + new java.util.Date() + "</p>");
        out.println("</body>");
        out.println("</html>");
    }
}
```

### 2. JSP í˜ì´ì§€ ë§Œë“¤ê¸°

```jsp
<!-- hello.jsp -->
<%-- JSP í˜ì´ì§€ì˜ ê¸°ë³¸ ì„¤ì •: í•œê¸€ ì‚¬ìš©, HTML í˜•íƒœë¡œ ì¶œë ¥ --%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>

<!DOCTYPE html>
<html>
<head>
    <title>Hello JSP</title>
</head>
<body>
    <h1>JSPë¡œ ë§Œë“  ì²« ë²ˆì§¸ í˜ì´ì§€</h1>
    
    <%-- Java ì½”ë“œë¥¼ JSP ì•ˆì—ì„œ ì‹¤í–‰í•˜ê¸° (ìŠ¤í¬ë¦½í‹€ë¦¿) --%>
    <% 
        String name = "ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼";  // ë³€ìˆ˜ ì„ ì–¸
        int count = 10;                  // ìˆ«ì ë³€ìˆ˜ ì„ ì–¸
    %>
    
    <%-- ë³€ìˆ˜ ê°’ì„ HTMLì— ì¶œë ¥í•˜ê¸° (í‘œí˜„ì‹) --%>
    <p>ì•ˆë…•í•˜ì„¸ìš”, <%= name %>!</p>
    <p>ë°©ë¬¸ì ìˆ˜: <%= count %></p>
    
    <%-- ì¡°ê±´ë¬¸ ì‚¬ìš©í•˜ê¸° --%>
    <% if(count > 5) { %>
        <p style="color: blue;">ë§ì€ ë°©ë¬¸ìê°€ ìˆë„¤ìš”!</p>
    <% } else { %>
        <p style="color: red;">ë°©ë¬¸ìê°€ ì ìŠµë‹ˆë‹¤.</p>
    <% } %>
    
    <%-- ë°˜ë³µë¬¸ìœ¼ë¡œ ëª©ë¡ ë§Œë“¤ê¸° --%>
    <h3>ìˆ«ì ëª©ë¡:</h3>
    <ul>
        <% for(int i = 1; i <= 5; i++) { %>
            <li>ë²ˆí˜¸ <%= i %></li>
        <% } %>
    </ul>
</body>
</html>
```

### 3. ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¡°

```mermaid
graph TD
    A[mywebapp/] --> B[WEB-INF/]
    A --> C[index.html]
    A --> D[hello.jsp]
    A --> E[css/]
    A --> F[js/]
    A --> G[images/]
    
    B --> B1[web.xml<br/>ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •]
    B --> B2[classes/<br/>ì»´íŒŒì¼ëœ Java í´ë˜ìŠ¤]
    B --> B3[lib/<br/>ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ JAR íŒŒì¼]
    
    E --> E1[style.css]
    F --> F1[script.js]
    G --> G1[logo.png]
    
    style A fill:#4caf50
    style B fill:#ff9800
    style C fill:#2196f3
    style D fill:#9c27b0
```

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ğŸ”

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œì™€ í•´ê²°ì±…

#### 1. í¬íŠ¸ ì¶©ëŒ ë¬¸ì œ
```bash
# ë¬¸ì œ: Address already in use: bind ì—ëŸ¬
# í•´ê²°: ì‚¬ìš© ì¤‘ì¸ í¬íŠ¸ í™•ì¸ ë° ì¢…ë£Œ

# 8080 í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ ì°¾ê¸°
netstat -tulpn | grep 8080

# í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
sudo kill -9 [í”„ë¡œì„¸ìŠ¤ID]

# ë˜ëŠ” Tomcat ì„¤ì •ì—ì„œ ë‹¤ë¥¸ í¬íŠ¸ ì‚¬ìš©
# server.xmlì—ì„œ Connector port="8090"ìœ¼ë¡œ ë³€ê²½
```

#### 2. ë©”ëª¨ë¦¬ ë¶€ì¡± ë¬¸ì œ
```bash
# catalina.sh íŒŒì¼ì— JVM ì˜µì…˜ ì¶”ê°€
export JAVA_OPTS="-Xms512m -Xmx1024m -XX:PermSize=256m -XX:MaxPermSize=512m"

# -Xms: ì‹œì‘ ë©”ëª¨ë¦¬ í¬ê¸°
# -Xmx: ìµœëŒ€ ë©”ëª¨ë¦¬ í¬ê¸°  
# -XX:PermSize: ì˜êµ¬ ì €ì¥ì†Œ ì´ˆê¸° í¬ê¸°
# -XX:MaxPermSize: ì˜êµ¬ ì €ì¥ì†Œ ìµœëŒ€ í¬ê¸°
```

#### 3. í•œê¸€ ê¹¨ì§ ë¬¸ì œ
```xml
<!-- server.xmlì˜ Connectorì— URIEncoding ì¶”ê°€ -->
<Connector port="8080" 
           protocol="HTTP/1.1"
           URIEncoding="UTF-8"
           connectionTimeout="20000" 
           redirectPort="8443" />
```

### ë¡œê·¸ í™•ì¸í•˜ê¸°
```bash
# Tomcat ë¡œê·¸ ì‹¤ì‹œê°„ í™•ì¸
tail -f $CATALINA_HOME/logs/catalina.out

# íŠ¹ì • ë‚ ì§œì˜ ë¡œê·¸ í™•ì¸
cat $CATALINA_HOME/logs/catalina.2024-01-15.log
```

---

## ì„±ëŠ¥ ìµœì í™” íŒ âš¡

### 1. ì»¤ë„¥í„° íŠœë‹
```xml
<Connector port="8080" 
           protocol="HTTP/1.1"
           maxConnections="200"     <!-- ìµœëŒ€ ë™ì‹œ ì—°ê²° ìˆ˜ -->
           maxThreads="100"         <!-- ìµœëŒ€ ì²˜ë¦¬ ìŠ¤ë ˆë“œ ìˆ˜ -->
           minSpareThreads="10"     <!-- ìµœì†Œ ëŒ€ê¸° ìŠ¤ë ˆë“œ ìˆ˜ -->
           acceptCount="50"         <!-- ëŒ€ê¸° í í¬ê¸° -->
           connectionTimeout="20000" />
```

### 2. JVM íŠœë‹
```bash
export JAVA_OPTS="-server -Xms2g -Xmx4g -XX:NewRatio=3 -XX:+UseG1GC"

# -server: ì„œë²„ ëª¨ë“œë¡œ ì‹¤í–‰ (ìµœì í™” ìš°ì„ )
# -Xms2g: ì‹œì‘ í™ ë©”ëª¨ë¦¬ 2GB
# -Xmx4g: ìµœëŒ€ í™ ë©”ëª¨ë¦¬ 4GB  
# -XX:NewRatio=3: Young:Old ì˜ì—­ ë¹„ìœ¨ 1:3
# -XX:+UseG1GC: G1 ê°€ë¹„ì§€ ì»¬ë ‰í„° ì‚¬ìš©
```

---

## ë³´ì•ˆ ì„¤ì • ğŸ”’

### 1. ê´€ë¦¬ì ê³„ì • ì„¤ì •
```xml
<!-- tomcat-users.xml -->
<tomcat-users>
  <!-- ê´€ë¦¬ì ì—­í•  ì •ì˜ -->
  <role rolename="admin-gui"/>
  <role rolename="manager-gui"/>
  
  <!-- ê´€ë¦¬ì ì‚¬ìš©ì ìƒì„± (ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš© í•„ìˆ˜!) -->
  <user username="admin" 
        password="ê°•ë ¥í•œë¹„ë°€ë²ˆí˜¸123!" 
        roles="admin-gui,manager-gui"/>
</tomcat-users>
```

### 2. ë¶ˆí•„ìš”í•œ ê¸°ë³¸ ì•± ì œê±°
```bash
# ë³´ì•ˆì„ ìœ„í•´ ê¸°ë³¸ ì˜ˆì œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‚­ì œ
rm -rf $CATALINA_HOME/webapps/docs
rm -rf $CATALINA_HOME/webapps/examples
rm -rf $CATALINA_HOME/webapps/host-manager
```

---

## ë§ˆë¬´ë¦¬ ğŸ¯

Apache Tomcatì€ Java ì›¹ ê°œë°œì˜ í•µì‹¬ ë„êµ¬ì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œë¥¼ í†µí•´ ê¸°ë³¸ì ì¸ ì„¤ì¹˜ë¶€í„° ì‹¤ì œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œê¹Œì§€ì˜ ì „ ê³¼ì •ì„ ì´í•´í•˜ì‹¤ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.

### ë‹¤ìŒ ë‹¨ê³„ í•™ìŠµ ë¡œë“œë§µ
1. **Spring Framework** í•™ìŠµ
2. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™** (JDBC, JPA)
3. **RESTful API** ê°œë°œ
4. **Docker**ë¥¼ ì´ìš©í•œ ë°°í¬
5. **í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤** ì—°ë™

### ìœ ìš©í•œ ì°¸ê³  ìë£Œ
- [Apache Tomcat ê³µì‹ ë¬¸ì„œ](https://tomcat.apache.org/tomcat-10.0-doc/)
- [Oracle Java íŠœí† ë¦¬ì–¼](https://docs.oracle.com/javase/tutorial/)
- [Spring ê³µì‹ ê°€ì´ë“œ](https://spring.io/guides)

---

**ğŸš€ Happy Coding! ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼ê³¼ í•¨ê»˜ ì„±ì¥í•´ìš”!**
