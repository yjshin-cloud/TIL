# Spring Web MVC ì™„ì „ì •ë³µ ê°€ì´ë“œ

## ğŸ¯ í•™ìŠµ ëª©í‘œ

- **MVC ì•„í‚¤í…ì²˜ íŒ¨í„´**ì˜ ê°œë…ê³¼ íë¦„ì„ ì™„ë²½íˆ ì´í•´í•˜ê¸°
- **Spring Web MVC**ì˜ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì—­í• ì„ íŒŒì•…í•˜ê¸°
- **JSPì™€ Thymeleaf**ë¥¼ í™œìš©í•œ ë™ì  ì›¹ í˜ì´ì§€ ê°œë°œí•˜ê¸°
- **ì‹¤ë¬´ì—ì„œ í™œìš©ë˜ëŠ” íŒ¨í„´**ê³¼ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ ìµíˆê¸°

---

## ğŸ“š ëª©ì°¨

1. [MVC ì•„í‚¤í…ì²˜ íŒ¨í„´ ì´í•´í•˜ê¸°](#1-mvc-ì•„í‚¤í…ì²˜-íŒ¨í„´-ì´í•´í•˜ê¸°)
2. [Spring Web MVC í•µì‹¬ ì»´í¬ë„ŒíŠ¸](#2-spring-web-mvc-í•µì‹¬-ì»´í¬ë„ŒíŠ¸)
3. [JSP ê¸°ë°˜ ì›¹ ê°œë°œ](#3-jsp-ê¸°ë°˜-ì›¹-ê°œë°œ)
4. [JSP ì‹¬í™” ê¸°ìˆ ](#4-jsp-ì‹¬í™”-ê¸°ìˆ )
5. [Thymeleaf í…œí”Œë¦¿ ì—”ì§„](#5-thymeleaf-í…œí”Œë¦¿-ì—”ì§„)
6. [í˜„ì—… ì ìš© ì‚¬ë¡€ì™€ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤](#6-í˜„ì—…-ì ìš©-ì‚¬ë¡€ì™€-ë² ìŠ¤íŠ¸-í”„ë™í‹°ìŠ¤)

---

## 1. MVC ì•„í‚¤í…ì²˜ íŒ¨í„´ ì´í•´í•˜ê¸°

### ğŸ¨ MVCë€ ë¬´ì—‡ì¸ê°€?

MVC(Model-View-Controller)ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¸ ê°€ì§€ ì—­í• ë¡œ êµ¬ë¶„í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤. ê° ì»´í¬ë„ŒíŠ¸ì˜ **ì—­í• ì„ ëª…í™•íˆ ë¶„ë¦¬**í•˜ì—¬ ì½”ë“œì˜ ì¬ì‚¬ìš©ì„±ì„ ë†’ì´ê³  ìœ ì§€ë³´ìˆ˜ë¥¼ ìš©ì´í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.

```mermaid
graph TD
    User[ğŸ‘¤ ì‚¬ìš©ì] -->|ìš”ì²­| Controller[ğŸ® Controller]
    Controller -->|ë°ì´í„° ì²˜ë¦¬ ìš”ì²­| Model[ğŸ“Š Model]
    Model -->|ì²˜ë¦¬ëœ ë°ì´í„°| Controller
    Controller -->|ë°ì´í„° ì „ë‹¬| View[ğŸ–¼ï¸ View]
    View -->|HTML ì‘ë‹µ| User
    
    subgraph "MVC êµ¬ì„± ìš”ì†Œ"
        Controller
        Model
        View
    end
```

### ğŸ“‹ ê° ì»´í¬ë„ŒíŠ¸ì˜ ì—­í• 

| ì»´í¬ë„ŒíŠ¸ | ì—­í•  | ì˜ˆì‹œ |
|---------|------|------|
| **Model** | ë°ì´í„°ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë‹´ë‹¹ | `UserService`, `UserDTO`, `UserRepository` |
| **View** | ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(UI) ë‹´ë‹¹ | JSP íŒŒì¼, Thymeleaf í…œí”Œë¦¿ |
| **Controller** | ìš”ì²­ê³¼ ì‘ë‹µì˜ ì¤‘ê°œì ì—­í•  | `@Controller` í´ë˜ìŠ¤ |

### ğŸ”„ MVC ì²˜ë¦¬ íë¦„

```mermaid
sequenceDiagram
    participant U as ì‚¬ìš©ì
    participant C as Controller
    participant M as Model
    participant V as View
    
    U->>C: 1. HTTP ìš”ì²­
    C->>M: 2. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í˜¸ì¶œ
    M-->>C: 3. ì²˜ë¦¬ ê²°ê³¼ ë°˜í™˜
    C->>V: 4. Viewì— ë°ì´í„° ì „ë‹¬
    V-->>U: 5. HTML ì‘ë‹µ
```

### ğŸ’¡ Controllerì˜ ì£¼ìš” ì±…ì„

1. **ì‚¬ìš©ì ìš”ì²­ ìˆ˜ì‹ **: HTTP ìš”ì²­ì„ ë°›ì•„ ë¶„ì„
2. **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í˜¸ì¶œ**: ìš”ì²­ì— ë§ëŠ” Model ë©”ì„œë“œ ì‹¤í–‰
3. **ì‘ë‹µ ìƒì„±**: Model ê²°ê³¼ë¥¼ Viewì— ì „ë‹¬í•˜ì—¬ ì‘ë‹µ ìƒì„±

---

## 2. Spring Web MVC í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### ğŸ—ï¸ Spring Web MVC ì•„í‚¤í…ì²˜

Spring Web MVCëŠ” **DispatcherServlet**ì´ ëª¨ë“  ìš”ì²­ì„ ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” **Front Controller íŒ¨í„´**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```mermaid
graph LR
    Client[í´ë¼ì´ì–¸íŠ¸] -->|HTTP ìš”ì²­| DS[DispatcherServlet]
    DS -->|Handler ì°¾ê¸°| HM[HandlerMapping]
    HM -->|Controller ë°˜í™˜| DS
    DS -->|ìš”ì²­ ì²˜ë¦¬| Controller[Controller]
    Controller -->|ModelAndView| DS
    DS -->|View ì°¾ê¸°| VR[ViewResolver]
    VR -->|View ë°˜í™˜| DS
    DS -->|ë Œë”ë§| View[View]
    View -->|HTML ì‘ë‹µ| Client
```

### ğŸ”§ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ìƒì„¸ ì„¤ëª…

#### 1. **DispatcherServlet** (ì „ë©´ ì»¨íŠ¸ë¡¤ëŸ¬)
- ëª¨ë“  HTTP ìš”ì²­ì˜ **ì§„ì…ì **
- ìš”ì²­ì„ ë¶„ì„í•˜ì—¬ ì ì ˆí•œ Handlerì— ìœ„ì„
- **ì„¤ì • ì˜ˆì‹œ**:
```xml
<!-- web.xml -->
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet>
```

#### 2. **HandlerMapping** (í•¸ë“¤ëŸ¬ ë§¤í•‘)
- ìš”ì²­ URLì„ ì²˜ë¦¬í•  **Controllerë¥¼ ì°¾ëŠ” ì—­í• **
- `@RequestMapping` ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ìœ¼ë¡œ ë§¤í•‘

#### 3. **Controller** (ì»¨íŠ¸ë¡¤ëŸ¬)
```java
@Controller
public class UserController {
    
    @GetMapping("/users/register")
    public String showRegisterForm() {
        return "user/registerForm";
    }
    
    @PostMapping("/users/register")
    public String register(@ModelAttribute User user, Model model) {
        // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬
        userService.register(user);
        model.addAttribute("user", user);
        return "redirect:/users";
    }
}
```

#### 4. **ViewResolver** (ë·° ë¦¬ì¡¸ë²„)
- Controllerê°€ ë°˜í™˜í•œ **ë…¼ë¦¬ì  ë·° ì´ë¦„**ì„ ì‹¤ì œ ë·° íŒŒì¼ë¡œ ë³€í™˜
- ì˜ˆì‹œ: `"user/list"` â†’ `/WEB-INF/views/user/list.jsp`

#### 5. **View** (ë·°)
- Model ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ **ìµœì¢… HTML ì‘ë‹µ** ìƒì„±

### ğŸ“ ì£¼ìš” ì–´ë…¸í…Œì´ì…˜

| ì–´ë…¸í…Œì´ì…˜ | ì—­í•  | ì‚¬ìš© ì˜ˆì‹œ |
|-----------|------|----------|
| `@Controller` | ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ ì§€ì • | `@Controller public class UserController` |
| `@GetMapping` | GET ìš”ì²­ ë§¤í•‘ | `@GetMapping("/users")` |
| `@PostMapping` | POST ìš”ì²­ ë§¤í•‘ | `@PostMapping("/users/add")` |
| `@RequestParam` | ìš”ì²­ íŒŒë¼ë¯¸í„° ë°”ì¸ë”© | `@RequestParam String name` |
| `@ModelAttribute` | í¼ ë°ì´í„°ë¥¼ ê°ì²´ì— ë°”ì¸ë”© | `@ModelAttribute User user` |

---

## 3. JSP ê¸°ë°˜ ì›¹ ê°œë°œ

### ğŸŒ JSPë€?

JSP(JavaServer Pages)ëŠ” **HTML ë¬¸ì„œ ì•ˆì— ìë°” ì½”ë“œë¥¼ ì‚½ì…**í•˜ì—¬ ë™ì ì¸ ì›¹ í˜ì´ì§€ë¥¼ ìƒì„±í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.

### ğŸ“– JSP ê¸°ë³¸ ë¬¸ë²•

#### 1. **ìŠ¤í¬ë¦½í‹€ë¦¿** `<% ... %>`
```jsp
<%
    String name = "í™ê¸¸ë™";
    System.out.println("ì´ë¦„: " + name);
%>
```

#### 2. **í‘œí˜„ì‹** `<%= ... %>`
```jsp
<p>ì•ˆë…•í•˜ì„¸ìš”, <%= name %>ë‹˜!</p>
```

#### 3. **ì„ ì–¸ë¬¸** `<%! ... %>`
```jsp
<%!
    private int count = 0;
    public String getMessage() {
        return "Welcome";
    }
%>
```

### ğŸ’¡ í˜„ëŒ€ì  JSP ê°œë°œ ê¶Œì¥ì‚¬í•­

> **âš ï¸ ì£¼ì˜**: ìŠ¤í¬ë¦½í‹€ë¦¿ ì‚¬ìš©ì„ ì§€ì–‘í•˜ê³ , **EL(Expression Language)**ê³¼ **JSTL(JSP Standard Tag Library)** ì‚¬ìš©ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

### ğŸ—ï¸ ì‹¤ìŠµ: íšŒì› ê°€ì… ì‹œìŠ¤í…œ

#### 1. User DTO í´ë˜ìŠ¤
```java
public class User {
    private String userId;
    private String password;
    private String name;
    
    // getter/setter ìƒëµ
}
```

#### 2. UserController
```java
@Controller
@RequestMapping("/users")
public class UserController {
    
    @GetMapping("/register")
    public String showRegisterForm() {
        return "user/registerForm";
    }
    
    @PostMapping("/register")
    public String register(@ModelAttribute User user, Model model) {
        // ì‚¬ìš©ì ë“±ë¡ ì²˜ë¦¬ ë¡œì§
        model.addAttribute("user", user);
        return "user/registerResult";
    }
}
```

#### 3. íšŒì› ê°€ì… í¼ (`registerForm.jsp`)
```jsp
<%@ page contentType="text/html;charset=UTF-8" %>
<html>
<head>
    <title>íšŒì› ê°€ì…</title>
</head>
<body>
    <h2>íšŒì› ê°€ì…</h2>
    <form action="/users/register" method="post">
        <label>ì•„ì´ë””: <input type="text" name="userId" required></label><br>
        <label>ë¹„ë°€ë²ˆí˜¸: <input type="password" name="password" required></label><br>
        <label>ì´ë¦„: <input type="text" name="name" required></label><br>
        <button type="submit">ê°€ì…í•˜ê¸°</button>
    </form>
</body>
</html>
```

#### 4. ê°€ì… ê²°ê³¼ í˜ì´ì§€ (`registerResult.jsp`)
```jsp
<%@ page contentType="text/html;charset=UTF-8" %>
<html>
<head>
    <title>ê°€ì… ì™„ë£Œ</title>
</head>
<body>
    <h2>ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h2>
    <p>ì•„ì´ë””: ${user.userId}</p>
    <p>ì´ë¦„: ${user.name}</p>
    <a href="/users">íšŒì› ëª©ë¡ ë³´ê¸°</a>
</body>
</html>
```

---

## 4. JSP ì‹¬í™” ê¸°ìˆ 

### ğŸ”„ Include ê¸°ëŠ¥ í™œìš©

ì—¬ëŸ¬ JSP í˜ì´ì§€ì—ì„œ **ê³µí†µ ë¶€ë¶„ì„ ì¬ì‚¬ìš©**í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤.

#### ğŸ“‹ Include ë°©ì‹ ë¹„êµ

| ë°©ì‹ | ë¬¸ë²• | íŠ¹ì§• | ê¶Œì¥ë„ |
|------|------|------|--------|
| **ì§€ì‹œì–´ ë°©ì‹** | `<%@ include file="..." %>` | ì»´íŒŒì¼ ì‹œì  í¬í•¨ (ì •ì ) | ğŸ‘¥ ì œí•œì  |
| **ì•¡ì…˜ íƒœê·¸ ë°©ì‹** | `<jsp:include page="..." />` | ì‹¤í–‰ ì‹œì  í¬í•¨ (ë™ì ) | â­ **ê¶Œì¥** |

#### ğŸ—ï¸ ì‹¤ìŠµ: ê³µí†µ ë ˆì´ì•„ì›ƒ ì ìš©

**í—¤ë” íŒŒì¼** (`header.jsp`)
```jsp
<header>
    <h1>íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
    <nav>
        <a href="/members">íšŒì› ëª©ë¡</a> |
        <a href="/members/add">íšŒì› ë“±ë¡</a>
    </nav>
</header>
```

**ë©”ì¸ í˜ì´ì§€**ì—ì„œ í—¤ë” í¬í•¨
```jsp
<html>
<head>
    <title>íšŒì› ëª©ë¡</title>
</head>
<body>
    <jsp:include page="../common/header.jsp" />
    
    <main>
        <!-- í˜ì´ì§€ë³„ ê³ ìœ  ë‚´ìš© -->
    </main>
    
    <jsp:include page="../common/footer.jsp" />
</body>
</html>
```

### ğŸ”€ Forward vs Redirect

ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ **í˜ì´ì§€ ì´ë™ ë°©ì‹**ì— ëŒ€í•œ ì´í•´ëŠ” ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.

```mermaid
graph TD
    subgraph "Forward (ì„œë²„ ë‚´ë¶€ ì´ë™)"
        A1[í´ë¼ì´ì–¸íŠ¸ ìš”ì²­] --> B1[ì„œë²„]
        B1 --> C1[ë‹¤ë¥¸ JSPë¡œ ìœ„ì„]
        C1 --> D1[ì‘ë‹µ ìƒì„±]
        D1 --> E1[í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µ]
    end
    
    subgraph "Redirect (í´ë¼ì´ì–¸íŠ¸ ì¬ìš”ì²­)"
        A2[í´ë¼ì´ì–¸íŠ¸ ìš”ì²­] --> B2[ì„œë²„]
        B2 --> C2[302 ì‘ë‹µ + ìƒˆ URL]
        C2 --> D2[í´ë¼ì´ì–¸íŠ¸]
        D2 --> E2[ìƒˆ URLë¡œ ì¬ìš”ì²­]
        E2 --> F2[ì„œë²„ ì‘ë‹µ]
    end
```

#### ğŸ“Š Forward vs Redirect ìƒì„¸ ë¹„êµ

| êµ¬ë¶„ | Forward | Redirect |
|------|---------|----------|
| **ì‹¤í–‰ ì£¼ì²´** | ì„œë²„ (WAS) | í´ë¼ì´ì–¸íŠ¸ (ë¸Œë¼ìš°ì €) |
| **URL ë³€ê²½** | âŒ ë³€ê²½ë˜ì§€ ì•ŠìŒ | âœ… ë³€ê²½ë¨ |
| **ìš”ì²­ ê°ì²´** | ë™ì¼í•œ ìš”ì²­ ìœ ì§€ | ìƒˆë¡œìš´ ìš”ì²­ ìƒì„± |
| **ìš”ì²­ íšŸìˆ˜** | 1íšŒ | 2íšŒ |
| **ì†ë„** | âš¡ ë¹ ë¦„ | ğŸ¢ ìƒëŒ€ì ìœ¼ë¡œ ëŠë¦¼ |
| **ì£¼ìš” ìš©ë„** | ë‹¨ìˆœ ì¡°íšŒ, ë‚´ë¶€ íë¦„ ì œì–´ | ë°ì´í„° ë³€ê²½ í›„ í™”ë©´ ì „í™˜ |
| **Spring ë°˜í™˜** | `return "forward:/some/url";` | `return "redirect:/some/url";` |

#### ğŸ¯ ì–¸ì œ ì–´ë–¤ ë°©ì‹ì„ ì‚¬ìš©í• ê¹Œ?

- **Forward ì‚¬ìš© ì‹œê¸°**: ë‹¨ìˆœ ì¡°íšŒ, ì˜¤ë¥˜ í˜ì´ì§€ ì´ë™
- **Redirect ì‚¬ìš© ì‹œê¸°**: ë°ì´í„° ë“±ë¡/ìˆ˜ì •/ì‚­ì œ í›„ ëª©ë¡ í˜ì´ì§€ ì´ë™ (ì¤‘ë³µ ì œì¶œ ë°©ì§€)

### ğŸ·ï¸ EL (Expression Language)

JSPì—ì„œ ë°ì´í„°ë¥¼ ë” **ê°„ê²°í•˜ê²Œ í‘œí˜„**í•˜ê¸° ìœ„í•œ ì–¸ì–´ì…ë‹ˆë‹¤.

#### ğŸ“ EL ê¸°ë³¸ ë¬¸ë²•

```jsp
<!-- ê¸°ì¡´ ìŠ¤í¬ë¦½í‹€ë¦¿ ë°©ì‹ -->
<%= request.getAttribute("userName") %>

<!-- EL ë°©ì‹ (ê¶Œì¥) -->
${userName}
```

#### ğŸ”§ EL ì£¼ìš” ê¸°ëŠ¥

| ê¸°ëŠ¥ | ë¬¸ë²• | ì„¤ëª… |
|------|------|------|
| **ì†ì„± ì ‘ê·¼** | `${attributeName}` | Modelì˜ ì†ì„±ê°’ ì ‘ê·¼ |
| **ê°ì²´ í”„ë¡œí¼í‹°** | `${user.name}` | `user.getName()` ìë™ í˜¸ì¶œ |
| **ì—°ì‚°** | `${price * 1.1}` | ì‚°ìˆ  ì—°ì‚° ê°€ëŠ¥ |
| **ì¡°ê±´ íŒë‹¨** | `${count > 10}` | ë¹„êµ ì—°ì‚° |
| **ë¹ˆ ê°’ í™•ì¸** | `${empty userList}` | null/ë¹ˆ ì»¬ë ‰ì…˜ ì²´í¬ |

### ğŸ·ï¸ JSTL (JSP Standard Tag Library)

ìì£¼ ì‚¬ìš©ë˜ëŠ” ë¡œì§ì„ **ìŠ¤í¬ë¦½í‹€ë¦¿ ì—†ì´ íƒœê·¸ í˜•íƒœ**ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“  í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.

#### ğŸ”§ JSTL ì„¤ì •

```jsp
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
```

> **âš ï¸ Spring Boot 3 ì£¼ì˜ì‚¬í•­**: Jakarta EE ì‚¬ìš©ìœ¼ë¡œ URIê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.

#### ğŸ“‹ JSTL ì£¼ìš” íƒœê·¸

**ì¡°ê±´ë¬¸**
```jsp
<c:if test="${user.age >= 18}">
    <p>ì„±ì¸ ì‚¬ìš©ìì…ë‹ˆë‹¤.</p>
</c:if>
```

**ë°˜ë³µë¬¸**
```jsp
<c:forEach items="${userList}" var="user" varStatus="status">
    <tr>
        <td>${status.index + 1}</td>
        <td>${user.name}</td>
        <td>${user.email}</td>
    </tr>
</c:forEach>
```

#### ğŸ—ï¸ ì‹¤ìŠµ: íšŒì› ëª©ë¡ í˜ì´ì§€

```jsp
<%@ page contentType="text/html;charset=UTF-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<html>
<head>
    <title>íšŒì› ëª©ë¡</title>
</head>
<body>
    <jsp:include page="../common/header.jsp" />
    
    <main>
        <h2>íšŒì› ëª©ë¡</h2>
        
        <c:if test="${empty memberList}">
            <p>ë“±ë¡ëœ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        </c:if>
        
        <c:if test="${not empty memberList}">
            <table border="1">
                <thead>
                    <tr>
                        <th>ë²ˆí˜¸</th>
                        <th>ì•„ì´ë””</th>
                        <th>ì´ë¦„</th>
                    </tr>
                </thead>
                <tbody>
                    <c:forEach items="${memberList}" var="member" varStatus="status">
                        <tr>
                            <td>${status.index + 1}</td>
                            <td>${member.userId}</td>
                            <td>${member.name}</td>
                        </tr>
                    </c:forEach>
                </tbody>
            </table>
        </c:if>
        
        <p><a href="/members/add">ìƒˆ íšŒì› ë“±ë¡</a></p>
    </main>
    
    <jsp:include page="../common/footer.jsp" />
</body>
</html>
```

---

## 5. Thymeleaf í…œí”Œë¦¿ ì—”ì§„

### ğŸ†š JSP vs Thymeleaf ë¹„êµ

Spring Boot 3.xë¶€í„°ëŠ” **Thymeleafê°€ ê¸°ë³¸ ë·° ê¸°ìˆ **ë¡œ ê¶Œì¥ë©ë‹ˆë‹¤.

#### ğŸ“Š ìƒì„¸ ë¹„êµí‘œ

| êµ¬ë¶„ | JSP | Thymeleaf |
|------|-----|-----------|
| **í•µì‹¬ ê°œë…** | HTMLì— Java ì½”ë“œ ì‚½ì… | HTML íƒœê·¸ì— `th:*` ì†ì„± ì¶”ê°€ |
| **ì‹¤í–‰ ë°©ì‹** | ì„œë¸”ë¦¿ìœ¼ë¡œ ë³€í™˜ ë° ì»´íŒŒì¼ | í…œí”Œë¦¿ íŒŒì„œê°€ HTML ë¶„ì„ ì²˜ë¦¬ |
| **í…œí”Œë¦¿ í˜•íƒœ** | ìŠ¤í¬ë¦½í‹€ë¦¿ í¬í•¨ìœ¼ë¡œ ìˆœìˆ˜ HTML ì•„ë‹˜ | **ë‚´ì¶”ëŸ´ í…œí”Œë¦¿**: ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì—´ì–´ë„ ì •ìƒ |
| **Spring Boot** | WAR íŒ¨í‚¤ì§• + ì™¸ë¶€ WAS í•„ìš” | **JAR ë‹¨ë… ì‹¤í–‰ ê°€ëŠ¥** (ê¶Œì¥) |
| **ì£¼ìš” ë¬¸ë²•** | EL + JSTL | `th:text`, `th:if`, `th:each` ë“± |

### ğŸ”’ JSPì˜ ë³´ì•ˆ ë¬¸ì œì™€ í•´ê²°ì±…

#### âš ï¸ ë¬¸ì œì 
```
http://ì„œë²„ì£¼ì†Œ/user/list.jsp
```
- ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ê±°ì¹˜ì§€ ì•Šê³  ë·°ì— ì§ì ‘ ì ‘ê·¼ ê°€ëŠ¥
- ë°ì´í„°ê°€ ì—†ì–´ì„œ í™”ë©´ì´ ê¹¨ì§€ê±°ë‚˜ ì˜¤ë¥˜ ë°œìƒ

#### âœ… í•´ê²°ì±…
```
/WEB-INF/views/user/list.jsp
```
- `/WEB-INF/` í•˜ìœ„ëŠ” ì™¸ë¶€ URL ì§ì ‘ ì ‘ê·¼ ì°¨ë‹¨
- ì˜¤ì§ `DispatcherServlet`ì„ í†µí•œ ì„œë²„ ë‚´ë¶€ Forwardë§Œ í—ˆìš©

### ğŸ§© Thymeleaf ë ˆì´ì•„ì›ƒ ê¸°ëŠ¥

#### 1. **ì¡°ê°(Fragment) ì •ì˜**

**í—¤ë” ì¡°ê°** (`_layout/header.html`)
```html
<head th:fragment="header-fragment">
    <meta charset="UTF-8">
    <title>íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
```

#### 2. **ì¡°ê° í¬í•¨ ë°©ë²•**

```html
<html>
<head th:replace="~{_layout/header :: header-fragment}"></head>
<body>
    <div class="container">
        <!-- í˜ì´ì§€ ë‚´ìš© -->
    </div>
</body>
</html>
```

#### ğŸ“‹ ì¡°ê° í¬í•¨ ë°©ì‹ ë¹„êµ

| ì†ì„± | ë™ì‘ | ì‚¬ìš© ì˜ˆì‹œ |
|------|------|----------|
| `th:insert` | íƒœê·¸ **ë‚´ë¶€ì—** í”„ë˜ê·¸ë¨¼íŠ¸ ì‚½ì… | `<div th:insert="...">` |
| `th:replace` | íƒœê·¸ **ìì²´ë¥¼** í”„ë˜ê·¸ë¨¼íŠ¸ë¡œ ëŒ€ì²´ | `<head th:replace="...">` |

### ğŸ”§ Thymeleaf í•µì‹¬ ì†ì„±

#### ğŸ“ ì£¼ìš” `th:*` ì†ì„±ë“¤

| ì†ì„± | ì—­í•  | ì‚¬ìš© ì˜ˆì‹œ |
|------|------|----------|
| `th:text` | í…ìŠ¤íŠ¸ ë‚´ìš© ì„¤ì • | `<p th:text="${user.name}">ê¸°ë³¸ê°’</p>` |
| `th:if` | ì¡°ê±´ë¶€ ë Œë”ë§ | `<div th:if="${not #lists.isEmpty(userList)}">` |
| `th:each` | ë°˜ë³µë¬¸ | `<tr th:each="user : ${userList}">` |
| `th:object` | í¼ ê°ì²´ ë°”ì¸ë”© | `<form th:object="${member}">` |
| `th:field` | í¼ í•„ë“œ ë°”ì¸ë”© | `<input th:field="*{name}">` |
| `th:href` | ë§í¬ URL ì„¤ì • | `<a th:href="@{/members}">ëª©ë¡</a>` |

### ğŸ—ï¸ ì‹¤ìŠµ: Thymeleaf íšŒì› ê´€ë¦¬ ì‹œìŠ¤í…œ

#### 1. **íšŒì› ë“±ë¡ í¼** (`members/add.html`)

```html
<!DOCTYPE html>
<html>
<head th:replace="~{_layout/header :: header-fragment}"></head>
<body>
    <div class="container mt-4">
        <h2>íšŒì› ë“±ë¡</h2>
        
        <form th:action="@{/members/add}" th:object="${member}" method="post" class="mt-3">
            <div class="mb-3">
                <label for="userId" class="form-label">ì•„ì´ë””</label>
                <input type="text" th:field="*{userId}" class="form-control" required>
            </div>
            
            <div class="mb-3">
                <label for="name" class="form-label">ì´ë¦„</label>
                <input type="text" th:field="*{name}" class="form-control" required>
            </div>
            
            <div class="mb-3">
                <label for="email" class="form-label">ì´ë©”ì¼</label>
                <input type="email" th:field="*{email}" class="form-control">
            </div>
            
            <button type="submit" class="btn btn-primary">ë“±ë¡í•˜ê¸°</button>
            <a th:href="@{/members}" class="btn btn-secondary">ëª©ë¡ìœ¼ë¡œ</a>
        </form>
    </div>
</body>
</html>
```

#### 2. **íšŒì› ëª©ë¡** (`members/list.html`)

```html
<!DOCTYPE html>
<html>
<head th:replace="~{_layout/header :: header-fragment}"></head>
<body>
    <div class="container mt-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2>íšŒì› ëª©ë¡</h2>
            <a th:href="@{/members/add}" class="btn btn-success">ìƒˆ íšŒì› ë“±ë¡</a>
        </div>
        
        <!-- ë¹ˆ ëª©ë¡ ì²˜ë¦¬ -->
        <div th:if="${#lists.isEmpty(memberList)}" class="alert alert-info">
            ë“±ë¡ëœ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.
        </div>
        
        <!-- íšŒì› ëª©ë¡ í…Œì´ë¸” -->
        <div th:if="${not #lists.isEmpty(memberList)}">
            <table class="table table-striped">
                <thead class="table-dark">
                    <tr>
                        <th>ë²ˆí˜¸</th>
                        <th>ì•„ì´ë””</th>
                        <th>ì´ë¦„</th>
                        <th>ì´ë©”ì¼</th>
                        <th>ë“±ë¡ì¼</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="member, status : ${memberList}">
                        <td th:text="${status.index + 1}">1</td>
                        <td th:text="${member.userId}">user01</td>
                        <td th:text="${member.name}">í™ê¸¸ë™</td>
                        <td th:text="${member.email}">hong@example.com</td>
                        <td th:text="${#temporals.format(member.createdAt, 'yyyy-MM-dd')}">2024-08-28</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
```

#### 3. **ì»¨íŠ¸ë¡¤ëŸ¬** (`MemberController.java`)

```java
@Controller
@RequestMapping("/members")
public class MemberController {
    
    private final MemberService memberService;
    
    @GetMapping
    public String list(Model model) {
        List<Member> memberList = memberService.findAll();
        model.addAttribute("memberList", memberList);
        return "members/list";
    }
    
    @GetMapping("/add")
    public String addForm(Model model) {
        model.addAttribute("member", new Member());
        return "members/add";
    }
    
    @PostMapping("/add")
    public String add(@ModelAttribute Member member) {
        memberService.save(member);
        return "redirect:/members"; // PRG íŒ¨í„´
    }
}
```

### ğŸ¯ @ModelAttributeì™€ ê°ì²´ ë°”ì¸ë”©

#### ğŸ’¡ í•µì‹¬ ê°œë…

1. **Controller**: `@ModelAttribute`ë¡œ í¼ ë°ì´í„°ë¥¼ DTO ê°ì²´ë¡œ ìë™ ë°”ì¸ë”©
2. **Thymeleaf**: `th:object`ì™€ `th:field`ë¡œ ê°ì²´ì™€ í¼ í•„ë“œë¥¼ ì—°ê²°

#### ğŸ”„ ë°”ì¸ë”© ê³¼ì •

```mermaid
graph LR
    A["HTML Form"] -->|"th:field"| B["Member DTO"]
    B -->|"@ModelAttribute"| C["Controller Method"]
    C -->|"ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§"| D["Service Layer"]
```

#### ğŸ“ `th:field`ì˜ ì¥ì 

- **ìë™ ìƒì„±**: `id`, `name`, `value` ì†ì„±ì„ ìë™ ìƒì„±
- **ì½”ë“œ ê°„ì†Œí™”**: ì¤‘ë³µ ì½”ë“œ ì œê±°
- **íƒ€ì… ì•ˆì „ì„±**: ì»´íŒŒì¼ íƒ€ì„ì— í•„ë“œëª… ê²€ì¦

**ê¸°ì¡´ ë°©ì‹**
```html
<input type="text" id="name" name="name" value="${member.name}">
```

**Thymeleaf ë°©ì‹**
```html
<input type="text" th:field="*{name}">
<!-- ìë™ìœ¼ë¡œ id="name" name="name" value="..." ìƒì„± -->
```

---
