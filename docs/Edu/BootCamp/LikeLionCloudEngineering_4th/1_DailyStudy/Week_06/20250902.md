# RESTful API & Swagger ì™„ë²½ ê°€ì´ë“œ ğŸ“š

## ëª©ì°¨
1. [REST API ê¸°ë³¸ ê°œë…](#rest-api-ê¸°ë³¸-ê°œë…)
2. [Spring Boot REST ì»¨íŠ¸ë¡¤ëŸ¬](#spring-boot-rest-ì»¨íŠ¸ë¡¤ëŸ¬)
3. [ë°ì´í„° ì²˜ë¦¬ ë°©ì‹](#ë°ì´í„°-ì²˜ë¦¬-ë°©ì‹)
4. [ì‹¤ìŠµ ì˜ˆì œ ì½”ë“œ](#ì‹¤ìŠµ-ì˜ˆì œ-ì½”ë“œ)
5. [API ì•„í‚¤í…ì²˜ ì‹œê°í™”](#api-ì•„í‚¤í…ì²˜-ì‹œê°í™”)
6. [Swagger ë¬¸ì„œí™”](#swagger-ë¬¸ì„œí™”)
7. [í˜„ì—… íŠ¸ë Œë“œ ë° ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤](#í˜„ì—…-íŠ¸ë Œë“œ-ë°-ë² ìŠ¤íŠ¸-í”„ë™í‹°ìŠ¤)

---

## REST API ê¸°ë³¸ ê°œë…

### RESTë€?
**REST (Representational State Transfer)**ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œ ì„¤ê³„ë¥¼ ìœ„í•œ ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤.

#### í•µì‹¬ ì›ì¹™
- **ìì› (Resource)**: ëª¨ë“  ë°ì´í„°ëŠ” URIë¥¼ í†µí•´ ê³ ìœ í•˜ê²Œ ì‹ë³„
  - ì˜ˆ: `/api/users/1` (1ë²ˆ ì‚¬ìš©ì ìì›)
- **í–‰ìœ„ (Verb)**: HTTP Methodë¡œ ìì›ì— ëŒ€í•œ í–‰ìœ„ í‘œí˜„
  - GET, POST, PUT, DELETE ë“±
- **í‘œí˜„ (Representation)**: ìì›ì˜ ìƒíƒœë¥¼ JSON, XML ë“±ìœ¼ë¡œ ì „ë‹¬

### ì „í†µì  ë°©ì‹ vs REST API ë°©ì‹

```mermaid
graph TB
    subgraph "ì „í†µì  ë°©ì‹ (SSR)"
        A[í´ë¼ì´ì–¸íŠ¸ ìš”ì²­] --> B[ì„œë²„]
        B --> C[ì™„ì „í•œ HTML í˜ì´ì§€ ìƒì„±]
        C --> D[í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡]
    end
    
    subgraph "REST API ë°©ì‹ (CSR)"
        E[í´ë¼ì´ì–¸íŠ¸ ìš”ì²­] --> F[REST API ì„œë²„]
        F --> G[JSON ë°ì´í„°ë§Œ ì‘ë‹µ]
        G --> H[í´ë¼ì´ì–¸íŠ¸ì—ì„œ í™”ë©´ êµ¬ì„±]
    end
```

---

## Spring Boot REST ì»¨íŠ¸ë¡¤ëŸ¬

### @Controller vs @RestController

#### @Controller (ì „í†µì  ë°©ì‹)
```java
@Controller
public class TraditionalController {
    
    @GetMapping("/users")
    public String getUsersPage(Model model) {
        // modelì— ë°ì´í„° ì¶”ê°€
        model.addAttribute("users", userService.getAllUsers());
        // í…œí”Œë¦¿ íŒŒì¼ëª… ë°˜í™˜ (ì˜ˆ: users.html)
        return "users"; 
    }
    
    @GetMapping("/api/users")
    @ResponseBody  // ì´ ì• ë„ˆí…Œì´ì…˜ì´ ìˆì–´ì•¼ JSON ì‘ë‹µ ê°€ëŠ¥
    public List<User> getUsers() {
        return userService.getAllUsers();
    }
}
```

#### @RestController (REST API ì „ìš©)
```java
@RestController  // @Controller + @ResponseBody ì¡°í•©
@RequestMapping("/api")  // ê¸°ë³¸ ê²½ë¡œ ì„¤ì •
public class UserRestController {
    
    @GetMapping("/users")
    public List<UserDto.Response> getUsers() {
        // ìë™ìœ¼ë¡œ JSON í˜•íƒœë¡œ ì§ë ¬í™”ë˜ì–´ ì‘ë‹µ
        return userService.getAllUsers();
    }
}
```

---

## ë°ì´í„° ì²˜ë¦¬ ë°©ì‹

### ìš”ì²­ ë°ì´í„° ë°›ê¸°

#### @PathVariable (ê²½ë¡œ ë³€ìˆ˜)
```java
@GetMapping("/users/{id}")  // URL ê²½ë¡œì˜ ì¼ë¶€
public UserDto.Response getUser(@PathVariable Long id) {
    // URL: /api/users/123 -> id = 123
    return userService.getUserById(id);
}

@GetMapping("/users/{id}/posts/{postId}")
public PostDto.Response getUserPost(
    @PathVariable Long id,          // ì‚¬ìš©ì ID
    @PathVariable Long postId) {    // ê²Œì‹œê¸€ ID
    // URL: /api/users/123/posts/456 -> id=123, postId=456
    return postService.getUserPost(id, postId);
}
```

#### @RequestParam (ì¿¼ë¦¬ ìŠ¤íŠ¸ë§)
```java
@GetMapping("/users")
public List<UserDto.Response> getUsers(
    @RequestParam(defaultValue = "0") int page,        // í˜ì´ì§€ ë²ˆí˜¸
    @RequestParam(defaultValue = "10") int size,       // í˜ì´ì§€ í¬ê¸°
    @RequestParam(required = false) String name) {     // ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰ (ì„ íƒì‚¬í•­)
    
    // URL: /api/users?page=1&size=20&name=ê¹€ì² ìˆ˜
    // page=1, size=20, name="ê¹€ì² ìˆ˜"
    return userService.getUsers(page, size, name);
}
```

#### @RequestBody (ìš”ì²­ ë³¸ë¬¸)
```java
@PostMapping("/users")
public UserDto.Response createUser(@RequestBody UserDto.CreateRequest request) {
    // HTTP Bodyì˜ JSON ë°ì´í„°ë¥¼ Java ê°ì²´ë¡œ ë³€í™˜
    // { "name": "ê¹€ì² ìˆ˜", "email": "kim@example.com" }
    return userService.createUser(request);
}
```

### Entity vs DTO ë¶„ë¦¬

#### ë¬¸ì œìƒí™©: Entity ì§ì ‘ ë…¸ì¶œ
```java
// âŒ ì˜ëª»ëœ ë°©ì‹
@RestController
public class BadController {
    
    @GetMapping("/users/{id}")
    public User getUser(@PathVariable Long id) {
        // Entityë¥¼ ì§ì ‘ ë°˜í™˜í•˜ë©´ ìœ„í—˜!
        return userRepository.findById(id);
        // ë¬¸ì œì :
        // 1. ë¹„ë°€ë²ˆí˜¸ ê°™ì€ ë¯¼ê°ì •ë³´ë„ ë…¸ì¶œ
        // 2. Entity êµ¬ì¡° ë³€ê²½ì‹œ APIë„ í•¨ê»˜ ë³€ê²½ë¨
        // 3. ìˆœí™˜ ì°¸ì¡° ë¬¸ì œ ë°œìƒ ê°€ëŠ¥
    }
}
```

#### í•´ê²°ì±…: DTO ì‚¬ìš©
```java
// âœ… ì˜¬ë°”ë¥¸ ë°©ì‹
@RestController
@RequestMapping("/api")
public class UserController {
    
    private final UserService userService;
    
    // ìƒì„±ì ì£¼ì… (Springì´ ìë™ìœ¼ë¡œ ì˜ì¡´ì„± ì£¼ì…)
    public UserController(UserService userService) {
        this.userService = userService;
    }
    
    @GetMapping("/users/{id}")
    public UserDto.Response getUser(@PathVariable Long id) {
        // DTOë§Œ ë°˜í™˜í•˜ì—¬ ì•ˆì „í•˜ê³  ëª…í™•í•œ API ëª…ì„¸
        return userService.getUserById(id);
    }
}
```

### Java Recordë¥¼ í™œìš©í•œ DTO

#### ì „í†µì ì¸ DTO ë°©ì‹
```java
// ê¸°ì¡´ ë°©ì‹: ë§ì€ ì½”ë“œ í•„ìš”
public class UserCreateRequest {
    private String name;
    private String email;
    
    // ê¸°ë³¸ ìƒì„±ì
    public UserCreateRequest() {}
    
    // ëª¨ë“  í•„ë“œ ìƒì„±ì
    public UserCreateRequest(String name, String email) {
        this.name = name;
        this.email = email;
    }
    
    // Getter ë©”ì„œë“œë“¤
    public String getName() { return name; }
    public String getEmail() { return email; }
    
    // Setter ë©”ì„œë“œë“¤
    public void setName(String name) { this.name = name; }
    public void setEmail(String email) { this.email = email; }
    
    // equals, hashCode, toString ë©”ì„œë“œë“¤...
}
```

#### Java Record ë°©ì‹ (Java 16+)
```java
// âœ¨ ê°„ê²°í•˜ê³  í˜„ëŒ€ì ì¸ ë°©ì‹
public class UserDto {
    
    // ì‚¬ìš©ì ìƒì„± ìš”ì²­ DTO
    public record CreateRequest(
        String name,    // ìë™ìœ¼ë¡œ private finalë¡œ ìƒì„±
        String email    // getter, equals, hashCode, toString ìë™ ìƒì„±
    ) {
        // ìœ íš¨ì„± ê²€ì¦ ë¡œì§ ì¶”ê°€ ê°€ëŠ¥
        public CreateRequest {
            if (name == null || name.trim().isEmpty()) {
                throw new IllegalArgumentException("ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤");
            }
            if (email == null || !email.contains("@")) {
                throw new IllegalArgumentException("ì˜¬ë°”ë¥¸ ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”");
            }
        }
    }
    
    // ì‚¬ìš©ì ìˆ˜ì • ìš”ì²­ DTO
    public record UpdateRequest(
        String name,
        String email
    ) {}
    
    // ì‚¬ìš©ì ì‘ë‹µ DTO
    public record Response(
        Long id,
        String name,
        String email,
        LocalDateTime createdAt
    ) {
        // Entityì—ì„œ DTOë¡œ ë³€í™˜í•˜ëŠ” ì •ì  ë©”ì„œë“œ
        public static Response from(User user) {
            return new Response(
                user.getId(),
                user.getName(),
                user.getEmail(),
                user.getCreatedAt()
            );
        }
    }
}
```

---

## ì‹¤ìŠµ ì˜ˆì œ ì½”ë“œ

### 1. Entity í´ë˜ìŠ¤
```java
@Entity  // JPA Entityì„ì„ í‘œì‹œ
@Table(name = "users")  // ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ëª… ì§€ì •
@NoArgsConstructor(access = AccessLevel.PROTECTED)  // ê¸°ë³¸ ìƒì„±ì (JPA ìš”êµ¬ì‚¬í•­)
@AllArgsConstructor  // ëª¨ë“  í•„ë“œë¥¼ ë°›ëŠ” ìƒì„±ì
@Getter  // Lombok: getter ë©”ì„œë“œ ìë™ ìƒì„±
@ToString  // Lombok: toString ë©”ì„œë“œ ìë™ ìƒì„±
public class User {
    
    @Id  // ê¸°ë³¸í‚¤ ì§€ì •
    @GeneratedValue(strategy = GenerationType.IDENTITY)  // ìë™ ì¦ê°€
    private Long id;
    
    @Column(nullable = false, length = 100)  // NOT NULL ì œì•½, ìµœëŒ€ 100ì
    private String name;
    
    @Column(nullable = false, unique = true)  // NOT NULL + UNIQUE ì œì•½
    private String email;
    
    @CreationTimestamp  // ìƒì„± ì‹œê°„ ìë™ ì„¤ì •
    private LocalDateTime createdAt;
    
    @UpdateTimestamp  // ìˆ˜ì • ì‹œê°„ ìë™ ì—…ë°ì´íŠ¸
    private LocalDateTime updatedAt;
    
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë©”ì„œë“œ
    public void updateInfo(String name, String email) {
        this.name = name;
        this.email = email;
        // updatedAtì€ @UpdateTimestampì— ì˜í•´ ìë™ ì—…ë°ì´íŠ¸
    }
}
```

### 2. Repository ì¸í„°í˜ì´ìŠ¤
```java
@Repository  // Springì˜ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì„ì„ í‘œì‹œ
public interface UserRepository extends JpaRepository<User, Long> {
    // JpaRepository<Entityíƒ€ì…, IDíƒ€ì…>ì„ ìƒì†ë°›ìœ¼ë©´
    // ê¸°ë³¸ì ì¸ CRUD ë©”ì„œë“œë“¤ì´ ìë™ìœ¼ë¡œ ì œê³µë¨:
    // - save(entity): ì €ì¥/ìˆ˜ì •
    // - findById(id): IDë¡œ ì¡°íšŒ
    // - findAll(): ì „ì²´ ì¡°íšŒ
    // - deleteById(id): IDë¡œ ì‚­ì œ
    // - count(): ì´ ê°œìˆ˜
    
    // ì»¤ìŠ¤í…€ ì¿¼ë¦¬ ë©”ì„œë“œ (Spring Data JPAê°€ ìë™ìœ¼ë¡œ êµ¬í˜„)
    Optional<User> findByEmail(String email);  // ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì°¾ê¸°
    List<User> findByNameContaining(String name);  // ì´ë¦„ì— íŠ¹ì • ë¬¸ìì—´ í¬í•¨
    boolean existsByEmail(String email);  // ì´ë©”ì¼ ì¤‘ë³µ ì²´í¬
}
```

### 3. Service í´ë˜ìŠ¤
```java
@Service  // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬ ê³„ì¸µì„ì„ í‘œì‹œ
@Transactional(readOnly = true)  // ê¸°ë³¸ì ìœ¼ë¡œ ì½ê¸° ì „ìš© íŠ¸ëœì­ì…˜
public class UserService {
    
    private final UserRepository userRepository;
    
    // ìƒì„±ì ì£¼ì… (ê¶Œì¥ ë°©ì‹)
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
    
    // ì‚¬ìš©ì ìƒì„±
    @Transactional  // ì“°ê¸° ì‘ì—…ì´ë¯€ë¡œ readOnly=false (ê¸°ë³¸ê°’)
    public UserDto.Response createUser(UserDto.CreateRequest request) {
        // 1. ì´ë©”ì¼ ì¤‘ë³µ ì²´í¬
        if (userRepository.existsByEmail(request.email())) {
            throw new IllegalArgumentException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤");
        }
        
        // 2. Entity ìƒì„±
        User user = new User(null, request.name(), request.email(), null, null);
        
        // 3. ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
        User savedUser = userRepository.save(user);
        
        // 4. Entityë¥¼ DTOë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜
        return UserDto.Response.from(savedUser);
    }
    
    // ì „ì²´ ì‚¬ìš©ì ì¡°íšŒ
    public List<UserDto.Response> getAllUsers() {
        return userRepository.findAll()  // ëª¨ë“  User Entity ì¡°íšŒ
                .stream()  // Stream API ì‚¬ìš©
                .map(UserDto.Response::from)  // ê° Entityë¥¼ DTOë¡œ ë³€í™˜
                .toList();  // Listë¡œ ìˆ˜ì§‘
    }
    
    // íŠ¹ì • ì‚¬ìš©ì ì¡°íšŒ
    public UserDto.Response getUserById(Long id) {
        User user = userRepository.findById(id)  // Optional<User> ë°˜í™˜
                .orElseThrow(() -> new EntityNotFoundException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"));
        return UserDto.Response.from(user);
    }
    
    // ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •
    @Transactional
    public UserDto.Response updateUser(Long id, UserDto.UpdateRequest request) {
        // 1. ê¸°ì¡´ ì‚¬ìš©ì ì¡°íšŒ
        User user = userRepository.findById(id)
                .orElseThrow(() -> new EntityNotFoundException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"));
        
        // 2. ì´ë©”ì¼ ì¤‘ë³µ ì²´í¬ (ìì‹  ì œì™¸)
        if (!user.getEmail().equals(request.email()) && 
            userRepository.existsByEmail(request.email())) {
            throw new IllegalArgumentException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤");
        }
        
        // 3. ì •ë³´ ì—…ë°ì´íŠ¸ (Dirty Checkingìœ¼ë¡œ ìë™ ì €ì¥)
        user.updateInfo(request.name(), request.email());
        
        // 4. DTOë¡œ ë³€í™˜í•˜ì—¬ ë°˜í™˜
        return UserDto.Response.from(user);
    }
    
    // ì‚¬ìš©ì ì‚­ì œ
    @Transactional
    public void deleteUser(Long id) {
        // ì¡´ì¬ ì—¬ë¶€ í™•ì¸ í›„ ì‚­ì œ
        if (!userRepository.existsById(id)) {
            throw new EntityNotFoundException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
        }
        userRepository.deleteById(id);
    }
}
```

### 4. REST Controller
```java
@RestController  // JSON ì‘ë‹µì„ ìœ„í•œ REST ì»¨íŠ¸ë¡¤ëŸ¬
@RequestMapping("/api/users")  // ê¸°ë³¸ ê²½ë¡œ ì„¤ì •
@Validated  // ìœ íš¨ì„± ê²€ì¦ í™œì„±í™”
public class UserApiController {
    
    private final UserService userService;
    
    // ìƒì„±ì ì£¼ì…
    public UserApiController(UserService userService) {
        this.userService = userService;
    }
    
    // ìƒˆ ì‚¬ìš©ì ë“±ë¡
    @PostMapping
    public ResponseEntity<UserDto.Response> createUser(
            @Valid @RequestBody UserDto.CreateRequest request) {
        // @Valid: ìš”ì²­ ë°ì´í„° ìœ íš¨ì„± ê²€ì¦
        // @RequestBody: HTTP Bodyì˜ JSONì„ Java ê°ì²´ë¡œ ë³€í™˜
        
        UserDto.Response response = userService.createUser(request);
        
        // 201 Created ìƒíƒœì½”ë“œì™€ í•¨ê»˜ ìƒì„±ëœ ì‚¬ìš©ì ì •ë³´ ë°˜í™˜
        return ResponseEntity.status(HttpStatus.CREATED).body(response);
    }
    
    // ëª¨ë“  ì‚¬ìš©ì ì¡°íšŒ
    @GetMapping
    public ResponseEntity<List<UserDto.Response>> getAllUsers() {
        List<UserDto.Response> users = userService.getAllUsers();
        
        // 200 OK ìƒíƒœì½”ë“œì™€ í•¨ê»˜ ì‚¬ìš©ì ëª©ë¡ ë°˜í™˜
        return ResponseEntity.ok(users);
    }
    
    // íŠ¹ì • ì‚¬ìš©ì ì¡°íšŒ
    @GetMapping("/{id}")
    public ResponseEntity<UserDto.Response> getUser(@PathVariable Long id) {
        // @PathVariable: URL ê²½ë¡œì—ì„œ {id} ë¶€ë¶„ì„ Long idë¡œ ë°”ì¸ë”©
        
        UserDto.Response user = userService.getUserById(id);
        return ResponseEntity.ok(user);
    }
    
    // ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •
    @PutMapping("/{id}")
    public ResponseEntity<UserDto.Response> updateUser(
            @PathVariable Long id,
            @Valid @RequestBody UserDto.UpdateRequest request) {
        
        UserDto.Response updatedUser = userService.updateUser(id, request);
        return ResponseEntity.ok(updatedUser);
    }
    
    // ì‚¬ìš©ì ì‚­ì œ
    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteUser(@PathVariable Long id) {
        userService.deleteUser(id);
        
        // 204 No Content: ì‚­ì œ ì„±ê³µ, ì‘ë‹µ ë³¸ë¬¸ ì—†ìŒ
        return ResponseEntity.noContent().build();
    }
    
    // ì˜ˆì™¸ ì²˜ë¦¬
    @ExceptionHandler(EntityNotFoundException.class)
    public ResponseEntity<ErrorResponse> handleNotFound(EntityNotFoundException e) {
        ErrorResponse error = new ErrorResponse("NOT_FOUND", e.getMessage());
        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(error);
    }
    
    @ExceptionHandler(IllegalArgumentException.class)
    public ResponseEntity<ErrorResponse> handleBadRequest(IllegalArgumentException e) {
        ErrorResponse error = new ErrorResponse("BAD_REQUEST", e.getMessage());
        return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(error);
    }
}

// ì—ëŸ¬ ì‘ë‹µìš© DTO
public record ErrorResponse(String code, String message) {}
```

---

## API ì•„í‚¤í…ì²˜ ì‹œê°í™”

### ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
```mermaid
graph TB
    subgraph "í´ë¼ì´ì–¸íŠ¸ ê³„ì¸µ"
        A[ì›¹ ë¸Œë¼ìš°ì €]
        B[ëª¨ë°”ì¼ ì•±]
        C[Postman]
    end
    
    subgraph "Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜"
        D["RestController - HTTP ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬"]
        E["Service - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§"]
        F["Repository - ë°ì´í„° ì ‘ê·¼"]
    end
    
    subgraph "ë°ì´í„° ê³„ì¸µ"
        G["MySQL/PostgreSQL ë°ì´í„°ë² ì´ìŠ¤"]
    end
    
    A --> D
    B --> D
    C --> D
    D --> E
    E --> F
    F --> G
    
    style D fill:#e1f5fe
    style E fill:#f3e5f5
    style F fill:#e8f5e8
```

### REST API ìš”ì²­ íë¦„
```mermaid
sequenceDiagram
    participant C as í´ë¼ì´ì–¸íŠ¸
    participant RC as @RestController
    participant S as @Service
    participant R as @Repository
    participant DB as ë°ì´í„°ë² ì´ìŠ¤
    
    Note over C,DB: ì‚¬ìš©ì ìƒì„± ìš”ì²­ ì˜ˆì‹œ
    
    C->>+RC: POST /api/users<br/>{name:"ê¹€ì² ìˆ˜", email:"kim@test.com"}
    Note over RC: @RequestBodyë¡œ<br/>JSON â†’ DTO ë³€í™˜
    
    RC->>+S: createUser(CreateRequest)
    Note over S: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§<br/>(ìœ íš¨ì„± ê²€ì¦, ì¤‘ë³µ ì²´í¬)
    
    S->>+R: existsByEmail(email)
    R->>+DB: SELECT COUNT(*) FROM users WHERE email=?
    DB-->>-R: 0 (ì¤‘ë³µ ì—†ìŒ)
    R-->>-S: false
    
    S->>+R: save(user)
    R->>+DB: INSERT INTO users (name, email) VALUES (?, ?)
    DB-->>-R: ì €ì¥ëœ User ì—”í‹°í‹°
    R-->>-S: User ì—”í‹°í‹°
    
    Note over S: Entity â†’ DTO ë³€í™˜
    S-->>-RC: UserDto.Response
    
    Note over RC: DTO â†’ JSON ë³€í™˜<br/>HTTP 201 Created
    RC-->>-C: 201 Created<br/>{id:1, name:"ê¹€ì² ìˆ˜", email:"kim@test.com"}
```

### HTTP ë©”ì„œë“œë³„ ìš©ë„
```mermaid
graph LR
    subgraph "HTTP ë©”ì„œë“œ"
        A[GET<br/>ğŸ“– ì¡°íšŒ]
        B[POST<br/>â• ìƒì„±]
        C[PUT<br/>âœï¸ ì „ì²´ ìˆ˜ì •]
        D[PATCH<br/>ğŸ”§ ë¶€ë¶„ ìˆ˜ì •]
        E[DELETE<br/>ğŸ—‘ï¸ ì‚­ì œ]
    end
    
    subgraph "íŠ¹ì§•"
        F[ì•ˆì „í•¨<br/>Safe]
        G[ë©±ë“±ì„±<br/>Idempotent]
        H[ë³€ê²½ ë°œìƒ<br/>Non-Safe]
    end
    
    A --> F
    A --> G
    B --> H
    C --> G
    C --> H
    D --> H
    E --> G
    E --> H
    
    style A fill:#e8f5e8
    style B fill:#fff3e0
    style C fill:#e3f2fd
    style D fill:#f3e5f5
    style E fill:#ffebee
```

---

## Swagger ë¬¸ì„œí™”

### Swagger ì„¤ì •
```java
@Configuration
@EnableSwagger2  // Swagger í™œì„±í™”
public class SwaggerConfig {
    
    @Bean
    public Docket api() {
        return new Docket(DocumentationType.SWAGGER_2)  // Swagger 2.0 ì‚¬ìš©
                .select()
                .apis(RequestHandlerSelectors.basePackage("com.example.controller"))  // ìŠ¤ìº”í•  íŒ¨í‚¤ì§€
                .paths(PathSelectors.ant("/api/**"))  // ë¬¸ì„œí™”í•  ê²½ë¡œ íŒ¨í„´
                .build()
                .apiInfo(apiInfo());  // API ì •ë³´ ì„¤ì •
    }
    
    private ApiInfo apiInfo() {
        return new ApiInfoBuilder()
                .title("ì‚¬ìš©ì ê´€ë¦¬ API")  // API ì œëª©
                .description("ì‚¬ìš©ì CRUD ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” RESTful API")  // ì„¤ëª…
                .version("1.0.0")  // ë²„ì „
                .contact(new Contact("ê°œë°œíŒ€", "https://example.com", "dev@example.com"))
                .build();
    }
}
```

### Swagger ì• ë„ˆí…Œì´ì…˜ í™œìš©
```java
@RestController
@RequestMapping("/api/users")
@Api(tags = "ì‚¬ìš©ì ê´€ë¦¬")  // Swagger UIì—ì„œ ê·¸ë£¹ ì´ë¦„
public class UserApiController {
    
    @PostMapping
    @ApiOperation(value = "ì‚¬ìš©ì ìƒì„±", notes = "ìƒˆë¡œìš´ ì‚¬ìš©ìë¥¼ ë“±ë¡í•©ë‹ˆë‹¤")
    @ApiResponses({
        @ApiResponse(code = 201, message = "ì‚¬ìš©ì ìƒì„± ì„±ê³µ"),
        @ApiResponse(code = 400, message = "ì˜ëª»ëœ ìš”ì²­ ë°ì´í„°"),
        @ApiResponse(code = 409, message = "ì´ë©”ì¼ ì¤‘ë³µ")
    })
    public ResponseEntity<UserDto.Response> createUser(
            @ApiParam(value = "ì‚¬ìš©ì ìƒì„± ì •ë³´", required = true)
            @Valid @RequestBody UserDto.CreateRequest request) {
        
        UserDto.Response response = userService.createUser(request);
        return ResponseEntity.status(HttpStatus.CREATED).body(response);
    }
    
    @GetMapping
    @ApiOperation(value = "ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ", notes = "ë“±ë¡ëœ ëª¨ë“  ì‚¬ìš©ì ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤")
    public ResponseEntity<List<UserDto.Response>> getAllUsers(
            @ApiParam(value = "í˜ì´ì§€ ë²ˆí˜¸", defaultValue = "0")
            @RequestParam(defaultValue = "0") int page,
            
            @ApiParam(value = "í˜ì´ì§€ í¬ê¸°", defaultValue = "10")
            @RequestParam(defaultValue = "10") int size) {
        
        List<UserDto.Response> users = userService.getAllUsers(page, size);
        return ResponseEntity.ok(users);
    }
}
```

### DTOì— Swagger ë¬¸ì„œí™”
```java
public class UserDto {
    
    @ApiModel(description = "ì‚¬ìš©ì ìƒì„± ìš”ì²­")
    public record CreateRequest(
        @ApiModelProperty(value = "ì‚¬ìš©ì ì´ë¦„", required = true, example = "ê¹€ì² ìˆ˜")
        @NotBlank(message = "ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
        String name,
        
        @ApiModelProperty(value = "ì´ë©”ì¼ ì£¼ì†Œ", required = true, example = "kim@example.com")
        @Email(message = "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤")
        @NotBlank(message = "ì´ë©”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
        String email
    ) {}
    
    @ApiModel(description = "ì‚¬ìš©ì ì‘ë‹µ ì •ë³´")
    public record Response(
        @ApiModelProperty(value = "ì‚¬ìš©ì ID", example = "1")
        Long id,
        
        @ApiModelProperty(value = "ì‚¬ìš©ì ì´ë¦„", example = "ê¹€ì² ìˆ˜")
        String name,
        
        @ApiModelProperty(value = "ì´ë©”ì¼ ì£¼ì†Œ", example = "kim@example.com")
        String email,
        
        @ApiModelProperty(value = "ìƒì„± ì‹œê°„", example = "2025-09-02T10:30:00")
        LocalDateTime createdAt
    ) {
        public static Response from(User user) {
            return new Response(
                user.getId(),
                user.getName(),
                user.getEmail(),
                user.getCreatedAt()
            );
        }
    }
}
```

---

## í˜„ì—… íŠ¸ë Œë“œ ë° ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 2025ë…„ API ê°œë°œ íŠ¸ë Œë“œ

#### 1. API-First ì„¤ê³„
í˜„ì—…ì—ì„œëŠ” APIë¥¼ ì œí’ˆì²˜ëŸ¼ ì·¨ê¸‰í•˜ëŠ” **API-as-a-Product (AaaP)** ì ‘ê·¼ë²•ì´ ì£¼ë¥˜ê°€ ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” API ì†Œë¹„ìë¥¼ ë‹¨ìˆœí•œ í†µí•©ì´ ì•„ë‹Œ ì‚¬ìš©ìë¡œ ë°”ë¼ë³´ëŠ” ê´€ì ì…ë‹ˆë‹¤.

#### 2. ë³´ì•ˆ ê°•í™”
- **Zero-Trust ì•„í‚¤í…ì²˜**: ê¸°ë³¸ì ìœ¼ë¡œ ì•„ë¬´ê²ƒë„ ì‹ ë¢°í•˜ì§€ ì•Šê³  ì§€ì†ì ì¸ ê²€ì¦ ìˆ˜í–‰
- **OAuth 2.0 + JWT**: í† í° ê¸°ë°˜ ì¸ì¦/ì¸ê°€ê°€ í‘œì¤€
- **API ê²Œì´íŠ¸ì›¨ì´**: ëª¨ë“  API í˜¸ì¶œì˜ ì¤‘ì•™ ì§‘ì¤‘ ê´€ë¦¬

#### 3. í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼ë²•
REST APIì™€ GraphQLì„ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹ì´ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤. RESTëŠ” ë°ì´í„° ì†ŒìŠ¤ ì—­í• , GraphQLì€ ê²Œì´íŠ¸ì›¨ì´ ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.

### í˜„ì—…ì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ  ìŠ¤íƒ

#### Backend Framework
```java
// Spring Boot 3.x (í˜„ì¬ LTS)
@SpringBootApplication
public class RestApiApplication {
    public static void main(String[] args) {
        SpringApplication.run(RestApiApplication.class, args);
    }
}
```

#### ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼
```java
// Spring Data JPA (ê°€ì¥ ë³´í¸ì )
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    // ë³µì¡í•œ ì¿¼ë¦¬ëŠ” @Query ì• ë„ˆí…Œì´ì…˜ ì‚¬ìš©
    @Query("SELECT u FROM User u WHERE u.email = :email AND u.active = true")
    Optional<User> findActiveUserByEmail(@Param("email") String email);
}

// QueryDSL (ë³µì¡í•œ ë™ì  ì¿¼ë¦¬ìš©)
@Repository
public class UserQueryRepository {
    private final JPAQueryFactory queryFactory;
    
    public UserQueryRepository(JPAQueryFactory queryFactory) {
        this.queryFactory = queryFactory;
    }
    
    // ë³µì¡í•œ ê²€ìƒ‰ ì¡°ê±´ì„ ë™ì ìœ¼ë¡œ êµ¬ì„±
    public List<User> findUsersWithConditions(String name, String email, Boolean active) {
        QUser user = QUser.user;  // QueryDSLì´ ìƒì„±í•œ Qí´ë˜ìŠ¤
        
        BooleanBuilder builder = new BooleanBuilder();  // ë™ì  ì¡°ê±´ ë¹Œë”
        
        if (name != null) {
            builder.and(user.name.containsIgnoreCase(name));  // ì´ë¦„ í¬í•¨ ê²€ìƒ‰
        }
        if (email != null) {
            builder.and(user.email.eq(email));  // ì´ë©”ì¼ ì •í™• ë§¤ì¹˜
        }
        if (active != null) {
            builder.and(user.active.eq(active));  // í™œì„± ìƒíƒœ í•„í„°
        }
        
        return queryFactory
                .selectFrom(user)  // User ì—”í‹°í‹° ì„ íƒ
                .where(builder)    // ë™ì  ì¡°ê±´ ì ìš©
                .orderBy(user.createdAt.desc())  // ìƒì„±ì¼ ë‚´ë¦¼ì°¨ìˆœ
                .fetch();  // ì‹¤í–‰ ë° ê²°ê³¼ ë°˜í™˜
    }
}
```

#### ì‘ë‹µ í˜•íƒœ í‘œì¤€í™”
```java
// í˜„ì—…ì—ì„œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ê³µí†µ ì‘ë‹µ í˜•íƒœ
public record ApiResponse<T>(
    boolean success,      // ì„±ê³µ ì—¬ë¶€
    String message,       // ì‘ë‹µ ë©”ì‹œì§€
    T data,              // ì‹¤ì œ ë°ì´í„°
    String timestamp     // ì‘ë‹µ ì‹œê°„
) {
    // ì„±ê³µ ì‘ë‹µ ìƒì„± í—¬í¼ ë©”ì„œë“œ
    public static <T> ApiResponse<T> success(T data) {
        return new ApiResponse<>(
            true, 
            "ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤", 
            data, 
            LocalDateTime.now().toString()
        );
    }
    
    public static <T> ApiResponse<T> success(String message, T data) {
        return new ApiResponse<>(true, message, data, LocalDateTime.now().toString());
    }
    
    // ì‹¤íŒ¨ ì‘ë‹µ ìƒì„± í—¬í¼ ë©”ì„œë“œ
    public static <T> ApiResponse<T> failure(String message) {
        return new ApiResponse<>(false, message, null, LocalDateTime.now().toString());
    }
}

// ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‚¬ìš©
@PostMapping
public ResponseEntity<ApiResponse<UserDto.Response>> createUser(
        @Valid @RequestBody UserDto.CreateRequest request) {
    
    UserDto.Response user = userService.createUser(request);
    ApiResponse<UserDto.Response> response = ApiResponse.success("ì‚¬ìš©ìê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤", user);
    
    return ResponseEntity.status(HttpStatus.CREATED).body(response);
}
```

#### í˜ì´ì§• ì²˜ë¦¬
```java
// Spring Data JPAì˜ Pageable í™œìš©
@GetMapping
public ResponseEntity<ApiResponse<Page<UserDto.Response>>> getUsers(
        @PageableDefault(size = 20, sort = "createdAt", direction = Sort.Direction.DESC)
        Pageable pageable,  // í˜ì´ì§• ì •ë³´ ìë™ ë°”ì¸ë”©
        
        @RequestParam(required = false) String name) {  // ê²€ìƒ‰ ì¡°ê±´
    
    Page<UserDto.Response> users = userService.getUsers(pageable, name);
    return ResponseEntity.ok(ApiResponse.success(users));
}

// Serviceì—ì„œ í˜ì´ì§• ì²˜ë¦¬
@Transactional(readOnly = true)
public Page<UserDto.Response> getUsers(Pageable pageable, String name) {
    Page<User> userPage;
    
    if (name != null && !name.trim().isEmpty()) {
        // ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰ + í˜ì´ì§•
        userPage = userRepository.findByNameContaining(name.trim(), pageable);
    } else {
        // ì „ì²´ ì¡°íšŒ + í˜ì´ì§•
        userPage = userRepository.findAll(pageable);
    }
    
    // Page<Entity>ë¥¼ Page<DTO>ë¡œ ë³€í™˜
    return userPage.map(UserDto.Response::from);
}
```

### í˜„ì—… ë³´ì•ˆ ì ìš© ì‚¬ë¡€

#### JWT í† í° ê¸°ë°˜ ì¸ì¦
```java
// JWT ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤
@Component
public class JwtTokenProvider {
    
    @Value("${app.jwt.secret}")  // application.ymlì—ì„œ ë¹„ë°€í‚¤ ì£¼ì…
    private String jwtSecret;
    
    @Value("${app.jwt.expiration}")  // í† í° ë§Œë£Œ ì‹œê°„
    private long jwtExpirationInMs;
    
    // í† í° ìƒì„±
    public String generateToken(String username) {
        Date expiryDate = new Date(System.currentTimeMillis() + jwtExpirationInMs);
        
        return Jwts.builder()
                .setSubject(username)  // ì‚¬ìš©ì ì‹ë³„ì
                .setIssuedAt(new Date())  // ë°œê¸‰ ì‹œê°„
                .setExpiration(expiryDate)  // ë§Œë£Œ ì‹œê°„
                .signWith(SignatureAlgorithm.HS256, jwtSecret)  // ì„œëª… ì•Œê³ ë¦¬ì¦˜
                .compact();  // í† í° ë¬¸ìì—´ ìƒì„±
    }
    
    // í† í°ì—ì„œ ì‚¬ìš©ìëª… ì¶”ì¶œ
    public String getUsernameFromToken(String token) {
        Claims claims = Jwts.parser()
                .setSigningKey(jwtSecret)  // ì„œëª… ê²€ì¦ìš© í‚¤
                .parseClaimsJws(token)     // í† í° íŒŒì‹±
                .getBody();                // í˜ì´ë¡œë“œ ì¶”ì¶œ
        
        return claims.getSubject();  // ì‚¬ìš©ìëª… ë°˜í™˜
    }
    
    // í† í° ìœ íš¨ì„± ê²€ì¦
    public boolean validateToken(String token) {
        try {
            Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token);
            return true;  // íŒŒì‹± ì„±ê³µ = ìœ íš¨í•œ í† í°
        } catch (JwtException | IllegalArgumentException e) {
            return false;  // íŒŒì‹± ì‹¤íŒ¨ = ë¬´íš¨í•œ í† í°
        }
    }
}

// ì¸ì¦ì´ í•„ìš”í•œ APIì— ì ìš©
@RestController
@RequestMapping("/api/users")
public class SecureUserController {
    
    @PostMapping("/profile")
    @PreAuthorize("hasRole('USER')")  // USER ê¶Œí•œ í•„ìš”
    public ResponseEntity<UserDto.Response> updateProfile(
            @AuthenticationPrincipal UserDetails userDetails,  // í˜„ì¬ ë¡œê·¸ì¸ ì‚¬ìš©ì
            @Valid @RequestBody UserDto.UpdateRequest request) {
        
        // í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ì •ë³´ë§Œ ìˆ˜ì • ê°€ëŠ¥
        String currentUsername = userDetails.getUsername();
        UserDto.Response response = userService.updateUserProfile(currentUsername, request);
        
        return ResponseEntity.ok(ApiResponse.success(response));
    }
}
```

#### API ë²„ì „ ê´€ë¦¬
```java
// URL ê²½ë¡œ ê¸°ë°˜ ë²„ì „ ê´€ë¦¬ (ê°€ì¥ ì¼ë°˜ì )
@RestController
@RequestMapping("/api/v1/users")  // v1 ë²„ì „
public class UserControllerV1 {
    // ê¸°ì¡´ API ìœ ì§€
}

@RestController
@RequestMapping("/api/v2/users")  // v2 ë²„ì „
public class UserControllerV2 {
    // ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
    
    @GetMapping
    public ResponseEntity<ApiResponse<PagedResponse<UserDto.ResponseV2>>> getUsers(
            @PageableDefault(size = 20) Pageable pageable) {
        // v2ì—ì„œëŠ” ë” í’ë¶€í•œ ì‘ë‹µ ì œê³µ
        return ResponseEntity.ok(ApiResponse.success(userService.getUsersV2(pageable)));
    }
}

// í—¤ë” ê¸°ë°˜ ë²„ì „ ê´€ë¦¬ (ì„ íƒì )
@RestController
@RequestMapping("/api/users")
public class UserController {
    
    @GetMapping(headers = "API-Version=1")
    public ResponseEntity<List<UserDto.Response>> getUsersV1() {
        return ResponseEntity.ok(userService.getAllUsers());
    }
    
    @GetMapping(headers = "API-Version=2")
    public ResponseEntity<PagedResponse<UserDto.ResponseV2>> getUsersV2(Pageable pageable) {
        return ResponseEntity.ok(userService.getUsersV2(pageable));
    }
}
```

### í˜„ì—… ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

#### êµ¬ì¡°í™”ëœ ë¡œê¹…
```java
@RestController
@Slf4j  // Lombokì˜ ë¡œê¹… ì• ë„ˆí…Œì´ì…˜
public class UserApiController {
    
    @PostMapping
    public ResponseEntity<ApiResponse<UserDto.Response>> createUser(
            @Valid @RequestBody UserDto.CreateRequest request) {
        
        // ìš”ì²­ ì‹œì‘ ë¡œê·¸ (êµ¬ì¡°í™”ëœ í˜•íƒœ)
        log.info("ì‚¬ìš©ì ìƒì„± ìš”ì²­ ì‹œì‘ - email: {}", request.email());
        
        try {
            UserDto.Response response = userService.createUser(request);
            
            // ì„±ê³µ ë¡œê·¸
            log.info("ì‚¬ìš©ì ìƒì„± ì™„ë£Œ - userId: {}, email: {}", 
                    response.id(), response.email());
            
            return ResponseEntity.status(HttpStatus.CREATED)
                    .body(ApiResponse.success("ì‚¬ìš©ìê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤", response));
                    
        } catch (IllegalArgumentException e) {
            // ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸ ë¡œê·¸
            log.warn("ì‚¬ìš©ì ìƒì„± ì‹¤íŒ¨ - email: {}, reason: {}", 
                    request.email(), e.getMessage());
            throw e;
            
        } catch (Exception e) {
            // ì‹œìŠ¤í…œ ì˜ˆì™¸ ë¡œê·¸
            log.error("ì‚¬ìš©ì ìƒì„± ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ - email: {}", 
                    request.email(), e);
            throw new RuntimeException("ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
        }
    }
}
```

#### ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
```java
// AOPë¥¼ í™œìš©í•œ ì‹¤í–‰ ì‹œê°„ ì¸¡ì •
@Aspect
@Component
@Slf4j
public class PerformanceAspect {
    
    @Around("@annotation(org.springframework.web.bind.annotation.RequestMapping) || " +
            "@annotation(org.springframework.web.bind.annotation.GetMapping) || " +
            "@annotation(org.springframework.web.bind.annotation.PostMapping)")
    public Object measureExecutionTime(ProceedingJoinPoint joinPoint) throws Throwable {
        long startTime = System.currentTimeMillis();
        
        try {
            Object result = joinPoint.proceed();  // ì‹¤ì œ ë©”ì„œë“œ ì‹¤í–‰
            
            long executionTime = System.currentTimeMillis() - startTime;
            
            // ì„±ëŠ¥ ë¡œê·¸
            log.info("API ì‹¤í–‰ ì™„ë£Œ - method: {}, executionTime: {}ms", 
                    joinPoint.getSignature().getName(), executionTime);
                    
            return result;
            
        } catch (Exception e) {
            long executionTime = System.currentTimeMillis() - startTime;
            log.error("API ì‹¤í–‰ ì‹¤íŒ¨ - method: {}, executionTime: {}ms", 
                    joinPoint.getSignature().getName(), executionTime);
            throw e;
        }
    }
}
```

### API ë¬¸ì„œí™” í˜„ì—… ë„êµ¬

#### OpenAPI 3.0 (Swaggerì˜ í›„ì†)
```java
// ìµœì‹  SpringDoc OpenAPI ì‚¬ìš©
@OpenAPIDefinition(
    info = @Info(
        title = "ì‚¬ìš©ì ê´€ë¦¬ API",
        version = "2.0",
        description = "ì‚¬ìš©ì CRUD ë° ì¸ì¦ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” RESTful API"
    ),
    servers = {
        @Server(url = "https://api.example.com", description = "í”„ë¡œë•ì…˜ ì„œë²„"),
        @Server(url = "https://staging-api.example.com", description = "ìŠ¤í…Œì´ì§• ì„œë²„"),
        @Server(url = "http://localhost:8080", description = "ë¡œì»¬ ê°œë°œ ì„œë²„")
    }
)
@SecurityScheme(
    name = "bearerAuth",
    type = SecuritySchemeType.HTTP,
    bearerFormat = "JWT",
    scheme = "bearer"
)
public class OpenApiConfig {
}

// ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ìƒì„¸í•œ ë¬¸ì„œí™”
@RestController
@RequestMapping("/api/v2/users")
@Tag(name = "ì‚¬ìš©ì ê´€ë¦¬", description = "ì‚¬ìš©ì CRUD ë° í”„ë¡œí•„ ê´€ë¦¬ API")
public class UserControllerV2 {
    
    @Operation(
        summary = "ì‚¬ìš©ì ìƒì„±",
        description = "ìƒˆë¡œìš´ ì‚¬ìš©ì ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ë©”ì¼ì€ ì¤‘ë³µë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
    )
    @ApiResponses({
        @ApiResponse(responseCode = "201", description = "ì‚¬ìš©ì ìƒì„± ì„±ê³µ",
            content = @Content(schema = @Schema(implementation = UserDto.Response.class))),
        @ApiResponse(responseCode = "400", description = "ì˜ëª»ëœ ìš”ì²­ ë°ì´í„°"),
        @ApiResponse(responseCode = "409", description = "ì´ë©”ì¼ ì¤‘ë³µ")
    })
    @PostMapping
    public ResponseEntity<ApiResponse<UserDto.Response>> createUser(
            @Parameter(description = "ì‚¬ìš©ì ìƒì„± ì •ë³´", required = true)
            @Valid @RequestBody UserDto.CreateRequest request) {
        
        UserDto.Response response = userService.createUser(request);
        return ResponseEntity.status(HttpStatus.CREATED)
                .body(ApiResponse.success("ì‚¬ìš©ìê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤", response));
    }
}
```

### í˜„ì—… í…ŒìŠ¤íŒ… ì „ëµ

#### ê³„ì¸µë³„ í…ŒìŠ¤íŠ¸
```java
// 1. Controller í…ŒìŠ¤íŠ¸ (Web Layer)
@WebMvcTest(UserApiController.class)  // ì›¹ ê³„ì¸µë§Œ í…ŒìŠ¤íŠ¸
class UserApiControllerTest {
    
    @Autowired
    private MockMvc mockMvc;  // HTTP ìš”ì²­ ì‹œë®¬ë ˆì´ì…˜
    
    @MockBean
    private UserService userService;  // ServiceëŠ” Mockìœ¼ë¡œ ëŒ€ì²´
    
    @Test
    @DisplayName("ì‚¬ìš©ì ìƒì„± API í…ŒìŠ¤íŠ¸")
    void createUser_Success() throws Exception {
        // Given: í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¤€ë¹„
        UserDto.CreateRequest request = new UserDto.CreateRequest("ê¹€ì² ìˆ˜", "kim@test.com");
        UserDto.Response expectedResponse = new UserDto.Response(1L, "ê¹€ì² ìˆ˜", "kim@test.com", LocalDateTime.now());
        
        when(userService.createUser(any(UserDto.CreateRequest.class)))
                .thenReturn(expectedResponse);  // Mock ë™ì‘ ì •ì˜
        
        // When & Then: API í˜¸ì¶œ ë° ê²€ì¦
        mockMvc.perform(post("/api/users")  // POST ìš”ì²­
                .contentType(MediaType.APPLICATION_JSON)  // Content-Type í—¤ë”
                .content("""
                    {
                        "name": "ê¹€ì² ìˆ˜",
                        "email": "kim@test.com"
                    }
                    """))  // ìš”ì²­ Body
                .andExpect(status().isCreated())  // 201 ìƒíƒœì½”ë“œ ê¸°ëŒ€
                .andExpect(jsonPath("$.success").value(true))  // JSON ì‘ë‹µ ê²€ì¦
                .andExpect(jsonPath("$.data.name").value("ê¹€ì² ìˆ˜"))
                .andExpect(jsonPath("$.data.email").value("kim@test.com"));
        
        // Service ë©”ì„œë“œ í˜¸ì¶œ ê²€ì¦
        verify(userService).createUser(any(UserDto.CreateRequest.class));
    }
}

// 2. Service í…ŒìŠ¤íŠ¸ (Business Logic)
@ExtendWith(MockitoExtension.class)  // Mockito í™•ì¥
class UserServiceTest {
    
    @Mock
    private UserRepository userRepository;  // Repository Mock
    
    @InjectMocks
    private UserService userService;  // í…ŒìŠ¤íŠ¸ ëŒ€ìƒ (Mockì´ ì£¼ì…ë¨)
    
    @Test
    @DisplayName("ì´ë©”ì¼ ì¤‘ë³µì‹œ ì˜ˆì™¸ ë°œìƒ")
    void createUser_EmailDuplicate_ThrowsException() {
        // Given
        UserDto.CreateRequest request = new UserDto.CreateRequest("ê¹€ì² ìˆ˜", "kim@test.com");
        when(userRepository.existsByEmail("kim@test.com")).thenReturn(true);  // ì¤‘ë³µ ìƒí™©
        
        // When & Then
        assertThatThrownBy(() -> userService.createUser(request))
                .isInstanceOf(IllegalArgumentException.class)
                .hasMessage("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤");
        
        // Repository í˜¸ì¶œ ê²€ì¦
        verify(userRepository).existsByEmail("kim@test.com");
        verify(userRepository, never()).save(any(User.class));  // saveëŠ” í˜¸ì¶œë˜ì§€ ì•Šì•„ì•¼ í•¨
    }
}

// 3. Repository í…ŒìŠ¤íŠ¸ (Data Layer)
@DataJpaTest  // JPA ê´€ë ¨ ì„¤ì •ë§Œ ë¡œë“œ
class UserRepositoryTest {
    
    @Autowired
    private TestEntityManager entityManager;  // í…ŒìŠ¤íŠ¸ìš© EntityManager
    
    @Autowired
    private UserRepository userRepository;
    
    @Test
    @DisplayName("ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì¡°íšŒ í…ŒìŠ¤íŠ¸")
    void findByEmail_Success() {
        // Given: í…ŒìŠ¤íŠ¸ ë°ì´í„° ì§ì ‘ ìƒì„±
        User user = new User(null, "ê¹€ì² ìˆ˜", "kim@test.com", null, null);
        entityManager.persistAndFlush(user);  // í…ŒìŠ¤íŠ¸ DBì— ì €ì¥
        
        // When: Repository ë©”ì„œë“œ í˜¸ì¶œ
        Optional<User> found = userRepository.findByEmail("kim@test.com");
        
        // Then: ê²°ê³¼ ê²€ì¦
        assertThat(found).isPresent();
        assertThat(found.get().getName()).isEqualTo("ê¹€ì² ìˆ˜");
        assertThat(found.get().getEmail()).isEqualTo("kim@test.com");
    }
}
```

### í˜„ì—… ë°°í¬ ë° ìš´ì˜

#### Docker ì»¨í…Œì´ë„ˆí™”
```dockerfile
# í˜„ì—…ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë©€í‹° ìŠ¤í…Œì´ì§€ Dockerfile
FROM openjdk:17-jdk-slim as builder

# ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •
WORKDIR /app

# Gradle ë˜í¼ì™€ ë¹Œë“œ íŒŒì¼ ë³µì‚¬
COPY gradlew .
COPY gradle gradle
COPY build.gradle .
COPY settings.gradle .

# ì˜ì¡´ì„± ë‹¤ìš´ë¡œë“œ (ìºì‹œ ìµœì í™”)
RUN ./gradlew dependencies --no-daemon

# ì†ŒìŠ¤ ì½”ë“œ ë³µì‚¬ ë° ë¹Œë“œ
COPY src src
RUN ./gradlew bootJar --no-daemon

# ì‹¤í–‰ ìŠ¤í…Œì´ì§€
FROM openjdk:17-jre-slim

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‚¬ìš©ì ìƒì„± (ë³´ì•ˆ)
RUN addgroup --system spring && adduser --system spring --ingroup spring
USER spring:spring

# ë¹Œë“œëœ JAR íŒŒì¼ ë³µì‚¬
COPY --from=builder /app/build/libs/*.jar app.jar

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ëª…ë ¹
ENTRYPOINT ["java", "-jar", "/app.jar"]

# í¬íŠ¸ ë…¸ì¶œ
EXPOSE 8080
```

#### Kubernetes ë°°í¬ ì„¤ì •
```yaml
# deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: user-api
  labels:
    app: user-api
spec:
  replicas: 3  # 3ê°œì˜ Podìœ¼ë¡œ í™•ì¥
  selector:
    matchLabels:
      app: user-api
  template:
    metadata:
      labels:
        app: user-api
    spec:
      containers:
      - name: user-api
        image: your-registry/user-api:latest
        ports:
        - containerPort: 8080
        env:  # í™˜ê²½ë³€ìˆ˜ ì„¤ì •
        - name: SPRING_PROFILES_ACTIVE
          value: "production"
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:  # ë¯¼ê°ì •ë³´ëŠ” Secretìœ¼ë¡œ ê´€ë¦¬
              name: database-secret
              key: url
        resources:  # ë¦¬ì†ŒìŠ¤ ì œí•œ
          requests:
            memory: "512Mi"
            cpu: "250m"
          limits:
            memory: "1Gi"
            cpu: "500m"
        livenessProbe:  # í—¬ìŠ¤ì²´í¬
          httpGet:
            path: /actuator/health
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
```

### API ê²Œì´íŠ¸ì›¨ì´ íŒ¨í„´

#### Spring Cloud Gateway ì„¤ì •
```yaml
# application.yml
spring:
  cloud:
    gateway:
      routes:
      - id: user-service  # ë¼ìš°íŠ¸ ID
        uri: http://user-service:8080  # ì‹¤ì œ ì„œë¹„ìŠ¤ ì£¼ì†Œ
        predicates:
        - Path=/api/users/**  # ê²½ë¡œ ë§¤ì¹­ ì¡°ê±´
        filters:
        - name: RequestRateLimiter  # ìš”ì²­ ì œí•œ
          args:
            rate-limiter: "#{@redisRateLimiter}"
            key-resolver: "#{@userKeyResolver}"
        - AddResponseHeader=X-Response-Default-Foo, Default-Bar  # í—¤ë” ì¶”ê°€
        
      - id: auth-service
        uri: http://auth-service:8080
        predicates:
        - Path=/api/auth/**
        filters:
        - name: CircuitBreaker  # ì„œí‚· ë¸Œë ˆì´ì»¤ íŒ¨í„´
          args:
            name: auth-circuit-breaker
            fallbackUri: forward:/fallback/auth
```

### í˜„ì—…ì—ì„œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬

#### í•„ìˆ˜ ì˜ì¡´ì„± (build.gradle)
```gradle
dependencies {
    // Spring Boot ê¸°ë³¸
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-validation'
    
    // ë³´ì•ˆ
    implementation 'org.springframework.boot:spring-boot-starter-security'
    implementation 'io.jsonwebtoken:jjwt-api:0.11.5'
    implementation 'io.jsonwebtoken:jjwt-impl:0.11.5'
    implementation 'io.jsonwebtoken:jjwt-jackson:0.11.5'
    
    // ë¬¸ì„œí™” (OpenAPI 3.0)
    implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.2.0'
    
    // ë°ì´í„°ë² ì´ìŠ¤
    runtimeOnly 'com.mysql:mysql-connector-j'  // MySQL
    // ë˜ëŠ” runtimeOnly 'org.postgresql:postgresql'  // PostgreSQL
    
    // ê°œë°œ í¸ì˜
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'
    
    // ìºì‹±
    implementation 'org.springframework.boot:spring-boot-starter-data-redis'
    
    // ëª¨ë‹ˆí„°ë§
    implementation 'org.springframework.boot:spring-boot-starter-actuator'
    implementation 'io.micrometer:micrometer-registry-prometheus'  // ë©”íŠ¸ë¦­ ìˆ˜ì§‘
    
    // í…ŒìŠ¤íŠ¸
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    testImplementation 'org.testcontainers:junit-jupiter'  // í†µí•© í…ŒìŠ¤íŠ¸ìš©
    testImplementation 'org.testcontainers:mysql'
}
```

### ì „ì²´ API ì²˜ë¦¬ íë¦„

```mermaid
flowchart TD
    A[í´ë¼ì´ì–¸íŠ¸ ìš”ì²­] --> B{API Gateway}
    B --> C[ì¸ì¦/ì¸ê°€ ê²€ì¦]
    C --> D{ìœ íš¨í•œ í† í°?}
    D -->|No| E[401 Unauthorized]
    D -->|Yes| F[Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜]
    
    F --> G[@RestController]
    G --> H[ìš”ì²­ ë°ì´í„° ë°”ì¸ë”©<br/>@PathVariable, @RequestParam, @RequestBody]
    H --> I[ìœ íš¨ì„± ê²€ì¦<br/>@Valid]
    I --> J{ê²€ì¦ í†µê³¼?}
    J -->|No| K[400 Bad Request]
    J -->|Yes| L[@Service ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§]
    
    L --> M[@Repository ë°ì´í„° ì ‘ê·¼]
    M --> N[(ë°ì´í„°ë² ì´ìŠ¤)]
    N --> O[Entity ì¡°íšŒ/ì €ì¥]
    O --> P[Entity â†’ DTO ë³€í™˜]
    P --> Q[JSON ì§ë ¬í™”]
    Q --> R[HTTP ì‘ë‹µ]
    
    style G fill:#e1f5fe
    style L fill:#f3e5f5
    style M fill:#e8f5e8
    style N fill:#fff3e0
```

### ì—ëŸ¬ ì²˜ë¦¬ ë° ì˜ˆì™¸ ìƒí™©

#### ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ê¸°
```java
@RestControllerAdvice  // ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬
@Slf4j
public class GlobalExceptionHandler {
    
    // ì—”í‹°í‹°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°
    @ExceptionHandler(EntityNotFoundException.class)
    public ResponseEntity<ApiResponse<Void>> handleEntityNotFound(EntityNotFoundException e) {
        log.warn("Entity not found: {}", e.getMessage());
        
        ApiResponse<Void> response = ApiResponse.failure(e.getMessage());
        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(response);
    }
    
    // ìœ íš¨ì„± ê²€ì¦ ì‹¤íŒ¨
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<ApiResponse<Map<String, String>>> handleValidationErrors(
            MethodArgumentNotValidException e) {
        
        Map<String, String> errors = new HashMap<>();
        
        // ëª¨ë“  í•„ë“œ ì—ëŸ¬ë¥¼ ìˆ˜ì§‘
        e.getBindingResult().getFieldErrors().forEach(error -> {
            errors.put(error.getField(), error.getDefaultMessage());
        });
        
        log.warn("Validation failed: {}", errors);
        
        ApiResponse<Map<String, String>> response = 
                ApiResponse.failure("ì…ë ¥ ë°ì´í„°ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤").withData(errors);
        
        return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(response);
    }
    
    // ë°ì´í„°ë² ì´ìŠ¤ ì œì•½ ì¡°ê±´ ìœ„ë°˜
    @ExceptionHandler(DataIntegrityViolationException.class)
    public ResponseEntity<ApiResponse<Void>> handleDataIntegrityViolation(
            DataIntegrityViolationException e) {
        
        log.error("Data integrity violation", e);
        
        String message = "ë°ì´í„° ë¬´ê²°ì„± ì œì•½ ì¡°ê±´ì„ ìœ„ë°˜í–ˆìŠµë‹ˆë‹¤";
        if (e.getMessage().contains("Duplicate entry")) {
            message = "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë°ì´í„°ì…ë‹ˆë‹¤";
        }
        
        ApiResponse<Void> response = ApiResponse.failure(message);
        return ResponseEntity.status(HttpStatus.CONFLICT).body(response);
    }
    
    // ì˜ˆìƒì¹˜ ëª»í•œ ì„œë²„ ì˜¤ë¥˜
    @ExceptionHandler(Exception.class)
    public ResponseEntity<ApiResponse<Void>> handleGeneralException(Exception e) {
        log.error("Unexpected error occurred", e);
        
        ApiResponse<Void> response = ApiResponse.failure("ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤");
        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(response);
    }
}
```

### í˜„ì—… ìºì‹± ì „ëµ

#### Redisë¥¼ í™œìš©í•œ ìºì‹±
```java
@Service
@Transactional(readOnly = true)
public class UserService {
    
    private final UserRepository userRepository;
    private final RedisTemplate<String, Object> redisTemplate;
    
    // ìì£¼ ì¡°íšŒë˜ëŠ” ë°ì´í„°ëŠ” ìºì‹œ ì ìš©
    @Cacheable(value = "users", key = "#id")  // Spring Cache ì¶”ìƒí™”
    public UserDto.Response getUserById(Long id) {
        User user = userRepository.findById(id)
                .orElseThrow(() -> new EntityNotFoundException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"));
        
        log.info("Databaseì—ì„œ ì‚¬ìš©ì ì¡°íšŒ: {}", id);  // ìºì‹œ ë¯¸ìŠ¤ì‹œì—ë§Œ ë¡œê·¸ ì¶œë ¥
        return UserDto.Response.from(user);
    }
    
    // ìˆ˜ì •ì‹œ ìºì‹œ ë¬´íš¨í™”
    @CacheEvict(value = "users", key = "#id")  // í•´ë‹¹ í‚¤ì˜ ìºì‹œ ì‚­ì œ
    @Transactional
    public UserDto.Response updateUser(Long id, UserDto.UpdateRequest request) {
        User user = userRepository.findById(id)
                .orElseThrow(() -> new EntityNotFoundException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"));
        
        user.updateInfo(request.name(), request.email());
        return UserDto.Response.from(user);
    }
    
    // ìˆ˜ë™ ìºì‹œ ê´€ë¦¬ (ë³µì¡í•œ ë¡œì§ì´ í•„ìš”í•œ ê²½ìš°)
    public List<UserDto.Response> getActiveUsers() {
        String cacheKey = "active_users";
        
        // ìºì‹œì—ì„œ ë¨¼ì € ì¡°íšŒ
        List<UserDto.Response> cachedUsers = (List<UserDto.Response>) 
                redisTemplate.opsForValue().get(cacheKey);
        
        if (cachedUsers != null) {
            log.info("ìºì‹œì—ì„œ í™œì„± ì‚¬ìš©ì ëª©ë¡ ë°˜í™˜");
            return cachedUsers;
        }
        
        // ìºì‹œ ë¯¸ìŠ¤ì‹œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¡°íšŒ
        List<UserDto.Response> users = userRepository.findByActiveTrue()
                .stream()
                .map(UserDto.Response::from)
                .toList();
        
        // ìºì‹œì— ì €ì¥ (10ë¶„ TTL)
        redisTemplate.opsForValue().set(cacheKey, users, Duration.ofMinutes(10));
        log.info("ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í™œì„± ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ í›„ ìºì‹œ ì €ì¥");
        
        return users;
    }
}
```

### í˜„ì—… API ì„¤ê³„ ê°€ì´ë“œë¼ì¸

#### RESTful URL ì„¤ê³„ ì›ì¹™
```
âœ… ì¢‹ì€ URL ì„¤ê³„
GET    /api/users              # ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ
GET    /api/users/123          # íŠ¹ì • ì‚¬ìš©ì ì¡°íšŒ
POST   /api/users              # ìƒˆ ì‚¬ìš©ì ìƒì„±
PUT    /api/users/123          # ì‚¬ìš©ì ì „ì²´ ì •ë³´ ìˆ˜ì •
PATCH  /api/users/123          # ì‚¬ìš©ì ë¶€ë¶„ ì •ë³´ ìˆ˜ì •
DELETE /api/users/123          # ì‚¬ìš©ì ì‚­ì œ

# ì¤‘ì²© ë¦¬ì†ŒìŠ¤
GET    /api/users/123/posts    # íŠ¹ì • ì‚¬ìš©ìì˜ ê²Œì‹œê¸€ ëª©ë¡
POST   /api/users/123/posts    # íŠ¹ì • ì‚¬ìš©ìì˜ ìƒˆ ê²Œì‹œê¸€ ì‘ì„±

âŒ í”¼í•´ì•¼ í•  URL ì„¤ê³„
GET    /api/getUsers            # ë™ì‚¬ ì‚¬ìš© ê¸ˆì§€
POST   /api/users/create        # ë¶ˆí•„ìš”í•œ ë™ì‚¬
GET    /api/users/123/delete    # GETìœ¼ë¡œ ì‚­ì œ ì‹œë„
POST   /api/users/search        # ì¡°íšŒëŠ” GET ì‚¬ìš©
```

#### HTTP ìƒíƒœ ì½”ë“œ ê°€ì´ë“œ
```java
@RestController
public class StatusCodeExampleController {
    
    // 200 OK: ì„±ê³µì ì¸ GET, PUT, PATCH
    @GetMapping("/users/{id}")
    public ResponseEntity<UserDto.Response> getUser(@PathVariable Long id) {
        UserDto.Response user = userService.getUserById(id);
        return ResponseEntity.ok(user);  // 200 OK
    }
    
    // 201 Created: ì„±ê³µì ì¸ POST (ë¦¬ì†ŒìŠ¤ ìƒì„±)
    @PostMapping("/users")
    public ResponseEntity<UserDto.Response> createUser(
            @Valid @RequestBody UserDto.CreateRequest request) {
        UserDto.Response user = userService.createUser(request);
        
        // Location í—¤ë”ì— ìƒì„±ëœ ë¦¬ì†ŒìŠ¤ì˜ URI í¬í•¨
        URI location = URI.create("/api/users/" + user.id());
        return ResponseEntity.created(location).body(user);  // 201 Created
    }
    
    // 204 No Content: ì„±ê³µì ì¸ DELETE (ì‘ë‹µ ë³¸ë¬¸ ì—†ìŒ)
    @DeleteMapping("/users/{id}")
    public ResponseEntity<Void> deleteUser(@PathVariable Long id) {
        userService.deleteUser(id);
        return ResponseEntity.noContent().build();  // 204 No Content
    }
    
    // 400 Bad Request: ì˜ëª»ëœ ìš”ì²­ ë°ì´í„°
    @PostMapping("/users/invalid-example")
    public ResponseEntity<ApiResponse<Void>> invalidRequest() {
        // ìœ íš¨ì„± ê²€ì¦ ì‹¤íŒ¨ì‹œ ìë™ìœ¼ë¡œ 400 ë°˜í™˜
        return ResponseEntity.badRequest()
                .body(ApiResponse.failure("ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤"));
    }
    
    // 404 Not Found: ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
    @GetMapping("/users/{id}/not-found-example")
    public ResponseEntity<ApiResponse<Void>> notFound(@PathVariable Long id) {
        return ResponseEntity.status(HttpStatus.NOT_FOUND)
                .body(ApiResponse.failure("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"));
    }
    
    // 409 Conflict: ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ìœ„ë°˜ (ì¤‘ë³µ ë“±)
    @PostMapping("/users/conflict-example")
    public ResponseEntity<ApiResponse<Void>> conflict() {
        return ResponseEntity.status(HttpStatus.CONFLICT)
                .body(ApiResponse.failure("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤"));
    }
    
    // 500 Internal Server Error: ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜
    // GlobalExceptionHandlerì—ì„œ ìë™ ì²˜ë¦¬
}
```

### í˜„ì—… ì„±ëŠ¥ ìµœì í™”

#### ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
```java
@Entity
@Table(name = "users", indexes = {
    @Index(name = "idx_user_email", columnList = "email"),  // ì´ë©”ì¼ ì¸ë±ìŠ¤
    @Index(name = "idx_user_created_at", columnList = "created_at")  // ìƒì„±ì¼ ì¸ë±ìŠ¤
})
public class User {
    // N+1 ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ í˜ì¹˜ ì „ëµ
    @OneToMany(mappedBy = "user", fetch = FetchType.LAZY)  // ì§€ì—° ë¡œë”©
    private List<Post> posts = new ArrayList<>();
    
    @ManyToOne(fetch = FetchType.LAZY)  // ì—°ê´€ ì—”í‹°í‹°ë„ ì§€ì—° ë¡œë”©
    @JoinColumn(name = "department_id")
    private Department department;
}

// N+1 ë¬¸ì œ í•´ê²°: í˜ì¹˜ ì¡°ì¸ ì‚¬ìš©
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    
    @Query("SELECT u FROM User u LEFT JOIN FETCH u.posts WHERE u.id = :id")
    Optional<User> findByIdWithPosts(@Param("id") Long id);  // í•œ ë²ˆì˜ ì¿¼ë¦¬ë¡œ postsê¹Œì§€ ì¡°íšŒ
    
    @Query("SELECT u FROM User u LEFT JOIN FETCH u.department WHERE u.active = true")
    List<User> findActiveUsersWithDepartment();  // ë¶€ì„œ ì •ë³´ê¹Œì§€ í•œë²ˆì— ì¡°íšŒ
}
```

#### ë¹„ë™ê¸° ì²˜ë¦¬
```java
@Service
public class AsyncUserService {
    
    // ë¹„ë™ê¸° ë©”ì„œë“œ ì„¤ì •
    @Async("taskExecutor")  // ë³„ë„ ìŠ¤ë ˆë“œ í’€ì—ì„œ ì‹¤í–‰
    @Transactional
    public CompletableFuture<Void> sendWelcomeEmail(Long userId) {
        try {
            User user = userRepository.findById(userId)
                    .orElseThrow(() -> new EntityNotFoundException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"));
            
            // ì´ë©”ì¼ ë°œì†¡ ë¡œì§ (ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…)
            emailService.sendWelcomeEmail(user.getEmail(), user.getName());
            
            log.info("í™˜ì˜ ì´ë©”ì¼ ë°œì†¡ ì™„ë£Œ: {}", user.getEmail());
            return CompletableFuture.completedFuture(null);
            
        } catch (Exception e) {
            log.error("í™˜ì˜ ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨: userId={}", userId, e);
            return CompletableFuture.failedFuture(e);
        }
    }
}

// ë¹„ë™ê¸° ì„¤ì •
@Configuration
@EnableAsync  // ë¹„ë™ê¸° ì²˜ë¦¬ í™œì„±í™”
public class AsyncConfig {
    
    @Bean(name = "taskExecutor")
    public TaskExecutor taskExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(2);      // ê¸°ë³¸ ìŠ¤ë ˆë“œ ìˆ˜
        executor.setMaxPoolSize(10);      // ìµœëŒ€ ìŠ¤ë ˆë“œ ìˆ˜
        executor.setQueueCapacity(100);   // ëŒ€ê¸° í í¬ê¸°
        executor.setThreadNamePrefix("async-task-");  // ìŠ¤ë ˆë“œ ì´ë¦„ ì ‘ë‘ì‚¬
        executor.initialize();
        return executor;
    }
}
```

### í†µí•© í…ŒìŠ¤íŠ¸ ë° ì‹¤ì œ í…ŒìŠ¤íŠ¸

#### Testcontainersë¥¼ í™œìš©í•œ í†µí•© í…ŒìŠ¤íŠ¸
```java
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
@Testcontainers  // Docker ì»¨í…Œì´ë„ˆ ê¸°ë°˜ í…ŒìŠ¤íŠ¸
class UserApiIntegrationTest {
    
    @Container
    static MySQLContainer<?> mysql = new MySQLContainer<>("mysql:8.0")
            .withDatabaseName("testdb")
            .withUsername("testuser")
            .withPassword("testpass");
    
    @Autowired
    private TestRestTemplate restTemplate;  // ì‹¤ì œ HTTP ìš”ì²­ ìˆ˜í–‰
    
    @Autowired
    private UserRepository userRepository;
    
    @Test
    @DisplayName("ì‚¬ìš©ì ìƒì„±ë¶€í„° ì¡°íšŒê¹Œì§€ ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸")
    void userFullCrudFlow() {
        // 1. ì‚¬ìš©ì ìƒì„±
        UserDto.CreateRequest createRequest = new UserDto.CreateRequest("ê¹€ì² ìˆ˜", "kim@test.com");
        
        ResponseEntity<ApiResponse<UserDto.Response>> createResponse = 
                restTemplate.postForEntity("/api/users", createRequest, 
                        new ParameterizedTypeReference<ApiResponse<UserDto.Response>>() {});
        
        assertThat(createResponse.getStatusCode()).isEqualTo(HttpStatus.CREATED);
        assertThat(createResponse.getBody().success()).isTrue();
        
        Long userId = createResponse.getBody().data().id();
        
        // 2. ìƒì„±ëœ ì‚¬ìš©ì ì¡°íšŒ
        ResponseEntity<ApiResponse<UserDto.Response>> getResponse = 
                restTemplate.exchange("/api/users/" + userId, HttpMethod.GET, null,
                        new ParameterizedTypeReference<ApiResponse<UserDto.Response>>() {});
        
        assertThat(getResponse.getStatusCode()).isEqualTo(HttpStatus.OK);
        assertThat(getResponse.getBody().data().name()).isEqualTo("ê¹€ì² ìˆ˜");
        
        // 3. ë°ì´í„°ë² ì´ìŠ¤ì—ë„ ì‹¤ì œë¡œ ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸
        Optional<User> savedUser = userRepository.findById(userId);
        assertThat(savedUser).isPresent();
        assertThat(savedUser.get().getEmail()).isEqualTo("kim@test.com");
    }
}
```

### API ë²„ì „ ê´€ë¦¬ ì „ëµ

#### í˜„ì—…ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë²„ì „ ê´€ë¦¬ ë°©ì‹
```mermaid
graph TB
    subgraph "ë²„ì „ ê´€ë¦¬ ë°©ì‹"
        A[URL Path ë²„ì „ë‹<br/>/api/v1/users<br/>/api/v2/users]
        B[Header ë²„ì „ë‹<br/>API-Version: 1<br/>Accept: application/vnd.api.v2+json]
        C[Query Parameter<br/>/api/users?version=1]
    end
    
    subgraph "í˜„ì—… ì„ í˜¸ë„"
        D[ê°€ì¥ ì¼ë°˜ì <br/>85%]
        E[ëŒ€ê¸°ì—…/ì—”í„°í”„ë¼ì´ì¦ˆ<br/>10%]
        F[ë ˆê±°ì‹œ ì‹œìŠ¤í…œ<br/>5%]
    end
    
    A --> D
    B --> E
    C --> F
    
    style A fill:#e8f5e8
    style B fill:#fff3e0
    style C fill:#ffebee
```

### ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ íŒ¨í„´

#### ì„œë¹„ìŠ¤ ê°„ í†µì‹ 
```java
// ì™¸ë¶€ ì„œë¹„ìŠ¤ í˜¸ì¶œì„ ìœ„í•œ FeignClient (í˜„ì—… í‘œì¤€)
@FeignClient(name = "notification-service", url = "${services.notification.url}")
public interface NotificationServiceClient {
    
    @PostMapping("/api/notifications/email")
    void sendEmail(@RequestBody EmailRequest request);
    
    @PostMapping("/api/notifications/sms")
    void sendSms(@RequestBody SmsRequest request);
}

// ì„œë¹„ìŠ¤ì—ì„œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ í˜¸ì¶œ
@Service
@Transactional
public class UserRegistrationService {
    
    private final UserService userService;
    private final NotificationServiceClient notificationClient;
    
    public UserDto.Response registerUser(UserDto.CreateRequest request) {
        // 1. ì‚¬ìš©ì ìƒì„±
        UserDto.Response user = userService.createUser(request);
        
        // 2. í™˜ì˜ ì´ë©”ì¼ ë°œì†¡ (ë¹„ë™ê¸°)
        CompletableFuture.runAsync(() -> {
            try {
                EmailRequest emailRequest = new EmailRequest(
                    user.email(),
                    "í™˜ì˜í•©ë‹ˆë‹¤!",
                    "íšŒì›ê°€ì…ì„ ì¶•í•˜ë“œë¦½ë‹ˆë‹¤."
                );
                notificationClient.sendEmail(emailRequest);
            } catch (Exception e) {
                log.warn("í™˜ì˜ ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨: userId={}", user.id(), e);
            }
        });
        
        return user;
    }
}
```

### í˜„ì—… ëª¨ë‹ˆí„°ë§ ë° ê´€ì°° ê°€ëŠ¥ì„±

#### Actuatorë¥¼ í™œìš©í•œ í—¬ìŠ¤ì²´í¬
```java
// ì»¤ìŠ¤í…€ í—¬ìŠ¤ ì²´í¬
@Component
public class DatabaseHealthIndicator implements HealthIndicator {
    
    private final UserRepository userRepository;
    
    @Override
    public Health health() {
        try {
            // ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìƒíƒœ í™•ì¸
            long userCount = userRepository.count();
            
            return Health.up()
                    .withDetail("database", "ì—°ê²°ë¨")
                    .withDetail("userCount", userCount)
                    .withDetail("timestamp", LocalDateTime.now())
                    .build();
                    
        } catch (Exception e) {
            return Health.down()
                    .withDetail("database", "ì—°ê²° ì‹¤íŒ¨")
                    .withDetail("error", e.getMessage())
                    .build();
        }
    }
}

// application.yml ì„¤ì •
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus  # ë…¸ì¶œí•  ì—”ë“œí¬ì¸íŠ¸
  endpoint:
    health:
      show-details: always  # í—¬ìŠ¤ì²´í¬ ìƒì„¸ ì •ë³´ í‘œì‹œ
  metrics:
    export:
      prometheus:
        enabled: true  # Prometheus ë©”íŠ¸ë¦­ ë…¸ì¶œ
```

#### ë¶„ì‚° ì¶”ì  (Distributed Tracing)
```java
// Zipkin/Jaegerë¥¼ í™œìš©í•œ ë¶„ì‚° ì¶”ì 
@RestController
public class TracingController {
    
    private final UserService userService;
    private final Tracer tracer;  // OpenTracing/OpenTelemetry
    
    @GetMapping("/users/{id}")
    public ResponseEntity<UserDto.Response> getUser(@PathVariable Long id) {
        // ì»¤ìŠ¤í…€ ìŠ¤íŒ¬ ìƒì„±
        Span span = tracer.nextSpan()
                .name("get-user")  // ìŠ¤íŒ¬ ì´ë¦„
                .tag("user.id", id.toString())  // íƒœê·¸ ì¶”ê°€
                .start();
        
        try (Tracer.SpanInScope ws = tracer.withSpanInScope(span)) {
            UserDto.Response user = userService.getUserById(id);
            
            span.tag("user.email", user.email());  // ì¶”ê°€ íƒœê·¸
            span.annotate("user-found");  // ì´ë²¤íŠ¸ ê¸°ë¡
            
            return ResponseEntity.ok(user);
            
        } catch (Exception e) {
            span.tag("error", e.getMessage());  // ì—ëŸ¬ íƒœê·¸
            throw e;
        } finally {
            span.end();  // ìŠ¤íŒ¬ ì¢…ë£Œ
        }
    }
}
```

### ì‹¤ë¬´ ë°°í¬ íŒŒì´í”„ë¼ì¸

#### CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì„±
```yaml
# .github/workflows/deploy.yml (GitHub Actions)
name: CI/CD Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    services:
      mysql:  # í…ŒìŠ¤íŠ¸ìš© MySQL ì„œë¹„ìŠ¤
        image: mysql:8.0
        env:
          MYSQL_ROOT_PASSWORD: testpass
          MYSQL_DATABASE: testdb
        ports:
          - 3306:3306
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up JDK 17
      uses: actions/setup-java@v3
      with:
        java-version: '17'
        distribution: 'temurin'
    
    - name: Cache Gradle dependencies  # ì˜ì¡´ì„± ìºì‹±
      uses: actions/cache@v3
      with:
        path: ~/.gradle/caches
        key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle') }}
    
    - name: Run tests  # í…ŒìŠ¤íŠ¸ ì‹¤í–‰
      run: ./gradlew test
    
    - name: Generate test report  # í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¦¬í¬íŠ¸
      uses: dorny/test-reporter@v1
      if: success() || failure()
      with:
        name: 'Test Results'
        path: '**/build/test-results/test/TEST-*.xml'
        reporter: java-junit
  
  build-and-deploy:
    needs: test  # í…ŒìŠ¤íŠ¸ ì„±ê³µì‹œì—ë§Œ ë°°í¬
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'  # main ë¸Œëœì¹˜ë§Œ ë°°í¬
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Build Docker image  # Docker ì´ë¯¸ì§€ ë¹Œë“œ
      run: |
        docker build -t ${{ secrets.DOCKER_REGISTRY }}/user-api:${{ github.sha }} .
        docker tag ${{ secrets.DOCKER_REGISTRY }}/user-api:${{ github.sha }} \
                   ${{ secrets.DOCKER_REGISTRY }}/user-api:latest
    
    - name: Push to registry  # ì´ë¯¸ì§€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— í‘¸ì‹œ
      run: |
        echo ${{ secrets.DOCKER_PASSWORD }} | docker login -u ${{ secrets.DOCKER_USERNAME }} --password-stdin
        docker push ${{ secrets.DOCKER_REGISTRY }}/user-api:${{ github.sha }}
        docker push ${{ secrets.DOCKER_REGISTRY }}/user-api:latest
    
    - name: Deploy to Kubernetes  # ì¿ ë²„ë„¤í‹°ìŠ¤ ë°°í¬
      run: |
        kubectl set image deployment/user-api user-api=${{ secrets.DOCKER_REGISTRY }}/user-api:${{ github.sha }}
        kubectl rollout status deployment/user-api
```

### API ë¬¸ì„œ ìë™í™” ì›Œí¬í”Œë¡œ

#### ë¬¸ì„œ ìƒì„± ë° ë°°í¬
```mermaid
graph LR
    A[ì†ŒìŠ¤ ì½”ë“œ<br/>OpenAPI ì• ë„ˆí…Œì´ì…˜] --> B[ë¹Œë“œ í”„ë¡œì„¸ìŠ¤]
    B --> C[OpenAPI Spec ìƒì„±<br/>openapi.json]
    C --> D[Swagger UI ìƒì„±]
    C --> E[Postman Collection ìƒì„±]
    C --> F[SDK ìë™ ìƒì„±]
    
    D --> G[ê°œë°œì í¬í„¸ ë°°í¬]
    E --> H[QA íŒ€ ë°°í¬]
    F --> I[í´ë¼ì´ì–¸íŠ¸ íŒ€ ë°°í¬]
    
    style A fill:#e8f5e8
    style G fill:#e1f5fe
    style H fill:#f3e5f5
    style I fill:#fff3e0
```

### í˜„ì—… ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### API ë³´ì•ˆ í•„ìˆ˜ ì‚¬í•­
```java
// CORS ì„¤ì • (Cross-Origin Resource Sharing)
@Configuration
public class CorsConfig {
    
    @Bean
    public CorsConfigurationSource corsConfigurationSource() {
        CorsConfiguration configuration = new CorsConfiguration();
        
        // í—ˆìš©í•  ë„ë©”ì¸ (í”„ë¡œë•ì…˜ì—ì„œëŠ” êµ¬ì²´ì ìœ¼ë¡œ ëª…ì‹œ)
        configuration.setAllowedOriginPatterns(Arrays.asList(
            "https://*.example.com",  // íšŒì‚¬ ë„ë©”ì¸
            "http://localhost:3000",  // ë¡œì»¬ ê°œë°œ
            "http://localhost:3001"   // ë¡œì»¬ ìŠ¤í…Œì´ì§•
        ));
        
        configuration.setAllowedMethods(Arrays.asList("GET", "POST", "PUT", "DELETE", "OPTIONS"));
        configuration.setAllowedHeaders(Arrays.asList("*"));
        configuration.setAllowCredentials(true);  // ì¿ í‚¤ í—ˆìš©
        configuration.setMaxAge(3600L);  // Preflight ìºì‹œ ì‹œê°„
        
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/api/**", configuration);
        return source;
    }
}

// ìš”ì²­ ì œí•œ (Rate Limiting)
@Component
public class RateLimitingFilter implements Filter {
    
    private final RedisTemplate<String, String> redisTemplate;
    
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest httpRequest = (HttpServletRequest) request;
        String clientIp = getClientIp(httpRequest);  // í´ë¼ì´ì–¸íŠ¸ IP ì¶”ì¶œ
        
        String key = "rate_limit:" + clientIp;
        String currentCount = redisTemplate.opsForValue().get(key);
        
        if (currentCount == null) {
            // ì²« ìš”ì²­: ì¹´ìš´í„° ì´ˆê¸°í™” (1ë¶„ TTL)
            redisTemplate.opsForValue().set(key, "1", Duration.ofMinutes(1));
        } else if (Integer.parseInt(currentCount) >= 100) {  // ë¶„ë‹¹ 100íšŒ ì œí•œ
            // ì œí•œ ì´ˆê³¼ì‹œ 429 Too Many Requests ì‘ë‹µ
            HttpServletResponse httpResponse = (HttpServletResponse) response;
            httpResponse.setStatus(429);
            httpResponse.getWriter().write("{\"error\":\"ìš”ì²­ ì œí•œì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤\"}");
            return;
        } else {
            // ì¹´ìš´í„° ì¦ê°€
            redisTemplate.opsForValue().increment(key);
        }
        
        chain.doFilter(request, response);  // ë‹¤ìŒ í•„í„°ë¡œ ì „ë‹¬
    }
    
    private String getClientIp(HttpServletRequest request) {
        String xForwardedFor = request.getHeader("X-Forwarded-For");
        if (xForwardedFor != null) {
            return xForwardedFor.split(",")[0].trim();  // ì²« ë²ˆì§¸ IP
        }
        return request.getRemoteAddr();
    }
}
```

### ì‹¤ë¬´ ë°ì´í„° ê²€ì¦

#### ë³µí•© ìœ íš¨ì„± ê²€ì¦
```java
// ì»¤ìŠ¤í…€ ê²€ì¦ ì• ë„ˆí…Œì´ì…˜
@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = UniqueEmailValidator.class)
public @interface UniqueEmail {
    String message() default "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};
}

// ê²€ì¦ ë¡œì§ êµ¬í˜„
@Component
public class UniqueEmailValidator implements ConstraintValidator<UniqueEmail, UserDto.CreateRequest> {
    
    private final UserRepository userRepository;
    
    @Override
    public boolean isValid(UserDto.CreateRequest request, ConstraintValidatorContext context) {
        if (request == null || request.email() == null) {
            return true;  // null ê²€ì¦ì€ @NotNullì´ ë‹´ë‹¹
        }
        
        // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¤‘ë³µ í™•ì¸
        return !userRepository.existsByEmail(request.email());
    }
}

// DTOì— ì ìš©
@UniqueEmail  // ì»¤ìŠ¤í…€ ê²€ì¦ ì• ë„ˆí…Œì´ì…˜
public record CreateRequest(
    @NotBlank(message = "ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    @Size(min = 2, max = 50, message = "ì´ë¦„ì€ 2ì ì´ìƒ 50ì ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤")
    String name,
    
    @NotBlank(message = "ì´ë©”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤")
    @Email(message = "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤")
    String email
) {}
```

## í˜„ì—… ê°œë°œ ë„êµ¬ ë° ì›Œí¬í”Œë¡œ

### ê°œë°œ ë„êµ¬ ìŠ¤íƒ
```yaml
# í˜„ì—…ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë„êµ¬ë“¤

ê°œë°œ í™˜ê²½:
  IDE: IntelliJ IDEA Ultimate (70%), VS Code (25%), Eclipse (5%)
  ë¹Œë“œ ë„êµ¬: Gradle (80%), Maven (20%)
  ë²„ì „ ê´€ë¦¬: Git + GitHub/GitLab
  
API ê°œë°œ ë° í…ŒìŠ¤íŠ¸:
  ë¬¸ì„œí™”: Swagger/OpenAPI 3.0, Postman
  í…ŒìŠ¤íŠ¸: Postman, Insomnia, REST Client (VS Code)
  ëª¨í‚¹: WireMock, MockServer
  
ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…:
  APM: New Relic, Datadog, Elastic APM
  ë¡œê¹…: ELK Stack (Elasticsearch, Logstash, Kibana)
  ë©”íŠ¸ë¦­: Prometheus + Grafana
  
í´ë¼ìš°ë“œ ë° ë°°í¬:
  í´ë¼ìš°ë“œ: AWS (60%), Azure (25%), GCP (15%)
  ì»¨í…Œì´ë„ˆ: Docker + Kubernetes
  CI/CD: GitHub Actions, Jenkins, GitLab CI
```

### ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí‚¹

#### JMeterë¥¼ í™œìš©í•œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
```java
// ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ìš© ì»¨íŠ¸ë¡¤ëŸ¬ ì„¤ì •
@RestController
@RequestMapping("/api/performance")
public class PerformanceTestController {
    
    private final UserService userService;
    private final MeterRegistry meterRegistry;  // ë©”íŠ¸ë¦­ ìˆ˜ì§‘
    
    @GetMapping("/users/{id}")
    @Timed(value = "api.users.get", description = "ì‚¬ìš©ì ì¡°íšŒ API ì‹¤í–‰ ì‹œê°„")
    public ResponseEntity<UserDto.Response> getUser(@PathVariable Long id) {
        // ë©”íŠ¸ë¦­ ì¹´ìš´í„° ì¦ê°€
        meterRegistry.counter("api.users.get.requests", "endpoint", "getUser").increment();
        
        try {
            UserDto.Response user = userService.getUserById(id);
            
            // ì„±ê³µ ë©”íŠ¸ë¦­
            meterRegistry.counter("api.users.get.success", "endpoint", "getUser").increment();
            return ResponseEntity.ok(user);
            
        } catch (EntityNotFoundException e) {
            // ì‹¤íŒ¨ ë©”íŠ¸ë¦­
            meterRegistry.counter("api.users.get.notfound", "endpoint", "getUser").increment();
            throw e;
        }
    }
}
```

### ìµœì‹  ê°œë°œ ë™í–¥ (2025ë…„)

#### 1. AI ê¸°ë°˜ API ê°œë°œ
```java
// AI ì½”ë“œ ìƒì„± ë„êµ¬ì™€ì˜ í†µí•©ì´ ì¼ë°˜í™”
// GitHub Copilot, Amazon CodeWhisperer ë“±ì„ í™œìš©í•œ ê°œë°œ

@RestController
public class AiAssistedController {
    
    // AIê°€ ì œì•ˆí•˜ëŠ” ì½”ë“œ íŒ¨í„´ë“¤ì´ í‘œì¤€ì´ ë˜ì–´ê°€ê³  ìˆìŒ
    @GetMapping("/users/search")
    public ResponseEntity<PagedResponse<UserDto.Response>> searchUsers(
            @RequestParam(required = false) String query,
            @RequestParam(defaultValue = "name") String sortBy,
            @RequestParam(defaultValue = "asc") String sortDir,
            @PageableDefault(size = 20) Pageable pageable) {
        
        // AIê°€ ìƒì„±í•œ ë³µì¡í•œ ê²€ìƒ‰ ë¡œì§
        PagedResponse<UserDto.Response> result = userService.searchUsers(
                query, sortBy, sortDir, pageable);
        
        return ResponseEntity.ok(result);
    }
}
```

#### 2. í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ íŒ¨í„´
```java
// Spring Cloudì™€ Kubernetes ë„¤ì´í‹°ë¸Œ í†µí•©
@RestController
@RefreshScope  // ì„¤ì • ë³€ê²½ì‹œ ìë™ ë¦¬í”„ë ˆì‹œ
public class CloudNativeController {
    
    @Value("${app.feature.new-algorithm:false}")  // í”¼ì²˜ í”Œë˜ê·¸
    private boolean useNewAlgorithm;
    
    @Autowired
    private ServiceDiscovery serviceDiscovery;  // ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬
    
    @GetMapping("/users/{id}/recommendations")
    public ResponseEntity<List<RecommendationDto>> getRecommendations(@PathVariable Long id) {
        
        if (useNewAlgorithm) {
            // ìƒˆë¡œìš´ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©
            return ResponseEntity.ok(newRecommendationService.getRecommendations(id));
        } else {
            // ê¸°ì¡´ ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©
            return ResponseEntity.ok(legacyRecommendationService.getRecommendations(id));
        }
    }
}
```

## ë§ˆë¬´ë¦¬: í˜„ì—… ê°œë°œìê°€ ë˜ê¸° ìœ„í•œ í•™ìŠµ ë¡œë“œë§µ

### ë‹¨ê³„ë³„ í•™ìŠµ ê³„íš
```mermaid
gantt
    title API ê°œë°œì ì„±ì¥ ë¡œë“œë§µ
    dateFormat  YYYY-MM-DD
    section ê¸°ì´ˆ ë‹¨ê³„
    REST ê¸°ë³¸ ê°œë…        :done, basic1, 2025-09-01, 1w
    Spring Boot ê¸°ì´ˆ      :done, basic2, 2025-09-08, 2w
    JPA/Hibernate        :active, basic3, 2025-09-22, 2w
    
    section ì¤‘ê¸‰ ë‹¨ê³„
    JWT ì¸ì¦/ì¸ê°€        :inter1, 2025-10-06, 1w
    í…ŒìŠ¤íŠ¸ ì‘ì„±          :inter2, 2025-10-13, 2w
    Docker ì»¨í…Œì´ë„ˆí™”    :inter3, 2025-10-27, 1w
    
    section ê³ ê¸‰ ë‹¨ê³„
    ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤       :adv1, 2025-11-03, 3w
    ëª¨ë‹ˆí„°ë§/ë¡œê¹…       :adv2, 2025-11-24, 2w
    ì„±ëŠ¥ ìµœì í™”         :adv3, 2025-12-08, 2w
    
        
    
